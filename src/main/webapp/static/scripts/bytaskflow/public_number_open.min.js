webpackJsonp([94],{BD2p:function(t,e,n){"use strict";var i=n("bOdI"),a=n.n(i),o={name:"Icon",props:{type:String,size:[Number,String],color:String},computed:{classes:function(){return"ivu-icon ivu-icon-"+this.type},styles:function(){var t={};return this.size&&(t["font-size"]=this.size+"px"),this.color&&(t.color=this.color),t}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles})},staticRenderFns:[]},r=n("VU/8")(o,s,!1,null,null,null).exports,c=(n("BO1k"),n("7+uW").default.prototype.$isServer);function l(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}!c&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);var u={components:{Icon:r},props:{percent:{type:Number,default:0},status:{validator:function(t){return l(t,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1}},data:function(){return{currentStatus:this.status}},computed:{isStatus:function(){return"wrong"==this.currentStatus||"success"==this.currentStatus},statusIcon:function(){var t="";switch(this.currentStatus){case"wrong":t="ios-close";break;case"success":t="ios-checkmark"}return t},bgStyle:function(){return this.vertical?{height:this.percent+"%",width:this.strokeWidth+"px"}:{width:this.percent+"%",height:this.strokeWidth+"px"}},wrapClasses:function(){var t;return["ivu-progress","ivu-progress-"+this.currentStatus,(t={},a()(t,"ivu-progress-show-info",!this.hideInfo),a()(t,"ivu-progress-vertical",this.vertical),t)]},textClasses:function(){return"ivu-progress-text"},textInnerClasses:function(){return"ivu-progress-text-inner"},outerClasses:function(){return"ivu-progress-outer"},innerClasses:function(){return"ivu-progress-inner"},bgClasses:function(){return"ivu-progress-bg"}},created:function(){this.handleStatus()},methods:{handleStatus:function(t){t?(this.currentStatus="normal",this.$emit("on-status-change","normal")):100==parseInt(this.percent,10)&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent:function(t,e){t<e?this.handleStatus(!0):this.handleStatus()},status:function(t){this.currentStatus=t}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapClasses},[n("div",{class:t.outerClasses},[n("div",{class:t.innerClasses},[n("div",{class:t.bgClasses,style:t.bgStyle})])]),t._v(" "),t.hideInfo?t._e():n("span",{class:t.textClasses},[t._t("default",[t.isStatus?n("span",{class:t.textInnerClasses},[n("Icon",{attrs:{type:t.statusIcon}})],1):n("span",{class:t.textInnerClasses},[t._v("\n                "+t._s(t.percent)+"%\n            ")])])],2)])},staticRenderFns:[]},d={name:"UploadList",components:{Icon:r,iProgress:n("VU/8")(u,p,!1,null,null,null).exports},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload"}},methods:{fileCls:function(t){return["ivu-upload-list-file",a()({},"ivu-upload-list-file-finish","finished"===t.status)]},handleClick:function(t){this.$emit("on-file-click",t)},handlePreview:function(t){this.$emit("on-file-preview",t)},handleRemove:function(t){this.$emit("on-file-remove",t)},format:function(t){var e=t.name.split(".").pop().toLocaleLowerCase()||"",n="document";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(e)>-1&&(n="image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(e)>-1&&(n="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(e)>-1&&(n="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(e)>-1&&(n="document-text"),["numbers","csv","xls","xlsx"].indexOf(e)>-1&&(n="stats-bars"),["keynote","ppt","pptx"].indexOf(e)>-1&&(n="ios-videocam"),n},parsePercentage:function(t){return parseInt(t,10)}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:[t.prefixCls+"-list"]},t._l(t.files,function(e){return n("li",{class:t.fileCls(e),on:{click:function(n){t.handleClick(e)}}},[n("span",{on:{click:function(n){t.handlePreview(e)}}},[n("Icon",{attrs:{type:t.format(e)}}),t._v(" "+t._s(e.name)+"\n        ")],1),t._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===e.status,expression:"file.status === 'finished'"}],class:[t.prefixCls+"-list-remove"],attrs:{type:"ios-close-empty"},nativeOn:{click:function(n){t.handleRemove(e)}}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[e.showProgress?n("i-progress",{attrs:{"stroke-width":2,percent:t.parsePercentage(e.percentage),status:"finished"===e.status&&e.showProgress?"success":"normal"}}):t._e()],1)],1)}))},staticRenderFns:[]},h=n("VU/8")(d,f,!1,null,null,null).exports,m=n("fZjL"),v=n.n(m);function g(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function b(t){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var i=new FormData;t.data&&v()(t.data).map(function(e){i.append(e,t.data[e])}),i.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(function(t,e,n){var i="fail to post "+t+" "+n.status+"'",a=new Error(i);return a.status=n.status,a.method="post",a.url=t,a}(n,0,e),g(e));t.onSuccess(g(e))},e.open("post",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var a=t.headers||{};for(var o in a)a.hasOwnProperty(o)&&null!==a[o]&&e.setRequestHeader(o,a[o]);e.send(i)}}var y={name:"Upload",mixins:[{methods:{dispatch:function(t,e,n){for(var i=this.$parent||this.$root,a=i.$options.name;i&&(!a||a!==t);)(i=i.$parent)&&(a=i.$options.name);i&&i.$emit.apply(i,[e].concat(n))},broadcast:function(t,e,n){(function t(e,n,i){this.$children.forEach(function(a){a.$options.name===e?a.$emit.apply(a,[n].concat(i)):t.apply(a,[e,n].concat([i]))})}).call(this,t,e,n)}}}],components:{UploadList:h},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(t){return l(t,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},maxSelectNum:{type:Number},existNum:{type:Number},index:{type:Number}},data:function(){return{prefixCls:"ivu-upload",dragOver:!1,fileList:[],tempIndex:1}},computed:{classes:function(){var t;return["ivu-upload",(t={},a()(t,"ivu-upload-select","select"===this.type),a()(t,"ivu-upload-drag","drag"===this.type),a()(t,"ivu-upload-dragOver","drag"===this.type&&this.dragOver),t)]}},methods:{handleClick:function(){this.$refs.input.click()},handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},onDrop:function(t){this.dragOver=!1,this.uploadFiles(t.dataTransfer.files)},uploadFiles:function(t){var e=this,n=Array.prototype.slice.call(t);if(this.maxSelectNum&&n.length>this.maxSelectNum-this.existNum)return erpShopApp.tip("最多只能上传"+this.maxSelectNum+"张图片！","info"),!1;this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach(function(t){e.upload(t)})},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t,this.index);n&&n.then?n.then(function(n){"[object File]"===Object.prototype.toString.call(n)?e.post(n):e.post(t)},function(){}):!1!==n&&this.post(t)},post:function(t){var e=this;if(this.format.length){var n=t.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(function(t){return t.toLocaleLowerCase()===n}))return this.onFormatError(t,this.fileList),!1}if(this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t),(new FormData).append(this.name,t),b({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(n){e.handleProgress(n,t)},onSuccess:function(n){e.handleSuccess(n,t,e.index)},onError:function(n,i){e.handleError(n,i,t)}})},handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)},getFile:function(t){var e=void 0;return this.fileList.every(function(n){return!(e=t.uid===n.uid?n:null)}),e},handleProgress:function(t,e){var n=this.getFile(e);this.onProgress(t,n,this.fileList),n.percentage=t.percent||0},handleSuccess:function(t,e,n){var i=this.getFile(e);i&&(i.status="finished",i.response=t,this.dispatch("FormItem","on-form-change",i),this.onSuccess(t,i,this.fileList,n),setTimeout(function(){i.showProgress=!1},1e3))},handleError:function(t,e,n){var i=this.getFile(n),a=this.fileList;i.status="fail",a.splice(a.indexOf(i),1),this.onError(t,e,n)},handleRemove:function(t){var e=this.fileList;e.splice(e.indexOf(t),1),this.onRemove(t,e)},handlePreview:function(t){"finished"===t.status&&this.onPreview(t)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(t){var e=this;this.fileList=t.map(function(t){return t.status="finished",t.percentage=100,t.uid=Date.now()+e.tempIndex++,t})}}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.prefixCls]},[n("div",{class:t.classes,on:{click:t.handleClick,drop:function(e){e.preventDefault(),t.onDrop(e)},dragover:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1}}},[n("input",{ref:"input",class:[t.prefixCls+"-input"],attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("tip"),t._v(" "),t.showUploadList?n("upload-list",{attrs:{files:t.fileList},on:{"on-file-remove":t.handleRemove,"on-file-preview":t.handlePreview}}):t._e()],2)},staticRenderFns:[]},x=n("VU/8")(y,w,!1,null,null,null);e.a=x.exports},oAV5:function(t,e,n){"use strict";n.d(e,"f",function(){return l}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return p}),n.d(e,"d",function(){return d}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return v});var i=n("//Fk"),a=n.n(i),o=n("mvHQ"),s=n.n(o),r=n("pFYg"),c=n.n(r),l=function(t,e,n){for(var i=0,a=e.length,o=!1;i<a;){if(t===e[i][n]){o=!0;break}i++}return o},u=function(t){return""+t.replace(/(^\s*)|(\s*$)/g,"")},p=function(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+(e>9?e:"0"+e)+"-"+(n>9?n:"0"+n)};f.prototype.getDateStr3=function(t){var e=t;return""+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},f.prototype.getWeekStartAndEnd=function(t){var e=new Date,n=(e=new Date(e.getTime()+6048e5*t)).getDay(),i=(e.getDate(),0!=n?n-1:6),a=new Date(e.getTime()-864e5*i),o=new Date(a.getTime()+5184e5);return this.getDateStr3(a)+" - "+this.getDateStr3(o)};var d=function(t,e,n){t=t;var i=e?new Date(e):new Date,a=i.getFullYear(),o=i.getMonth()+1,s=i.getDate();return s<=t&&(o>1?o-=1:(a-=1,o=12)),"before"===n?i.setDate(i.getDate()-t):i.setDate(i.getDate()+t),a=i.getFullYear(),o=i.getMonth()+1,s=i.getDate(),a+"-"+(o<10?"0"+o:o)+"-"+(s<10?"0"+s:s)};function f(t){this.date=t.date,this.type=t.type,this.value=void 0!==t.value?t.value:0,this.format=void 0!==t.format?t.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}f.prototype.beforeDate=function(t,e){var n=t||this.type,i=e||this.value,a=this.year,o=this.month,s=this.day;"year"===n||"年"===n?a-=i:"month"===n||"月"===n?(a-=parseInt(i/12),(o-=i%12)<=0&&(a-=1,o+=12)):"day"!==n&&"日"!==n||(s-=i%30)<=0&&(a-=1,o+=12);var r=new Date(a,o-1,s);return this.formatDate(r,this.format)},f.prototype.formatDate=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},f.prototype.getThisMonth=function(){var t=new Date(this.year,this.month-1),e=new Date(this.year,this.month,0);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.getSomeMonth=function(t){return this.beforeDate("month",t)+" - "+this.beforeDate("now",0)},f.prototype.getThisYear=function(){var t=new Date(this.year,0,1),e=new Date(this.year,11,31);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.formatTimeStr=function(t){var e=new Date,n=parseInt(e.getTime()),i=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+(e.getDate()-1)+" 00:00:01"),a=new Date(t),o=(n-t)/1e3;return o>=31536e3||a.getFullYear()!=e.getFullYear()?a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate():o>259200?a.getMonth()+1+"-"+a.getDate():a.getDate()==i.getDate()?"昨天":o>86400?Math.ceil(o/86400)+"天前":o>3600?Math.floor(o/3600)+"小时前":o>60?Math.floor(o/60)+"分钟前":"刚刚"};var h=new f({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),m=function(t){var e,n,i,a={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},o={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},s=(new Date).getTime(),r=/\[\]$/,l=/\=\?(&|$)/,u=/\?/,p=/%20/g,d=/\S/,f={},h={},m=function t(){var e,n,i,a,o,s,r=arguments[0]||{},l=arguments.length;for(e=1;e<l;++e)if(null!=(n=arguments[e]))for(s in n)i=r[s],a=n[s],r!==a&&("object"===(void 0===a?"undefined":c()(a))?(o=i&&"object"===(void 0===i?"undefined":c()(i))?i:{},r[s]=t(o,a)):void 0!==a&&(r[s]=a));return r}(a,t),v=m.type.toUpperCase(),g=/^(?:GET|HEAD)$/.test(v);if(m.url=m.url.replace(/#.*$/,""),m.context=t&&null!=t.context?t.context:m,m.data&&m.processData&&"string"!=typeof m.data&&(m.data=function(t){var e,n=[],i=function(t,e){e=F(e)?e():e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(N(t))for(e in t)i(e,t[e]);else for(var a in t)T(a,t[a],i);return n.join("&").replace(p,"+")}(m.data)),"jsonp"===m.dataType&&("GET"===v?l.test(m.url)||(m.url+=(u.test(m.url)?"&":"?")+(m.jsonp||"callback")+"=?"):m.data&&l.test(m.data)||(m.data=(m.data?m.data+"&":"")+(m.jsonp||"callback")+"=?"),m.dataType="json"),"json"===m.dataType&&(m.data&&l.test(m.data)||l.test(m.url))){e=m.jsonpCallback||"jsonp"+s++,m.data&&(m.data=(m.data+"").replace(l,"="+e+"$1")),m.url=m.url.replace(l,"="+e+"$1"),m.dataType="script";var b=window[e];window[e]=function(t){if(F(b))b(t);else{window[e]=void 0;try{delete window[e]}catch(t){}}M(m,k,n,i=t),E(m,k,n),x&&x.removeChild(I)}}m.data&&g&&(m.url+=(u.test(m.url)?"&":"?")+m.data);var y=/^(\w+:)?\/\/([^\/?#]+)/.exec(m.url),w=y&&(y[1]&&y[1].toLowerCase()!==location.protocol||y[2].toLowerCase()!==location.host);if("script"===m.dataType&&"GET"===v&&w){var x=document.getElementsByTagName("head")[0]||document.documentElement,I=document.createElement("script");if(m.scriptCharset&&(I.charset=m.scriptCharset),I.src=m.url,!e){var _=!1;I.onload=I.onreadystatechange=function(){_||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(_=!0,M(m,k,n,i),E(m,k,n),I.onload=I.onreadystatechange=null,x&&I.parentNode&&x.removeChild(I))}}x.insertBefore(I,x.firstChild)}else{var C=!1,k=m.xhr();if(k){m.username?k.open(v,m.url,m.async,m.username,m.password):k.open(v,m.url,m.async),m.withCredentials&&"withCredentials"in k&&(k.withCredentials=!0);try{(null!=m.data&&!g||t&&t.contentType)&&k.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(f[m.url]&&k.setRequestHeader("If-Modified-Since",f[m.url]),h[m.url]&&k.setRequestHeader("If-None-Match",h[m.url])),w||k.setRequestHeader("X-Requested-With","XMLHttpRequest"),k.setRequestHeader("Accept",m.dataType&&m.accepts[m.dataType]?m.accepts[m.dataType]+", */*; q=0.01":m.accepts._default)}catch(t){}if(m.beforeSend&&!1===m.beforeSend.call(m.context,k,m))return k.abort(),!1;var A=k.onreadystatechange=function(t){if(k&&0!==k.readyState&&"abort"!==t){if(!C&&k&&(4===k.readyState||"timeout"===t)){var a;if(C=!0,k.onreadystatechange=O,"success"===(n="timeout"===t?"timeout":function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}(k)?m.ifModified&&function(t,e){var n=t.getResponseHeader("Last-Modified"),i=t.getResponseHeader("Etag");n&&(n[e]=n);i&&(i[e]=i);return 304===t.status}(k,m.url)?"notmodified":"success":"error"))try{i=function(t,e,n){var i=t.getResponseHeader("content-type")||"",a="xml"===e||!e&&i.indexOf("xml")>=0,o=a?t.responseXML:t.responseText;if(a&&"parsererror"===o.documentElement.nodeName)throw"parsererror";n&&n.dataFilter&&(o=n.dataFilter(o,e));"string"==typeof o&&("json"===e||!e&&i.indexOf("json")>=0?o=JSON.parse(o):("script"===e||!e&&i.indexOf("javascript")>=0)&&function(t){if(t&&d.test(t)){var e=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",scriptEval?n.appendChild(document.createTextNode(t)):n.text=t,e.insertBefore(n,e.firstChild),e.removeChild(n)}}(o));return o}(k,m.dataType,m)}catch(t){n="parsererror",a=t}"success"===n||"notmodified"===n?e||M(m,k,n,i):j(m,k,n,a),e||E(m,k,n),"timeout"===t&&k.abort(),m.async&&(k=null)}}else C||E(m,k,n),C=!0,k&&(k.onreadystatechange=O)};try{var S=k.abort;k.abort=function(){k&&Function.prototype.call.call(S,k),A("abort")}}catch(t){}m.async&&m.timeout>0&&setTimeout(function(){k&&!C&&A("timeout")},m.timeout);try{k.send(g||null==m.data?null:m.data)}catch(t){j(m,k,null,t),E(m,k,n)}return m.async||A(),k}}function D(t){return null==t?String(t):o[toString.call(t)]||"object"}function F(t){return"function"===D(t)}function N(t){return"array"===D(t)}function T(t,e,n){if(N(e)&&e.length)for(var i in e){var a=e[i];r.test(t)?n(t,a):T(t+"["+("object"===(void 0===a?"undefined":c()(a))||N(a)?i:"")+"]",a,n)}else if(null!=e&&"object"===(void 0===e?"undefined":c()(e)))if(function(t){for(var e in t)return!1;return!0}(e))n(t,"");else for(var o in e){T(t+"["+o+"]",a=e[o],n)}else n(t,e)}function j(t,e,n,i){"function"==typeof t.error&&t.error.call(t.context,e,n,i)}function M(t,e,n,i){"function"==typeof t.success&&t.success.call(t.context,i,n,e)}function E(t,e,n){"function"==typeof t.complete&&t.complete.call(t.context,e,n)}function O(){}},v=function(t){var e,n,i=t.data;return"string"==typeof t.dataType&&"string"==typeof t.type&&"json"===(e=t.dataType.toLowerCase())&&"post"===t.type.toLowerCase()&&(i=s()(t.data)),"string"==typeof t.contentType&&(n=t.contentType.toLowerCase()),new a.a(function(a,o){m({url:t.url||"url",type:t.type||"GET",async:!1!==t.async,withCredentials:t.withCredentials,data:i,dataType:e||"default",contentType:n||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof t.beforeSend||t.beforeSend()},success:function(t,e,n,i){a(t,e,n,i)},error:function(t,e,n,i){o({responseText:t.responseText,code:t.status})},complete:function(t,e,n){a(t,e,n)}})})};e.c=f},uS6d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),a=n.n(i),o=n("7+uW"),s=n("mvHQ"),r=n.n(s),c=n("mtWM"),l=n.n(c),u=n("oAV5"),p=n("BD2p");window.task_flow_version="beiyi_flow";var d={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:u.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:u.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{title:"进件资料收集",subtitle:["公众号开通操作","任务操作备忘","订单负责人员","商户联系人","话术参考","商户联系人","任务操作","完成注册后获取公众号信息","任务操作指引"],subtitlebtn:"订单详情",contentwrap:{label:["订单号：","购买时间：","商户名称：","商户简称：","联系人：","联系电话：","销售人：","销售人联系方式："],typelabel:["服务项：","服务类型：","商户类型："],clabel:["公众号账号：","公众号密码：","公众号名称：","公众号APPID：","公众号公开信息截图：","掌贝账号密码：","小程序账号：","默认密码："],remarklabel:["在掌贝后台，创建N（读取门店服务费数量）个商户门店","电话沟通联系运营负责人（老板），询问老板微信号","添加商户运营负责人微信"],remarkchecklabel:deliveryFlowStaticContent.public_number_open.memo,remarks:deliveryFlowStaticContent.public_number_open.remarks}},tip:{a:!1,b:!1,c:!1},linkdata:{columns:["商户联系人姓名","联系人角色","联系人电话","联系人微信号"],data:[{linkName:"商户联系人姓名",linkRole:"联系人角色",linkPhone:"联系人电话",linkWechat:"联系人微信号"}],addbtntitle:"添加商户负责人联系方式",minusbtntitle:"删除商户负责人联系方式"},uploadAction:ctx+"/workfile/file/uploads",remark:[],taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),flowWeiXinInfo:{flowdata:{weixinAccountOpenMemo:""},publicAccountNoInfo:[{publicAccountNo:"",publicAccountPassword:"",publicAccountName:"",publicAccountAppid:"",id:""}],publicFileInfoId:[],orderId:"",shopName:""},uploadUrl:pageDataObject.uploadfileurl}},computed:{info:function(){return this.flowWeiXinInfo},datas:function(){return{taskId:this.taskId,procInsId:this.procInsId,fileId:"",fileUrl:""}}},components:{upload:p.a},mounted:function(){this.getFlowWeiXinInfo()},methods:{getFlowWeiXinInfo:function(){var t=this;l.a.get(ctx+"/delivery/flow/getFlowWeiXinInfo",{params:{taskId:this.taskId,procInsId:this.procInsId}}).then(function(e){if(e.data.result){if("object"===erpApp.util.type(e.data.publicAccountNoInfo)&&t.flowWeiXinInfo.publicAccountNoInfo.splice(0,1,e.data.publicAccountNoInfo),Array.isArray(e.data.publicFileInfoId))t.flowWeiXinInfo.publicFileInfoId=e.data.publicFileInfoId;else if("string"===erpApp.util.type(e.data.publicFileInfoId)&&e.data.publicFileInfoId){e.data.publicFileInfoId.split(";").forEach(function(e){t.flowWeiXinInfo.publicFileInfoId.push({file_path:e})})}t.flowWeiXinInfo.orderId=e.data.orderId,t.flowWeiXinInfo.shopName=e.data.shopName;try{e.data.flowdata.weixinAccountOpenMemo&&(t.remark=e.data.flowdata.weixinAccountOpenMemo.split(","))}catch(t){}}})},clickHandler:function(){var t=this,e={publicAccountNo:"公众号账号不能为空！",publicAccountPassword:"公众号密码不能为空！",publicAccountName:"公众号名称不能为空！",publicAccountAppid:"公众号APPID不能为空！"};for(var n in e){if(!this.info.publicAccountNoInfo[0][n].trim())return void erpApp.tip(e[n]);if(this.info.publicAccountNoInfo[0][n].length>50)return void erpApp.tip(e[n].replace("为空","超过50个字符"))}if(0!==this.info.publicFileInfoId.length){var i=[];this.info.publicFileInfoId.forEach(function(t){i.push(t.id)});erpApp.confirm("确定要开通公众号吗？",function(){l()({method:"post",url:ctx+"/delivery/flow/public_number_open",data:{taskId:t.taskId,procInsId:t.procInsId,orderId:t.info.orderId,jsonStr:{publicFileInfoId:i.join(";"),weixinAccountOpenMemo:t.remark.join(","),publicAccountNoInfo:t.info.publicAccountNoInfo[0]},isFinished:!0},transformRequest:[function(t){var e="";for(var n in t)"object"===erpApp.util.type(t[n])?e+=encodeURIComponent(n)+"="+r()(t[n])+"&":e+=encodeURIComponent(n)+"="+t[n]+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t.data.result?(erpApp.tip("处理成功！"),erpApp.jumpToTasklistPage("beiyiTaskFlow")):erpApp.tip(t.data.message||"处理失败！")})})}else erpApp.tip("请上传公众号公开信息截图！")},preview:function(){var t=[ctxStatic+"/images/exp1.png",ctxStatic+"/images/exp2.png"],e={title:"示例图",width:989,height:540,opacity:.5,buttons:null,text:'<img src="'+t[0]+'" alt="示例图" /><br><img src="'+t[1]+'" alt="示例图" />'};erpShopApp.showDialog(e)},toggleMore:function(t){this.tip[t]=!this.tip[t]},removeFile:function(t){var e=this;erpApp.confirm("确定要删除该截图吗？",function(){e.flowWeiXinInfo.publicFileInfoId.splice(t,1),erpApp.tip("删除成功！")})},handleSuccess:function(t,e){this.flowWeiXinInfo.publicFileInfoId.length>=5?erpApp.tip("最多只能上传5张图片！"):"SUCCESS"===t.state?this.flowWeiXinInfo.publicFileInfoId.push({id:t.orderFileId,file_name:t.fileName,file_path:t.fileUrl}):erpApp.tip("文件 "+e.name+"上传失败！","error");var n=this.$refs.uploadImg.fileList;this.$refs.uploadImg.fileList.splice(n.indexOf(e),1),this.flowWeiXinInfo.publicFileInfoId.splice(5,1e4)},handleFormatError:function(t){erpApp.tip("文件 "+t.name+" 格式不正确，请上传 jpg 或 png 格式的图片。","error")},handleMaxSize:function(t){erpApp.tip("文件 "+t.name+" 太大，不能超过 10M。","error")},beforeupload:function(t){return!(this.flowWeiXinInfo.publicFileInfoId.length>=5)||(this.flowWeiXinInfo.publicFileInfoId.splice(5,1e4),erpApp.tip("最多只能上传5张图片！"),!1)}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"taskflow-content"},[n("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[n("h3",{staticClass:"task-title"},[t._v("公众号开通")]),t._v(" "),n("div",{staticClass:"task-sider"},[n("div",{staticClass:"task-sider-title"},[t._v(t._s(t.staticText.subtitle[0]))]),t._v(" "),n("div",{staticClass:"task-sider-subtitle"},[n("span",[t._v(t._s(t.staticText.subtitle[1]))])]),t._v(" "),n("div",{staticClass:"task-sider-content"},[n("div",{staticClass:"content-wrap"},t._l(t.staticText.contentwrap.remarkchecklabel,function(e,i){return n("div",{key:"rl_"+i,staticClass:"checkbox-list"},[n("label",{staticClass:"content-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{type:"checkbox"},domProps:{value:e.val,checked:Array.isArray(t.remark)?t._i(t.remark,e.val)>-1:t.remark},on:{change:function(n){var i=t.remark,a=n.target,o=!!a.checked;if(Array.isArray(i)){var s=e.val,r=t._i(i,s);a.checked?r<0&&(t.remark=i.concat([s])):r>-1&&(t.remark=i.slice(0,r).concat(i.slice(r+1)))}else t.remark=o}}}),t._v(t._s(e.text))])])}))]),t._v(" "),n("div",{staticClass:"task-sider-subtitle"},[n("span",[t._v(t._s(t.staticText.subtitle[8]))]),t._v(" "),n("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.c},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("c")}}},[n("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.c,expression:"tip.c"}],staticClass:"task-sider-content"},[t._m(0)])]),t._v(" "),n("div",{staticClass:"task-sider"},[n("h3",{staticClass:"task-sider-title"},[t._v(t._s(t.staticText.subtitle[7]))]),t._v(" "),n("div",{staticClass:"task-sider-subtitle"},[n("span",[t._v(t._s(t.staticText.subtitle[8]))]),t._v(" "),n("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.a},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("a")}}},[n("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.a,expression:"tip.a"}],staticClass:"task-sider-content"},[n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"hsck"},[n("div",{domProps:{innerHTML:t._s(t.staticText.contentwrap.remarks)}})])])]),t._v(" "),n("div",{staticClass:"task-sider-subtitlec"},[n("i",{staticClass:"icon-wrench"}),n("span",[t._v(t._s(t.staticText.subtitle[6]))])]),t._v(" "),n("div",{staticClass:"task-sider-content"},[n("dl",{staticClass:"content-wrap"},[n("dt",[t._v(t._s(t.staticText.contentwrap.clabel[0]))]),t._v(" "),n("dd",{staticClass:"margin-left-140"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.publicAccountNoInfo[0].publicAccountNo,expression:"info.publicAccountNoInfo[0].publicAccountNo"}],staticClass:"input-medium",attrs:{type:"text",maxlength:"50"},domProps:{value:t.info.publicAccountNoInfo[0].publicAccountNo},on:{input:function(e){e.target.composing||t.$set(t.info.publicAccountNoInfo[0],"publicAccountNo",e.target.value)}}})])]),t._v(" "),n("dl",{staticClass:"content-wrap"},[n("dt",[t._v(t._s(t.staticText.contentwrap.clabel[1]))]),t._v(" "),n("dd",{staticClass:"margin-left-140"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.publicAccountNoInfo[0].publicAccountPassword,expression:"info.publicAccountNoInfo[0].publicAccountPassword"}],staticClass:"input-medium",attrs:{type:"text",maxlength:"50"},domProps:{value:t.info.publicAccountNoInfo[0].publicAccountPassword},on:{input:function(e){e.target.composing||t.$set(t.info.publicAccountNoInfo[0],"publicAccountPassword",e.target.value)}}})])]),t._v(" "),n("dl",{staticClass:"content-wrap"},[n("dt",[t._v(t._s(t.staticText.contentwrap.clabel[2]))]),t._v(" "),n("dd",{staticClass:"margin-left-140"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.publicAccountNoInfo[0].publicAccountName,expression:"info.publicAccountNoInfo[0].publicAccountName"}],staticClass:"input-medium",attrs:{type:"text",maxlength:"50"},domProps:{value:t.info.publicAccountNoInfo[0].publicAccountName},on:{input:function(e){e.target.composing||t.$set(t.info.publicAccountNoInfo[0],"publicAccountName",e.target.value)}}})])]),t._v(" "),n("dl",{staticClass:"content-wrap"},[n("dt",[t._v(t._s(t.staticText.contentwrap.clabel[3]))]),t._v(" "),n("dd",{staticClass:"margin-left-140"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.publicAccountNoInfo[0].publicAccountAppid,expression:"info.publicAccountNoInfo[0].publicAccountAppid"}],staticClass:"input-medium",attrs:{type:"text",maxlength:"50"},domProps:{value:t.info.publicAccountNoInfo[0].publicAccountAppid},on:{input:function(e){e.target.composing||t.$set(t.info.publicAccountNoInfo[0],"publicAccountAppid",e.target.value)}}})])]),t._v(" "),n("dl",{staticClass:"content-wrap"},[n("dt",[t._v(t._s(t.staticText.contentwrap.clabel[4]))]),t._v(" "),n("dd",{staticClass:"margin-left-140"},[n("div",{staticClass:"upload-img"},[n("upload",{ref:"uploadImg",staticStyle:{display:"inline-block",width:"76px"},attrs:{type:"drag","on-success":t.handleSuccess,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.beforeupload,"on-progress":t.onprogress,format:["jpg","jpeg","png","gif"],accept:"image/*","max-size":10240,action:t.uploadAction,data:t.datas,multiple:""}},[n("div",{staticStyle:{width:"76px",height:"30px","line-height":"30px","text-align":"center"}},[n("span",[n("i",{staticClass:"icon-camera"}),t._v("选择图片")])])])],1),t._v(" "),t.info.publicFileInfoId.length>0?n("div",{staticClass:"imgs"},t._l(t.info.publicFileInfoId,function(e,i){return n("div",{key:"img_"+i,staticClass:"img-list"},[[n("div",[e.file_path?n("img",{attrs:{src:t.uploadUrl+e.file_path,alt:"图片"}}):t._e()]),t._v(" "),n("button",{staticClass:"ios-trash-outline",on:{click:function(e){t.removeFile(i)}}},[t._v("删除")])]],2)})):t._e(),t._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:t.preview}},[t._v("示例图")])])])])]),t._v(" "),n("div",{staticClass:"task-detail-footer"},[n("div",{staticClass:"footer-info"},[n("p",[t._v("负责人："+t._s(t.assignee))]),t._v(" "),n("p",[t._v(t._s(t.flowStartDate)+" —— "+t._s(t.flowEndDate))])]),t._v(" "),n("div",{staticClass:"footer-btn"},[n("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:t.clickHandler}},[t._v("确定完成")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"sub-info"},[e("a",{attrs:{href:"https://kf.qq.com/product/weixinmp.html#hid=87",target:"_blank"}},[this._v("申请微信公众号（服务号）教程")])])])}]},h=n("VU/8")(d,f,!1,null,null,null).exports;o.default.config.productionTip=!1,o.default.config.devtools=!1,new o.default(a()({},h)).$mount("#rootNode")}},["uS6d"]);