webpackJsonp([123],{"1DoV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),s=a("7+uW"),o=a("mtWM"),i=a.n(o),c=a("oAV5");window.task_flow_version="beiyi_flow";var l={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:c.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:c.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{subtitle:["订单信息","任务操作指引","参考话术","任务操作","本次服务备忘","任务操作说明"],label:["订单号：","购买时间：","商户名称：","商户简称：","联系人：","联系电话：","销售人：","销售人联系方式：","服务项：","服务类型：","商户类型：","完成服务项目请勾选","交付培训验收单"],remark:{columns:["项目","是否完成","完成时间"],row:[{term:"物料部署（上门）",termcontent:["物料铺设标准方案"]},{term:"服务员培训",termcontent:["各物料场景话术培训","C端消费全流程演示","激励方案包装公布"]}]}},remark:["服务员培训"],taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),orderOriginalInfo:{},shopType:"",orderGoodType:"",visitList:[],orderInfoLink:"",serviceItems:""}},computed:{},mounted:function(){this.getTrainServiceRecord()},methods:{getTrainServiceRecord:function(t){var e=this;i.a.get(ctx+"/visit/flow/getTrainServiceRecord",{params:{procInsId:this.procInsId,taskId:this.taskId}}).then(function(t){"object"===erpApp.util.type(t.data.orderOriginalInfo)&&(e.orderOriginalInfo=erpApp.extend(!0,e.orderOriginalInfo,t.data.orderOriginalInfo),e.orderInfoLink=ctx+"/order/erpOrderOriginalInfo/form?id="+t.data.orderOriginalInfo.id);try{e.visitList.length=0;for(var a=0,r=t.data.serviceItem.length;a<r;a++){for(var n=t.data.serviceItem[a],s=0,o=t.data.visitList.length;s<o;s++){var i=t.data.visitList[s];n.serviceItemCode===i.serviceItemCode&&"Y"===i.completeFlag&&(n.completeFlag="Y",n.serviceEndTime=i.serviceEndTime)}e.visitList.push(n)}}catch(a){e.visitList=t.data.visitList}e.shopType=t.data.shopType,e.orderGoodType=t.data.orderGoodType,e.serviceItems=t.data.serviceItems})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskflow-content"},[a("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[a("h3",{staticClass:"task-title"},[t._v("商户培训服务备注")]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[0]))]),t._v(" "),a("a",{staticClass:"btn btn-primary subtitlebtn",attrs:{href:t.orderInfoLink,target:"_blank"}},[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[0]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.orderNumber))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[1]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.buyDate))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[2]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.shopName))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[3]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.shopAbbreviation))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[4]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.contactName))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[5]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.contactNumber))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[6]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.promoteContact))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[7]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderOriginalInfo.promotePhone))])])])]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[t._v(t._s(t.staticText.subtitle[3]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[8]))]),t._v(" "),a("dd",{staticClass:"margin-left-0",staticStyle:{float:"left"},domProps:{innerHTML:t._s(t.serviceItems)}})]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[9]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.orderGoodType))])]),t._v(" "),a("dl",{staticClass:"content-wrap half"},[a("dt",[t._v(t._s(t.staticText.label[10]))]),t._v(" "),a("dd",{staticClass:"margin-left-0"},[t._v(t._s(t.shopType))])])])]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[4]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content-wrap-table"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",t._l(t.staticText.remark.columns,function(e,r){return a("th",{key:"cl_"+r},[t._v(t._s(e))])}))]),t._v(" "),a("tbody",t._l(t.visitList,function(e,r){return a("tr",{key:"row_"+r},[a("td",[t._v(t._s(e.serviceItem))]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.completeFlag,expression:"row.completeFlag"}],attrs:{type:"checkbox",value:"Y",disabled:"true"},domProps:{checked:Array.isArray(e.completeFlag)?t._i(e.completeFlag,"Y")>-1:e.completeFlag},on:{change:function(a){var r=e.completeFlag,n=a.target,s=!!n.checked;if(Array.isArray(r)){var o=t._i(r,"Y");n.checked?o<0&&(e.completeFlag=r.concat(["Y"])):o>-1&&(e.completeFlag=r.slice(0,o).concat(r.slice(o+1)))}else t.$set(e,"completeFlag",s)}}})]),t._v(" "),a("td",[t._v(t._s(e.serviceEndTime))])])}))])])])])]),t._v(" "),a("div",{staticClass:"task-detail-footer"},[a("div",{staticClass:"footer-info"},[a("p",[t._v("负责人："+t._s(t.assignee))]),t._v(" "),a("p",[t._v(t._s(t.flowStartDate)+" —— "+t._s(t.flowEndDate))])])])])])},staticRenderFns:[]},u=a("VU/8")(l,d,!1,null,null,null).exports;s.default.config.productionTip=!1,s.default.config.devtools=!1,new s.default(n()({},u)).$mount("#rootNode")},oAV5:function(t,e,a){"use strict";a.d(e,"f",function(){return l}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return u}),a.d(e,"d",function(){return p}),a.d(e,"b",function(){return v}),a.d(e,"a",function(){return m});var r=a("//Fk"),n=a.n(r),s=a("mvHQ"),o=a.n(s),i=a("pFYg"),c=a.n(i),l=function(t,e,a){for(var r=0,n=e.length,s=!1;r<n;){if(t===e[r][a]){s=!0;break}r++}return s},d=function(t){return""+t.replace(/(^\s*)|(\s*$)/g,"")},u=function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return t.getFullYear()+"-"+(e>9?e:"0"+e)+"-"+(a>9?a:"0"+a)};f.prototype.getDateStr3=function(t){var e=t;return""+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},f.prototype.getWeekStartAndEnd=function(t){var e=new Date,a=(e=new Date(e.getTime()+6048e5*t)).getDay(),r=(e.getDate(),0!=a?a-1:6),n=new Date(e.getTime()-864e5*r),s=new Date(n.getTime()+5184e5);return this.getDateStr3(n)+" - "+this.getDateStr3(s)};var p=function(t,e,a){t=t;var r=e?new Date(e):new Date,n=r.getFullYear(),s=r.getMonth()+1,o=r.getDate();return o<=t&&(s>1?s-=1:(n-=1,s=12)),"before"===a?r.setDate(r.getDate()-t):r.setDate(r.getDate()+t),n=r.getFullYear(),s=r.getMonth()+1,o=r.getDate(),n+"-"+(s<10?"0"+s:s)+"-"+(o<10?"0"+o:o)};function f(t){this.date=t.date,this.type=t.type,this.value=void 0!==t.value?t.value:0,this.format=void 0!==t.format?t.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}f.prototype.beforeDate=function(t,e){var a=t||this.type,r=e||this.value,n=this.year,s=this.month,o=this.day;"year"===a||"年"===a?n-=r:"month"===a||"月"===a?(n-=parseInt(r/12),(s-=r%12)<=0&&(n-=1,s+=12)):"day"!==a&&"日"!==a||(o-=r%30)<=0&&(n-=1,s+=12);var i=new Date(n,s-1,o);return this.formatDate(i,this.format)},f.prototype.formatDate=function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e},f.prototype.getThisMonth=function(){var t=new Date(this.year,this.month-1),e=new Date(this.year,this.month,0);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.getSomeMonth=function(t){return this.beforeDate("month",t)+" - "+this.beforeDate("now",0)},f.prototype.getThisYear=function(){var t=new Date(this.year,0,1),e=new Date(this.year,11,31);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.formatTimeStr=function(t){var e=new Date,a=parseInt(e.getTime()),r=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+(e.getDate()-1)+" 00:00:01"),n=new Date(t),s=(a-t)/1e3;return s>=31536e3||n.getFullYear()!=e.getFullYear()?n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():s>259200?n.getMonth()+1+"-"+n.getDate():n.getDate()==r.getDate()?"昨天":s>86400?Math.ceil(s/86400)+"天前":s>3600?Math.floor(s/3600)+"小时前":s>60?Math.floor(s/60)+"分钟前":"刚刚"};var v=new f({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),h=function(t){var e,a,r,n={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},s={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},o=(new Date).getTime(),i=/\[\]$/,l=/\=\?(&|$)/,d=/\?/,u=/%20/g,p=/\S/,f={},v={},h=function t(){var e,a,r,n,s,o,i=arguments[0]||{},l=arguments.length;for(e=1;e<l;++e)if(null!=(a=arguments[e]))for(o in a)r=i[o],n=a[o],i!==n&&("object"===(void 0===n?"undefined":c()(n))?(s=r&&"object"===(void 0===r?"undefined":c()(r))?r:{},i[o]=t(s,n)):void 0!==n&&(i[o]=n));return i}(n,t),m=h.type.toUpperCase(),g=/^(?:GET|HEAD)$/.test(m);if(h.url=h.url.replace(/#.*$/,""),h.context=t&&null!=t.context?t.context:h,h.data&&h.processData&&"string"!=typeof h.data&&(h.data=function(t){var e,a=[],r=function(t,e){e=k(e)?e():e,a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(S(t))for(e in t)r(e,t[e]);else for(var n in t)F(n,t[n],r);return a.join("&").replace(u,"+")}(h.data)),"jsonp"===h.dataType&&("GET"===m?l.test(h.url)||(h.url+=(d.test(h.url)?"&":"?")+(h.jsonp||"callback")+"=?"):h.data&&l.test(h.data)||(h.data=(h.data?h.data+"&":"")+(h.jsonp||"callback")+"=?"),h.dataType="json"),"json"===h.dataType&&(h.data&&l.test(h.data)||l.test(h.url))){e=h.jsonpCallback||"jsonp"+o++,h.data&&(h.data=(h.data+"").replace(l,"="+e+"$1")),h.url=h.url.replace(l,"="+e+"$1"),h.dataType="script";var y=window[e];window[e]=function(t){if(k(y))y(t);else{window[e]=void 0;try{delete window[e]}catch(t){}}O(h,x,a,r=t),L(h,x,a),w&&w.removeChild(T)}}h.data&&g&&(h.url+=(d.test(h.url)?"&":"?")+h.data);var _=/^(\w+:)?\/\/([^\/?#]+)/.exec(h.url),b=_&&(_[1]&&_[1].toLowerCase()!==location.protocol||_[2].toLowerCase()!==location.host);if("script"===h.dataType&&"GET"===m&&b){var w=document.getElementsByTagName("head")[0]||document.documentElement,T=document.createElement("script");if(h.scriptCharset&&(T.charset=h.scriptCharset),T.src=h.url,!e){var D=!1;T.onload=T.onreadystatechange=function(){D||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(D=!0,O(h,x,a,r),L(h,x,a),T.onload=T.onreadystatechange=null,w&&T.parentNode&&w.removeChild(T))}}w.insertBefore(T,w.firstChild)}else{var C=!1,x=h.xhr();if(x){h.username?x.open(m,h.url,h.async,h.username,h.password):x.open(m,h.url,h.async),h.withCredentials&&"withCredentials"in x&&(x.withCredentials=!0);try{(null!=h.data&&!g||t&&t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(f[h.url]&&x.setRequestHeader("If-Modified-Since",f[h.url]),v[h.url]&&x.setRequestHeader("If-None-Match",v[h.url])),b||x.setRequestHeader("X-Requested-With","XMLHttpRequest"),x.setRequestHeader("Accept",h.dataType&&h.accepts[h.dataType]?h.accepts[h.dataType]+", */*; q=0.01":h.accepts._default)}catch(t){}if(h.beforeSend&&!1===h.beforeSend.call(h.context,x,h))return x.abort(),!1;var I=x.onreadystatechange=function(t){if(x&&0!==x.readyState&&"abort"!==t){if(!C&&x&&(4===x.readyState||"timeout"===t)){var n;if(C=!0,x.onreadystatechange=R,"success"===(a="timeout"===t?"timeout":function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}(x)?h.ifModified&&function(t,e){var a=t.getResponseHeader("Last-Modified"),r=t.getResponseHeader("Etag");a&&(a[e]=a);r&&(r[e]=r);return 304===t.status}(x,h.url)?"notmodified":"success":"error"))try{r=function(t,e,a){var r=t.getResponseHeader("content-type")||"",n="xml"===e||!e&&r.indexOf("xml")>=0,s=n?t.responseXML:t.responseText;if(n&&"parsererror"===s.documentElement.nodeName)throw"parsererror";a&&a.dataFilter&&(s=a.dataFilter(s,e));"string"==typeof s&&("json"===e||!e&&r.indexOf("json")>=0?s=JSON.parse(s):("script"===e||!e&&r.indexOf("javascript")>=0)&&function(t){if(t&&p.test(t)){var e=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript",scriptEval?a.appendChild(document.createTextNode(t)):a.text=t,e.insertBefore(a,e.firstChild),e.removeChild(a)}}(s));return s}(x,h.dataType,h)}catch(t){a="parsererror",n=t}"success"===a||"notmodified"===a?e||O(h,x,a,r):E(h,x,a,n),e||L(h,x,a),"timeout"===t&&x.abort(),h.async&&(x=null)}}else C||L(h,x,a),C=!0,x&&(x.onreadystatechange=R)};try{var M=x.abort;x.abort=function(){x&&Function.prototype.call.call(M,x),I("abort")}}catch(t){}h.async&&h.timeout>0&&setTimeout(function(){x&&!C&&I("timeout")},h.timeout);try{x.send(g||null==h.data?null:h.data)}catch(t){E(h,x,null,t),L(h,x,a)}return h.async||I(),x}}function j(t){return null==t?String(t):s[toString.call(t)]||"object"}function k(t){return"function"===j(t)}function S(t){return"array"===j(t)}function F(t,e,a){if(S(e)&&e.length)for(var r in e){var n=e[r];i.test(t)?a(t,n):F(t+"["+("object"===(void 0===n?"undefined":c()(n))||S(n)?r:"")+"]",n,a)}else if(null!=e&&"object"===(void 0===e?"undefined":c()(e)))if(function(t){for(var e in t)return!1;return!0}(e))a(t,"");else for(var s in e){F(t+"["+s+"]",n=e[s],a)}else a(t,e)}function E(t,e,a,r){"function"==typeof t.error&&t.error.call(t.context,e,a,r)}function O(t,e,a,r){"function"==typeof t.success&&t.success.call(t.context,r,a,e)}function L(t,e,a){"function"==typeof t.complete&&t.complete.call(t.context,e,a)}function R(){}},m=function(t){var e,a,r=t.data;return"string"==typeof t.dataType&&"string"==typeof t.type&&"json"===(e=t.dataType.toLowerCase())&&"post"===t.type.toLowerCase()&&(r=o()(t.data)),"string"==typeof t.contentType&&(a=t.contentType.toLowerCase()),new n.a(function(n,s){h({url:t.url||"url",type:t.type||"GET",async:!1!==t.async,withCredentials:t.withCredentials,data:r,dataType:e||"default",contentType:a||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof t.beforeSend||t.beforeSend()},success:function(t,e,a,r){n(t,e,a,r)},error:function(t,e,a,r){s({responseText:t.responseText,code:t.status})},complete:function(t,e,a){n(t,e,a)}})})};e.c=f}},["1DoV"]);