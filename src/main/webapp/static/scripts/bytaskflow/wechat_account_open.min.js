webpackJsonp([120],{"8UO9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),r=a("7+uW"),i=a("mvHQ"),o=a.n(i),c=a("mtWM"),l=a.n(c),d=a("oAV5");window.task_flow_version="beiyi_flow";var p={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:d.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:d.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{title:"进件资料收集",subtitle:["订单信息","本次服务类型","订单负责人员","商户联系人","话术参考","商户联系人","任务操作","微信群","任务操作指引","微信支付商户后台验证账户/签署协议"],subtitlebtn:"订单详情",contentwrap:{label:["订单号：","购买时间：","商户名称：","商户简称：","联系人：","联系电话：","销售人：","销售人联系方式："],typelabel:["服务项：","服务类型：","商户类型："],clabel:["运营顾问：","开户顾问：","物料顾问：","确认商户是否已经微信公众号（必须为服务号）：","确认商户是否已有口碑门店（支付宝）：","小程序账号：","默认密码："],remarklabel:["完成微信支付验证账户/签署协议","电话沟通联系运营负责人（老板），询问老板微信号","添加商户运营负责人微信","微信支付进件通过后，登录微信支付商户后台验证账户/签署协议","1、对商户在小程序上提交的资料进行审核，确保资料的完整性和正确性（若商户提交的资料不齐全，请与商户沟通并协助商户补全；）<br>2、进行掌贝进件提审","不齐全的话术：<br>X总您好，这边后台看到您的资料提交（具体事项）还没完善喔，因为后续资料审核需要几个工作日，为了不影响您尽早使用掌贝产品，烦请尽快上传相关资料喔。若有哪些不懂，可跟我提出，好协助您解决，合力完成资料录入喔。<br>齐全的话术：<br>感谢您的配合，我这边会马上将您提供的掌贝账号开通申请资料进行系统录入并提交审核，涉及后台开通及支付功能开通，需要8个工作日左右，请知晓。","1、微信支付申请通过后，业管会将申请驳回，提醒顾问进行下一步操作<br>2、 引导商户核查是否收到支付通过验证邮件，同时核查银行卡（或公帐）是否收到腾讯的验证打款及金额（只有几毛钱）<br>3、引导商户扫码验证邮件内的二维码，进行协议签署，开通微信支付<br>4、重新提审“微信支付开通”至业管审核"]}},tip:{a:!1,b:!1,c:!1},taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),orderId:"",wechatpayRemark:"",wechatpayState:0,weixinPayCheck:"",shopInfoId:"",wpState:["未提交","新增待审核","通过","拒绝","已下架","更新待审核","待审核","正在审核"]}},computed:{wxAuditLink:function(){return ctx+"/store/basic/erpStoreInfo/payOpen/?id="+this.shopInfoId+"&type=wechat"},wxInfoLink:function(){return ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+this.shopInfoId}},mounted:function(){this.getFlowWeiXinInfo()},methods:{getFlowWeiXinInfo:function(){var t=this;l.a.get(ctx+"/delivery/flow/getFlowWeiXinInfo",{params:{taskId:this.taskId,procInsId:this.procInsId}}).then(function(e){e.data.result&&(t.orderId=e.data.orderId,t.shopInfoId=e.data.shopInfoId,t.wechatpayRemark=e.data.wechatpayRemark,t.wechatpayState=e.data.wechatpayState)})},clickHandler:function(){var t=this;if(this.weixinPayCheck){erpApp.confirm("确定要微信支付进件吗？",function(){l()({method:"post",url:ctx+"/delivery/flow/wechat_account_open",data:{taskId:t.taskId,procInsId:t.procInsId,orderId:t.orderId,weixinPayCheck:"Y"},transformRequest:[function(t){var e="";for(var a in t)"object"===erpApp.util.type(t[a])?e+=encodeURIComponent(a)+"="+o()(t[a])+"&":e+=encodeURIComponent(a)+"="+t[a]+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t.data.result?(erpApp.tip("处理成功！"),erpApp.jumpToTasklistPage("beiyiTaskFlow")):erpApp.tip(t.data.message||"处理失败！")})})}else erpApp.tip("请确认完成微信支付验证账户/签署协议！")},toggleMore:function(t){this.tip[t]=!this.tip[t]}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskflow-content"},[a("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[a("h3",{staticClass:"task-title"},[t._v("微信支付进件 — （"+t._s(t.wpState[t.wechatpayState])+"）")]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-title"},[t._v("完善微信进件资料并提审")]),t._v(" "),a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[8]))]),t._v(" "),a("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.c},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("c")}}},[a("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.c,expression:"tip.c"}],staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"hsck"},[a("div",{domProps:{innerHTML:t._s(t.staticText.contentwrap.remarklabel[4])}})])])]),t._v(" "),a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[4]))]),t._v(" "),a("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.b},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("b")}}},[a("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.b,expression:"tip.b"}],staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"hsck"},[a("div",{domProps:{innerHTML:t._s(t.staticText.contentwrap.remarklabel[5])}})])])]),t._v(" "),a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[t._v(t._s(t.staticText.subtitle[6]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"border-bottom"},[a("p",[t._v("微信支付进件状态："+t._s(t.wpState[t.wechatpayState]))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.wechatpayState,expression:"wechatpayState === 3"}],staticClass:"hsck margin-bottom-10"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.wechatpayRemark)+"\n\t\t\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"sub-info"},[t._v("\n\t\t\t\t\t\t对商户提交的微信支付资料进行审核，确保资料的完整性和正确性；若必须由商户提供的资料不齐全，请与商户沟通并协助商户补全；点击“录入微信支付进件资料”完善微信进件资料：\n\t\t\t\t\t")]),t._v(" "),a("div",[a("a",{staticClass:"btn btn-primary",attrs:{href:t.wxInfoLink,target:"_blank"}},[t._v("录入微信支付进件资料")])]),t._v(" "),a("div",{staticClass:"sub-info"},[t._v("微信支付资料提交审核：")]),t._v(" "),a("div",[a("a",{staticClass:"btn btn-primary",attrs:{href:t.wxAuditLink,target:"_blank"}},[t._v("微信支付进件提审")])])])])]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-title"},[a("span",[t._v(t._s(t.staticText.subtitle[9]))])]),t._v(" "),a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[8]))]),t._v(" "),a("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.a},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("a")}}},[a("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.a,expression:"tip.a"}],staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"hsck"},[a("div",{domProps:{innerHTML:t._s(t.staticText.contentwrap.remarklabel[6])}})])])]),t._v(" "),a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[t._v(t._s(t.staticText.subtitle[6]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("p",{staticClass:"sub-info-p"},[t._v(t._s(t.staticText.contentwrap.remarklabel[3]))]),t._v(" "),a("div",{staticClass:"checkbox-list"},[a("label",{staticClass:"content-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.weixinPayCheck,expression:"weixinPayCheck"}],attrs:{type:"checkbox",value:"Y"},domProps:{checked:Array.isArray(t.weixinPayCheck)?t._i(t.weixinPayCheck,"Y")>-1:t.weixinPayCheck},on:{change:function(e){var a=t.weixinPayCheck,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=t._i(a,"Y");n.checked?r<0&&(t.weixinPayCheck=a.concat(["Y"])):r>-1&&(t.weixinPayCheck=a.slice(0,r).concat(a.slice(r+1)))}else t.weixinPayCheck=s}}}),t._v(t._s(t.staticText.contentwrap.remarklabel[0]))])])])])]),t._v(" "),a("div",{staticClass:"task-detail-footer"},[a("div",{staticClass:"footer-info"},[a("p",[t._v("负责人："+t._s(t.assignee))]),t._v(" "),a("p",[t._v(t._s(t.flowStartDate)+" —— "+t._s(t.flowEndDate))])]),t._v(" "),a("div",{staticClass:"footer-btn"},[a("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:t.clickHandler}},[t._v("确定完成")])])])])])},staticRenderFns:[]},f=a("VU/8")(p,u,!1,null,null,null).exports;r.default.config.productionTip=!1,r.default.config.devtools=!1,new r.default(s()({},f)).$mount("#rootNode")},oAV5:function(t,e,a){"use strict";a.d(e,"f",function(){return l}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return p}),a.d(e,"d",function(){return u}),a.d(e,"b",function(){return h}),a.d(e,"a",function(){return y});var n=a("//Fk"),s=a.n(n),r=a("mvHQ"),i=a.n(r),o=a("pFYg"),c=a.n(o),l=function(t,e,a){for(var n=0,s=e.length,r=!1;n<s;){if(t===e[n][a]){r=!0;break}n++}return r},d=function(t){return""+t.replace(/(^\s*)|(\s*$)/g,"")},p=function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return t.getFullYear()+"-"+(e>9?e:"0"+e)+"-"+(a>9?a:"0"+a)};f.prototype.getDateStr3=function(t){var e=t;return""+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},f.prototype.getWeekStartAndEnd=function(t){var e=new Date,a=(e=new Date(e.getTime()+6048e5*t)).getDay(),n=(e.getDate(),0!=a?a-1:6),s=new Date(e.getTime()-864e5*n),r=new Date(s.getTime()+5184e5);return this.getDateStr3(s)+" - "+this.getDateStr3(r)};var u=function(t,e,a){t=t;var n=e?new Date(e):new Date,s=n.getFullYear(),r=n.getMonth()+1,i=n.getDate();return i<=t&&(r>1?r-=1:(s-=1,r=12)),"before"===a?n.setDate(n.getDate()-t):n.setDate(n.getDate()+t),s=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),s+"-"+(r<10?"0"+r:r)+"-"+(i<10?"0"+i:i)};function f(t){this.date=t.date,this.type=t.type,this.value=void 0!==t.value?t.value:0,this.format=void 0!==t.format?t.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}f.prototype.beforeDate=function(t,e){var a=t||this.type,n=e||this.value,s=this.year,r=this.month,i=this.day;"year"===a||"年"===a?s-=n:"month"===a||"月"===a?(s-=parseInt(n/12),(r-=n%12)<=0&&(s-=1,r+=12)):"day"!==a&&"日"!==a||(i-=n%30)<=0&&(s-=1,r+=12);var o=new Date(s,r-1,i);return this.formatDate(o,this.format)},f.prototype.formatDate=function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},f.prototype.getThisMonth=function(){var t=new Date(this.year,this.month-1),e=new Date(this.year,this.month,0);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.getSomeMonth=function(t){return this.beforeDate("month",t)+" - "+this.beforeDate("now",0)},f.prototype.getThisYear=function(){var t=new Date(this.year,0,1),e=new Date(this.year,11,31);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.formatTimeStr=function(t){var e=new Date,a=parseInt(e.getTime()),n=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+(e.getDate()-1)+" 00:00:01"),s=new Date(t),r=(a-t)/1e3;return r>=31536e3||s.getFullYear()!=e.getFullYear()?s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate():r>259200?s.getMonth()+1+"-"+s.getDate():s.getDate()==n.getDate()?"昨天":r>86400?Math.ceil(r/86400)+"天前":r>3600?Math.floor(r/3600)+"小时前":r>60?Math.floor(r/60)+"分钟前":"刚刚"};var h=new f({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),v=function(t){var e,a,n,s={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},r={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},i=(new Date).getTime(),o=/\[\]$/,l=/\=\?(&|$)/,d=/\?/,p=/%20/g,u=/\S/,f={},h={},v=function t(){var e,a,n,s,r,i,o=arguments[0]||{},l=arguments.length;for(e=1;e<l;++e)if(null!=(a=arguments[e]))for(i in a)n=o[i],s=a[i],o!==s&&("object"===(void 0===s?"undefined":c()(s))?(r=n&&"object"===(void 0===n?"undefined":c()(n))?n:{},o[i]=t(r,s)):void 0!==s&&(o[i]=s));return o}(s,t),y=v.type.toUpperCase(),m=/^(?:GET|HEAD)$/.test(y);if(v.url=v.url.replace(/#.*$/,""),v.context=t&&null!=t.context?t.context:v,v.data&&v.processData&&"string"!=typeof v.data&&(v.data=function(t){var e,a=[],n=function(t,e){e=j(e)?e():e,a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(S(t))for(e in t)n(e,t[e]);else for(var s in t)E(s,t[s],n);return a.join("&").replace(p,"+")}(v.data)),"jsonp"===v.dataType&&("GET"===y?l.test(v.url)||(v.url+=(d.test(v.url)?"&":"?")+(v.jsonp||"callback")+"=?"):v.data&&l.test(v.data)||(v.data=(v.data?v.data+"&":"")+(v.jsonp||"callback")+"=?"),v.dataType="json"),"json"===v.dataType&&(v.data&&l.test(v.data)||l.test(v.url))){e=v.jsonpCallback||"jsonp"+i++,v.data&&(v.data=(v.data+"").replace(l,"="+e+"$1")),v.url=v.url.replace(l,"="+e+"$1"),v.dataType="script";var w=window[e];window[e]=function(t){if(j(w))w(t);else{window[e]=void 0;try{delete window[e]}catch(t){}}F(v,D,a,n=t),A(v,D,a),C&&C.removeChild(x)}}v.data&&m&&(v.url+=(d.test(v.url)?"&":"?")+v.data);var g=/^(\w+:)?\/\/([^\/?#]+)/.exec(v.url),b=g&&(g[1]&&g[1].toLowerCase()!==location.protocol||g[2].toLowerCase()!==location.host);if("script"===v.dataType&&"GET"===y&&b){var C=document.getElementsByTagName("head")[0]||document.documentElement,x=document.createElement("script");if(v.scriptCharset&&(x.charset=v.scriptCharset),x.src=v.url,!e){var k=!1;x.onload=x.onreadystatechange=function(){k||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(k=!0,F(v,D,a,n),A(v,D,a),x.onload=x.onreadystatechange=null,C&&x.parentNode&&C.removeChild(x))}}C.insertBefore(x,C.firstChild)}else{var _=!1,D=v.xhr();if(D){v.username?D.open(y,v.url,v.async,v.username,v.password):D.open(y,v.url,v.async),v.withCredentials&&"withCredentials"in D&&(D.withCredentials=!0);try{(null!=v.data&&!m||t&&t.contentType)&&D.setRequestHeader("Content-Type",v.contentType),v.ifModified&&(f[v.url]&&D.setRequestHeader("If-Modified-Since",f[v.url]),h[v.url]&&D.setRequestHeader("If-None-Match",h[v.url])),b||D.setRequestHeader("X-Requested-With","XMLHttpRequest"),D.setRequestHeader("Accept",v.dataType&&v.accepts[v.dataType]?v.accepts[v.dataType]+", */*; q=0.01":v.accepts._default)}catch(t){}if(v.beforeSend&&!1===v.beforeSend.call(v.context,D,v))return D.abort(),!1;var T=D.onreadystatechange=function(t){if(D&&0!==D.readyState&&"abort"!==t){if(!_&&D&&(4===D.readyState||"timeout"===t)){var s;if(_=!0,D.onreadystatechange=H,"success"===(a="timeout"===t?"timeout":function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}(D)?v.ifModified&&function(t,e){var a=t.getResponseHeader("Last-Modified"),n=t.getResponseHeader("Etag");a&&(a[e]=a);n&&(n[e]=n);return 304===t.status}(D,v.url)?"notmodified":"success":"error"))try{n=function(t,e,a){var n=t.getResponseHeader("content-type")||"",s="xml"===e||!e&&n.indexOf("xml")>=0,r=s?t.responseXML:t.responseText;if(s&&"parsererror"===r.documentElement.nodeName)throw"parsererror";a&&a.dataFilter&&(r=a.dataFilter(r,e));"string"==typeof r&&("json"===e||!e&&n.indexOf("json")>=0?r=JSON.parse(r):("script"===e||!e&&n.indexOf("javascript")>=0)&&function(t){if(t&&u.test(t)){var e=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript",scriptEval?a.appendChild(document.createTextNode(t)):a.text=t,e.insertBefore(a,e.firstChild),e.removeChild(a)}}(r));return r}(D,v.dataType,v)}catch(t){a="parsererror",s=t}"success"===a||"notmodified"===a?e||F(v,D,a,n):R(v,D,a,s),e||A(v,D,a),"timeout"===t&&D.abort(),v.async&&(D=null)}}else _||A(v,D,a),_=!0,D&&(D.onreadystatechange=H)};try{var M=D.abort;D.abort=function(){D&&Function.prototype.call.call(M,D),T("abort")}}catch(t){}v.async&&v.timeout>0&&setTimeout(function(){D&&!_&&T("timeout")},v.timeout);try{D.send(m||null==v.data?null:v.data)}catch(t){R(v,D,null,t),A(v,D,a)}return v.async||T(),D}}function I(t){return null==t?String(t):r[toString.call(t)]||"object"}function j(t){return"function"===I(t)}function S(t){return"array"===I(t)}function E(t,e,a){if(S(e)&&e.length)for(var n in e){var s=e[n];o.test(t)?a(t,s):E(t+"["+("object"===(void 0===s?"undefined":c()(s))||S(s)?n:"")+"]",s,a)}else if(null!=e&&"object"===(void 0===e?"undefined":c()(e)))if(function(t){for(var e in t)return!1;return!0}(e))a(t,"");else for(var r in e){E(t+"["+r+"]",s=e[r],a)}else a(t,e)}function R(t,e,a,n){"function"==typeof t.error&&t.error.call(t.context,e,a,n)}function F(t,e,a,n){"function"==typeof t.success&&t.success.call(t.context,n,a,e)}function A(t,e,a){"function"==typeof t.complete&&t.complete.call(t.context,e,a)}function H(){}},y=function(t){var e,a,n=t.data;return"string"==typeof t.dataType&&"string"==typeof t.type&&"json"===(e=t.dataType.toLowerCase())&&"post"===t.type.toLowerCase()&&(n=i()(t.data)),"string"==typeof t.contentType&&(a=t.contentType.toLowerCase()),new s.a(function(s,r){v({url:t.url||"url",type:t.type||"GET",async:!1!==t.async,withCredentials:t.withCredentials,data:n,dataType:e||"default",contentType:a||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof t.beforeSend||t.beforeSend()},success:function(t,e,a,n){s(t,e,a,n)},error:function(t,e,a,n){r({responseText:t.responseText,code:t.status})},complete:function(t,e,a){s(t,e,a)}})})};e.c=f}},["8UO9"]);