webpackJsonp([119],{RfzM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),o=a.n(n),r=a("7+uW"),i=a("mvHQ"),s=a.n(i),c=a("mtWM"),l=a.n(c),d=a("oAV5");window.task_flow_version="beiyi_flow";var u={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:d.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:d.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{title:"进件资料收集",subtitle:["订单信息","本次服务类型","订单负责人员","商户联系人","话术参考","商户联系人","任务操作","微信群","任务操作指引","微信支付商户后台验证账户/签署协议"],subtitlebtn:"订单详情",contentwrap:{label:["订单号：","购买时间：","商户名称：","公众号APPID：","联系人：","联系电话：","销售人：","销售人联系方式："],typelabel:["服务项：","服务类型：","商户类型："],clabel:["运营顾问：","开户顾问：","物料顾问：","确认商户是否已经微信公众号（必须为服务号）：","确认商户是否已有口碑门店（支付宝）：","小程序账号：","默认密码："],remarklabel:["完成微信支付商户号配置","电话沟通联系运营负责人（老板），询问老板微信号","添加商户运营负责人微信","微信支付进件通过后，登录微信支付商户后台验证账户/签署协议"]}},tip:{a:!1,b:!1,c:!1},taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),wxInfo:{orderId:"",flowdata:{weixinAccountOpen:""},shopInfoId:"",shopName:"",publicAccountNoInfo:{id:"",provideAccountInfo:0,publicAccountNo:"",publicAccountPassword:"",publicAccountAppid:"",publicAccountName:""}},weixinPayMerNoDeploy:""}},computed:{info:function(){return this.wxInfo}},mounted:function(){this.getFlowWeiXinInfo()},methods:{getFlowWeiXinInfo:function(){var t=this;l.a.get(ctx+"/delivery/flow/getFlowWeiXinInfo",{params:{taskId:this.taskId,procInsId:this.procInsId}}).then(function(e){e.data.result&&(t.wxInfo=erpApp.extend(!0,t.wxInfo,e.data))})},toggleMore:function(t){this.tip[t]=!this.tip[t]},clickHandler:function(){var t=this;if(this.weixinPayMerNoDeploy){erpApp.confirm("确定要配置微信支付商户号吗？",function(){l()({method:"post",url:ctx+"/delivery/flow/wechat_shop_configuration",data:{taskId:t.taskId,procInsId:t.procInsId,orderId:t.info.orderId,weixinPayMerNoDeploy:"Y"},transformRequest:[function(t){var e="";for(var a in t)"object"===erpApp.util.type(t[a])?e+=encodeURIComponent(a)+"="+s()(t[a])+"&":e+=encodeURIComponent(a)+"="+t[a]+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t.data.result?(erpApp.tip("处理成功！"),erpApp.jumpToTasklistPage("beiyiTaskFlow")):erpApp.tip(t.data.message||"处理失败！")})})}else erpApp.tip("请确认完成微信支付商户号配置！")}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskflow-content"},[a("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[a("h3",{staticClass:"task-title"},[t._v("微信支付商户号配置")]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[8]))]),t._v(" "),a("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:t.tip.c},attrs:{href:"javascript:;"},on:{click:function(e){t.toggleMore("c")}}},[a("i",{staticClass:"icon-chevron-down icon"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tip.c,expression:"tip.c"}],staticClass:"task-sider-content"},[t._m(0)])]),t._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[t._v(t._s(t.staticText.subtitle[6]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.contentwrap.label[2]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v(t._s(t.info.shopName))])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.contentwrap.label[3]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v(t._s(t.info.publicAccountNoInfo.publicAccountAppid))])]),t._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"checkbox-list"},[a("label",{staticClass:"content-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.weixinPayMerNoDeploy,expression:"weixinPayMerNoDeploy"}],attrs:{type:"checkbox",value:"Y"},domProps:{checked:Array.isArray(t.weixinPayMerNoDeploy)?t._i(t.weixinPayMerNoDeploy,"Y")>-1:t.weixinPayMerNoDeploy},on:{change:function(e){var a=t.weixinPayMerNoDeploy,n=e.target,o=!!n.checked;if(Array.isArray(a)){var r=t._i(a,"Y");n.checked?r<0&&(t.weixinPayMerNoDeploy=a.concat(["Y"])):r>-1&&(t.weixinPayMerNoDeploy=a.slice(0,r).concat(a.slice(r+1)))}else t.weixinPayMerNoDeploy=o}}}),t._v(t._s(t.staticText.contentwrap.remarklabel[0]))])])])])]),t._v(" "),a("div",{staticClass:"task-detail-footer"},[a("div",{staticClass:"footer-info"},[a("p",[t._v("负责人："+t._s(t.assignee))]),t._v(" "),a("p",[t._v(t._s(t.flowStartDate)+" —— "+t._s(t.flowEndDate))])]),t._v(" "),a("div",{staticClass:"footer-btn"},[a("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:t.clickHandler}},[t._v("确定完成")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"hsck"},[e("div",[this._v("由业管在OEM后台配置")])])])}]},f=a("VU/8")(u,p,!1,null,null,null).exports;r.default.config.productionTip=!1,r.default.config.devtools=!1,new r.default(o()({},f)).$mount("#rootNode")},oAV5:function(t,e,a){"use strict";a.d(e,"f",function(){return l}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return u}),a.d(e,"d",function(){return p}),a.d(e,"b",function(){return h}),a.d(e,"a",function(){return m});var n=a("//Fk"),o=a.n(n),r=a("mvHQ"),i=a.n(r),s=a("pFYg"),c=a.n(s),l=function(t,e,a){for(var n=0,o=e.length,r=!1;n<o;){if(t===e[n][a]){r=!0;break}n++}return r},d=function(t){return""+t.replace(/(^\s*)|(\s*$)/g,"")},u=function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return t.getFullYear()+"-"+(e>9?e:"0"+e)+"-"+(a>9?a:"0"+a)};f.prototype.getDateStr3=function(t){var e=t;return""+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},f.prototype.getWeekStartAndEnd=function(t){var e=new Date,a=(e=new Date(e.getTime()+6048e5*t)).getDay(),n=(e.getDate(),0!=a?a-1:6),o=new Date(e.getTime()-864e5*n),r=new Date(o.getTime()+5184e5);return this.getDateStr3(o)+" - "+this.getDateStr3(r)};var p=function(t,e,a){t=t;var n=e?new Date(e):new Date,o=n.getFullYear(),r=n.getMonth()+1,i=n.getDate();return i<=t&&(r>1?r-=1:(o-=1,r=12)),"before"===a?n.setDate(n.getDate()-t):n.setDate(n.getDate()+t),o=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),o+"-"+(r<10?"0"+r:r)+"-"+(i<10?"0"+i:i)};function f(t){this.date=t.date,this.type=t.type,this.value=void 0!==t.value?t.value:0,this.format=void 0!==t.format?t.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}f.prototype.beforeDate=function(t,e){var a=t||this.type,n=e||this.value,o=this.year,r=this.month,i=this.day;"year"===a||"年"===a?o-=n:"month"===a||"月"===a?(o-=parseInt(n/12),(r-=n%12)<=0&&(o-=1,r+=12)):"day"!==a&&"日"!==a||(i-=n%30)<=0&&(o-=1,r+=12);var s=new Date(o,r-1,i);return this.formatDate(s,this.format)},f.prototype.formatDate=function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},f.prototype.getThisMonth=function(){var t=new Date(this.year,this.month-1),e=new Date(this.year,this.month,0);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.getSomeMonth=function(t){return this.beforeDate("month",t)+" - "+this.beforeDate("now",0)},f.prototype.getThisYear=function(){var t=new Date(this.year,0,1),e=new Date(this.year,11,31);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.formatTimeStr=function(t){var e=new Date,a=parseInt(e.getTime()),n=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+(e.getDate()-1)+" 00:00:01"),o=new Date(t),r=(a-t)/1e3;return r>=31536e3||o.getFullYear()!=e.getFullYear()?o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate():r>259200?o.getMonth()+1+"-"+o.getDate():o.getDate()==n.getDate()?"昨天":r>86400?Math.ceil(r/86400)+"天前":r>3600?Math.floor(r/3600)+"小时前":r>60?Math.floor(r/60)+"分钟前":"刚刚"};var h=new f({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),y=function(t){var e,a,n,o={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},r={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},i=(new Date).getTime(),s=/\[\]$/,l=/\=\?(&|$)/,d=/\?/,u=/%20/g,p=/\S/,f={},h={},y=function t(){var e,a,n,o,r,i,s=arguments[0]||{},l=arguments.length;for(e=1;e<l;++e)if(null!=(a=arguments[e]))for(i in a)n=s[i],o=a[i],s!==o&&("object"===(void 0===o?"undefined":c()(o))?(r=n&&"object"===(void 0===n?"undefined":c()(n))?n:{},s[i]=t(r,o)):void 0!==o&&(s[i]=o));return s}(o,t),m=y.type.toUpperCase(),v=/^(?:GET|HEAD)$/.test(m);if(y.url=y.url.replace(/#.*$/,""),y.context=t&&null!=t.context?t.context:y,y.data&&y.processData&&"string"!=typeof y.data&&(y.data=function(t){var e,a=[],n=function(t,e){e=k(e)?e():e,a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(A(t))for(e in t)n(e,t[e]);else for(var o in t)N(o,t[o],n);return a.join("&").replace(u,"+")}(y.data)),"jsonp"===y.dataType&&("GET"===m?l.test(y.url)||(y.url+=(d.test(y.url)?"&":"?")+(y.jsonp||"callback")+"=?"):y.data&&l.test(y.data)||(y.data=(y.data?y.data+"&":"")+(y.jsonp||"callback")+"=?"),y.dataType="json"),"json"===y.dataType&&(y.data&&l.test(y.data)||l.test(y.url))){e=y.jsonpCallback||"jsonp"+i++,y.data&&(y.data=(y.data+"").replace(l,"="+e+"$1")),y.url=y.url.replace(l,"="+e+"$1"),y.dataType="script";var g=window[e];window[e]=function(t){if(k(g))g(t);else{window[e]=void 0;try{delete window[e]}catch(t){}}E(y,C,a,n=t),R(y,C,a),D&&D.removeChild(x)}}y.data&&v&&(y.url+=(d.test(y.url)?"&":"?")+y.data);var w=/^(\w+:)?\/\/([^\/?#]+)/.exec(y.url),b=w&&(w[1]&&w[1].toLowerCase()!==location.protocol||w[2].toLowerCase()!==location.host);if("script"===y.dataType&&"GET"===m&&b){var D=document.getElementsByTagName("head")[0]||document.documentElement,x=document.createElement("script");if(y.scriptCharset&&(x.charset=y.scriptCharset),x.src=y.url,!e){var M=!1;x.onload=x.onreadystatechange=function(){M||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(M=!0,E(y,C,a,n),R(y,C,a),x.onload=x.onreadystatechange=null,D&&x.parentNode&&D.removeChild(x))}}D.insertBefore(x,D.firstChild)}else{var T=!1,C=y.xhr();if(C){y.username?C.open(m,y.url,y.async,y.username,y.password):C.open(m,y.url,y.async),y.withCredentials&&"withCredentials"in C&&(C.withCredentials=!0);try{(null!=y.data&&!v||t&&t.contentType)&&C.setRequestHeader("Content-Type",y.contentType),y.ifModified&&(f[y.url]&&C.setRequestHeader("If-Modified-Since",f[y.url]),h[y.url]&&C.setRequestHeader("If-None-Match",h[y.url])),b||C.setRequestHeader("X-Requested-With","XMLHttpRequest"),C.setRequestHeader("Accept",y.dataType&&y.accepts[y.dataType]?y.accepts[y.dataType]+", */*; q=0.01":y.accepts._default)}catch(t){}if(y.beforeSend&&!1===y.beforeSend.call(y.context,C,y))return C.abort(),!1;var _=C.onreadystatechange=function(t){if(C&&0!==C.readyState&&"abort"!==t){if(!T&&C&&(4===C.readyState||"timeout"===t)){var o;if(T=!0,C.onreadystatechange=F,"success"===(a="timeout"===t?"timeout":function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}(C)?y.ifModified&&function(t,e){var a=t.getResponseHeader("Last-Modified"),n=t.getResponseHeader("Etag");a&&(a[e]=a);n&&(n[e]=n);return 304===t.status}(C,y.url)?"notmodified":"success":"error"))try{n=function(t,e,a){var n=t.getResponseHeader("content-type")||"",o="xml"===e||!e&&n.indexOf("xml")>=0,r=o?t.responseXML:t.responseText;if(o&&"parsererror"===r.documentElement.nodeName)throw"parsererror";a&&a.dataFilter&&(r=a.dataFilter(r,e));"string"==typeof r&&("json"===e||!e&&n.indexOf("json")>=0?r=JSON.parse(r):("script"===e||!e&&n.indexOf("javascript")>=0)&&function(t){if(t&&p.test(t)){var e=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript",scriptEval?a.appendChild(document.createTextNode(t)):a.text=t,e.insertBefore(a,e.firstChild),e.removeChild(a)}}(r));return r}(C,y.dataType,y)}catch(t){a="parsererror",o=t}"success"===a||"notmodified"===a?e||E(y,C,a,n):S(y,C,a,o),e||R(y,C,a),"timeout"===t&&C.abort(),y.async&&(C=null)}}else T||R(y,C,a),T=!0,C&&(C.onreadystatechange=F)};try{var j=C.abort;C.abort=function(){C&&Function.prototype.call.call(j,C),_("abort")}}catch(t){}y.async&&y.timeout>0&&setTimeout(function(){C&&!T&&_("timeout")},y.timeout);try{C.send(v||null==y.data?null:y.data)}catch(t){S(y,C,null,t),R(y,C,a)}return y.async||_(),C}}function I(t){return null==t?String(t):r[toString.call(t)]||"object"}function k(t){return"function"===I(t)}function A(t){return"array"===I(t)}function N(t,e,a){if(A(e)&&e.length)for(var n in e){var o=e[n];s.test(t)?a(t,o):N(t+"["+("object"===(void 0===o?"undefined":c()(o))||A(o)?n:"")+"]",o,a)}else if(null!=e&&"object"===(void 0===e?"undefined":c()(e)))if(function(t){for(var e in t)return!1;return!0}(e))a(t,"");else for(var r in e){N(t+"["+r+"]",o=e[r],a)}else a(t,e)}function S(t,e,a,n){"function"==typeof t.error&&t.error.call(t.context,e,a,n)}function E(t,e,a,n){"function"==typeof t.success&&t.success.call(t.context,n,a,e)}function R(t,e,a){"function"==typeof t.complete&&t.complete.call(t.context,e,a)}function F(){}},m=function(t){var e,a,n=t.data;return"string"==typeof t.dataType&&"string"==typeof t.type&&"json"===(e=t.dataType.toLowerCase())&&"post"===t.type.toLowerCase()&&(n=i()(t.data)),"string"==typeof t.contentType&&(a=t.contentType.toLowerCase()),new o.a(function(o,r){y({url:t.url||"url",type:t.type||"GET",async:!1!==t.async,withCredentials:t.withCredentials,data:n,dataType:e||"default",contentType:a||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof t.beforeSend||t.beforeSend()},success:function(t,e,a,n){o(t,e,a,n)},error:function(t,e,a,n){r({responseText:t.responseText,code:t.status})},complete:function(t,e,a){o(t,e,a)}})})};e.c=f}},["RfzM"]);