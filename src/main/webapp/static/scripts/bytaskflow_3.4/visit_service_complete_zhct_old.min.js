webpackJsonp([86],{BD2p:function(t,e,a){"use strict";var s=a("bOdI"),n=a.n(s),i={name:"Icon",props:{type:String,size:[Number,String],color:String},computed:{classes:function(){return"ivu-icon ivu-icon-"+this.type},styles:function(){var t={};return this.size&&(t["font-size"]=this.size+"px"),this.color&&(t.color=this.color),t}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles})},staticRenderFns:[]},o=a("VU/8")(i,r,!1,null,null,null).exports,c=(a("BO1k"),a("7+uW").default.prototype.$isServer);function l(t,e){for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1}!c&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);var d={components:{Icon:o},props:{percent:{type:Number,default:0},status:{validator:function(t){return l(t,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1}},data:function(){return{currentStatus:this.status}},computed:{isStatus:function(){return"wrong"==this.currentStatus||"success"==this.currentStatus},statusIcon:function(){var t="";switch(this.currentStatus){case"wrong":t="ios-close";break;case"success":t="ios-checkmark"}return t},bgStyle:function(){return this.vertical?{height:this.percent+"%",width:this.strokeWidth+"px"}:{width:this.percent+"%",height:this.strokeWidth+"px"}},wrapClasses:function(){var t;return["ivu-progress","ivu-progress-"+this.currentStatus,(t={},n()(t,"ivu-progress-show-info",!this.hideInfo),n()(t,"ivu-progress-vertical",this.vertical),t)]},textClasses:function(){return"ivu-progress-text"},textInnerClasses:function(){return"ivu-progress-text-inner"},outerClasses:function(){return"ivu-progress-outer"},innerClasses:function(){return"ivu-progress-inner"},bgClasses:function(){return"ivu-progress-bg"}},created:function(){this.handleStatus()},methods:{handleStatus:function(t){t?(this.currentStatus="normal",this.$emit("on-status-change","normal")):100==parseInt(this.percent,10)&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent:function(t,e){t<e?this.handleStatus(!0):this.handleStatus()},status:function(t){this.currentStatus=t}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.wrapClasses},[a("div",{class:t.outerClasses},[a("div",{class:t.innerClasses},[a("div",{class:t.bgClasses,style:t.bgStyle})])]),t._v(" "),t.hideInfo?t._e():a("span",{class:t.textClasses},[t._t("default",[t.isStatus?a("span",{class:t.textInnerClasses},[a("Icon",{attrs:{type:t.statusIcon}})],1):a("span",{class:t.textInnerClasses},[t._v("\n                "+t._s(t.percent)+"%\n            ")])])],2)])},staticRenderFns:[]},p={name:"UploadList",components:{Icon:o,iProgress:a("VU/8")(d,u,!1,null,null,null).exports},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload"}},methods:{fileCls:function(t){return["ivu-upload-list-file",n()({},"ivu-upload-list-file-finish","finished"===t.status)]},handleClick:function(t){this.$emit("on-file-click",t)},handlePreview:function(t){this.$emit("on-file-preview",t)},handleRemove:function(t){this.$emit("on-file-remove",t)},format:function(t){var e=t.name.split(".").pop().toLocaleLowerCase()||"",a="document";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(e)>-1&&(a="image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(e)>-1&&(a="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(e)>-1&&(a="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(e)>-1&&(a="document-text"),["numbers","csv","xls","xlsx"].indexOf(e)>-1&&(a="stats-bars"),["keynote","ppt","pptx"].indexOf(e)>-1&&(a="ios-videocam"),a},parsePercentage:function(t){return parseInt(t,10)}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{class:[t.prefixCls+"-list"]},t._l(t.files,function(e){return a("li",{class:t.fileCls(e),on:{click:function(a){t.handleClick(e)}}},[a("span",{on:{click:function(a){t.handlePreview(e)}}},[a("Icon",{attrs:{type:t.format(e)}}),t._v(" "+t._s(e.name)+"\n        ")],1),t._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===e.status,expression:"file.status === 'finished'"}],class:[t.prefixCls+"-list-remove"],attrs:{type:"ios-close-empty"},nativeOn:{click:function(a){t.handleRemove(e)}}}),t._v(" "),a("transition",{attrs:{name:"fade"}},[e.showProgress?a("i-progress",{attrs:{"stroke-width":2,percent:t.parsePercentage(e.percentage),status:"finished"===e.status&&e.showProgress?"success":"normal"}}):t._e()],1)],1)}))},staticRenderFns:[]},v=a("VU/8")(p,f,!1,null,null,null).exports,h=a("fZjL"),m=a.n(h);function g(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function y(t){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest,a=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var s=new FormData;t.data&&m()(t.data).map(function(e){s.append(e,t.data[e])}),s.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(function(t,e,a){var s="fail to post "+t+" "+a.status+"'",n=new Error(s);return n.status=a.status,n.method="post",n.url=t,n}(a,0,e),g(e));t.onSuccess(g(e))},e.open("post",a,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var n=t.headers||{};for(var i in n)n.hasOwnProperty(i)&&null!==n[i]&&e.setRequestHeader(i,n[i]);e.send(s)}}var _={name:"Upload",mixins:[{methods:{dispatch:function(t,e,a){for(var s=this.$parent||this.$root,n=s.$options.name;s&&(!n||n!==t);)(s=s.$parent)&&(n=s.$options.name);s&&s.$emit.apply(s,[e].concat(a))},broadcast:function(t,e,a){(function t(e,a,s){this.$children.forEach(function(n){n.$options.name===e?n.$emit.apply(n,[a].concat(s)):t.apply(n,[e,a].concat([s]))})}).call(this,t,e,a)}}}],components:{UploadList:v},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(t){return l(t,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},maxSelectNum:{type:Number},existNum:{type:Number},index:{type:Number}},data:function(){return{prefixCls:"ivu-upload",dragOver:!1,fileList:[],tempIndex:1}},computed:{classes:function(){var t;return["ivu-upload",(t={},n()(t,"ivu-upload-select","select"===this.type),n()(t,"ivu-upload-drag","drag"===this.type),n()(t,"ivu-upload-dragOver","drag"===this.type&&this.dragOver),t)]}},methods:{handleClick:function(){this.$refs.input.click()},handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},onDrop:function(t){this.dragOver=!1,this.uploadFiles(t.dataTransfer.files)},uploadFiles:function(t){var e=this,a=Array.prototype.slice.call(t);if(this.maxSelectNum&&a.length>this.maxSelectNum-this.existNum)return erpShopApp.tip("最多只能上传"+this.maxSelectNum+"张图片！","info"),!1;this.multiple||(a=a.slice(0,1)),0!==a.length&&a.forEach(function(t){e.upload(t)})},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var a=this.beforeUpload(t,this.index);a&&a.then?a.then(function(a){"[object File]"===Object.prototype.toString.call(a)?e.post(a):e.post(t)},function(){}):!1!==a&&this.post(t)},post:function(t){var e=this;if(this.format.length){var a=t.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(function(t){return t.toLocaleLowerCase()===a}))return this.onFormatError(t,this.fileList),!1}if(this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t),(new FormData).append(this.name,t),y({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(a){e.handleProgress(a,t)},onSuccess:function(a){e.handleSuccess(a,t,e.index)},onError:function(a,s){e.handleError(a,s,t)}})},handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)},getFile:function(t){var e=void 0;return this.fileList.every(function(a){return!(e=t.uid===a.uid?a:null)}),e},handleProgress:function(t,e){var a=this.getFile(e);this.onProgress(t,a,this.fileList),a.percentage=t.percent||0},handleSuccess:function(t,e,a){var s=this.getFile(e);s&&(s.status="finished",s.response=t,this.dispatch("FormItem","on-form-change",s),this.onSuccess(t,s,this.fileList,a),setTimeout(function(){s.showProgress=!1},1e3))},handleError:function(t,e,a){var s=this.getFile(a),n=this.fileList;s.status="fail",n.splice(n.indexOf(s),1),this.onError(t,e,a)},handleRemove:function(t){var e=this.fileList;e.splice(e.indexOf(t),1),this.onRemove(t,e)},handlePreview:function(t){"finished"===t.status&&this.onPreview(t)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(t){var e=this;this.fileList=t.map(function(t){return t.status="finished",t.percentage=100,t.uid=Date.now()+e.tempIndex++,t})}}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:[t.prefixCls]},[a("div",{class:t.classes,on:{click:t.handleClick,drop:function(e){e.preventDefault(),t.onDrop(e)},dragover:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1}}},[a("input",{ref:"input",class:[t.prefixCls+"-input"],attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("tip"),t._v(" "),t.showUploadList?a("upload-list",{attrs:{files:t.fileList},on:{"on-file-remove":t.handleRemove,"on-file-preview":t.handlePreview}}):t._e()],2)},staticRenderFns:[]},b=a("VU/8")(_,w,!1,null,null,null);e.a=b.exports},azjI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i=a("7+uW"),r=a("mtWM"),o=a.n(r),c=a("oAV5"),l=a("BD2p");window.task_flow_version="beiyi_flow";var d={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:c.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:c.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{subtitle:["填写上门服务预约申请表","任务操作指引","参考话术","任务操作","微信群再次确认","任务操作说明","上门服务内容"],label:["商户名称：","上门服务类型：","上门目的：","预约上门时间：","上门服务时间：","上门服务项目：","服务情况备注：","附件：","输入实际上门服务时间","完成服务项目请勾选","交付培训验收单"],plan:{columns:["项目","完成标记（勾选）"]}},uploadAction:ctx+"/workfile/file/uploads",uploadUrl:pageDataObject.uploadfileurl,taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),channelType:[],storeList:[],remark:"",serviceStartTime:"",serviceEndTime:"",formData:{shop:{name:"",id:""},tableContent:[],serviceData:{id:"",shopInfoId:"",shopInfoName:"",serviceAddress:"",serviceTypeCode:"1",serviceTypeTxt:"",serviceGoalCode:"3",serviceGoalTxt:"",serviceGoal:"",serviceUser:"",serviceUserName:"",servicePreparationInfo:"",shopAttendees:"",shopPreparationInfo:"",trainRecorder:"",serviceReason:"",shopNeedsPicture:"",appointedStartTime:"",appointedEndTime:"",auditStatus:"",auditUser:"",auditUserName:"",cancelReason:"",modifySuggest:"",receivingReport:"",procInsId:"",itemRecords:[]}},itemRecords:[],deliveryAcceptInfo:"",productInfo:[],trainInfo:[],taskName:decodeURI(erpApp.getQueryString("taskName")),serviceType:pageDataObject.serviceType,visitType:pageDataObject.visitType,publicStaticText:{},isFinished:!1}},components:{upload:l.a},computed:{datas:function(){return{taskId:this.taskId,procInsId:this.procInsId,fileId:"",fileUrl:""}},contentData:function(){return this.formData}},mounted:function(){this.getDoorDetail()},created:function(){this.setPublicTask()},methods:{setPublicTask:function(){this.publicStaticText=deliveryFlowByDoorService.ZHCT_FONT},clickHandler:function(){var t=this,e=[];if(this.itemRecords.forEach(function(a){e.push({completeFlag:a.completeFlag?"Y":"N",serviceEndTime:a.completeFlag?t.serviceEndTime:"",serviceItem:a.serviceItemTxt,serviceItemCode:a.serviceItemCode,serviceStartTime:a.completeFlag?t.serviceStartTime:"",serviceItemAttendees:a.serviceItemAttendees||"",serviceItemTxt:a.serviceItemTxt||"",serviceInfoId:a.serviceInfoId||""})}),this.serviceStartTime&&this.serviceEndTime)if(this.remark){var a={id:this.contentData.serviceData.id||"",remark:this.remark,serviceEndTime:this.serviceEndTime,serviceStartTime:this.serviceStartTime},s=function(){o.a.post(ctx+"/zhctOldShop/visit_service_complete_zhct_old?taskId="+t.taskId+"&procInsId="+t.procInsId+"&serviceType="+t.serviceType+"&visitType="+t.visitType+"&isFinished="+t.isFinished+"&orderId="+t.formData.shop.orderId,a).then(function(t){t.data.result?(erpApp.tip(t.data.message||"处理成功！"),erpApp.jumpToTasklistPage("beiyiTaskFlow")):erpApp.tip(t.data.message||"处理失败！")}).catch(function(t){erpApp.tip("处理失败，请稍后再重试！")})},n=this;this.deliveryAcceptInfo?(this.isFinished=!0,erpApp.confirm("确定完成上门服务吗？",s)):(this.isFinished=!0,popup.confirm({title:"提示",message:"”商户还未在小程序（掌贝智慧服务中心）上对本次上门服务进行验收和评分“，是否先完成当前任务，后续线下自行督促商户完成“服务验收及评分”？",confirmCallBack:s,cancelCallBack:function(){n.isFinished=!1,n.$nextTick(function(){s()})}}))}else erpApp.tip("请填写服务情况备注！");else erpApp.tip("请填写实际上门服务时间！")},getDoorDetail:function(){var t=this;o.a.get(ctx+"/delivery/flow/2P0/getVisitServiceCompleteDetail",{params:{taskId:this.taskId,procInsId:this.procInsId,serviceGoalCode:this.publicStaticText.serviceGoalCode,visitType:this.visitType}}).then(function(e){e.data.result&&("object"===erpApp.util.type(e.data.shop)&&(t.formData.shop=erpApp.extend(!0,t.formData.shop,e.data.shop)),"object"===erpApp.util.type(e.data.result1)&&(t.formData.serviceData=erpApp.extend(!0,t.formData.serviceData,e.data.result1),Array.isArray(e.data.result1.itemRecords)&&(e.data.result1.itemRecords.map(function(t){return t.completeFlag="Y"===t.completeFlag,t}),t.itemRecords=e.data.result1.itemRecords)),Array.isArray(e.data.result2)&&(t.formData.tableContent=e.data.result2),t.deliveryAcceptInfo=e.data.deliveryAcceptInfo?e.data.deliveryAcceptInfo:"",e.data.hasOwnProperty("productInfo")&&(t.productInfo=e.data.productInfo.map(function(t,e){return t.content=JSON.parse(t.content),t})),t.trainInfo=e.data.trainInfo)})},changeTime:function(t,e){var a=t.target.value?t.target.value:"";this[e]=a}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskflow-content"},[a("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[a("h3",{staticClass:"task-title"},[t._v(t._s(t.taskName))]),t._v(" "),a("div",{staticClass:"task-sider"},[a("p",{staticStyle:{"font-size":"17px","font-weight":"bold","margin-bottom":"8px"}},[t._v("上门服务")]),t._v(" "),a("div",{staticClass:"task-sider-subtitle"},[a("span",[t._v(t._s(t.staticText.subtitle[6]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[0]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v(t._s(t.contentData.shop.name))])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[1]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v(t._s(t.contentData.serviceData.serviceTypeTxt))])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[2]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v(t._s(t.contentData.serviceData.serviceGoalTxt))])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[3]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v("\n\t\t\t\t\t\t"+t._s(t.contentData.serviceData.appointedStartTime)+" — "+t._s(t.contentData.serviceData.appointedEndTime)+"\n\t\t\t\t\t")])])])]),t._v(" "),a("div",{staticClass:"task-sider"},[a("p",{staticStyle:{"font-size":"17px","font-weight":"bold","margin-bottom":"8px"}},[t._v("交付验收单")]),t._v(" "),t.deliveryAcceptInfo?a("div",{staticClass:"task-sider-subtitle"},[t._v("商户已在小程序完成服务验收及评价")]):t._e(),t._v(" "),t.deliveryAcceptInfo?t._e():a("div",{staticClass:"task-sider-subtitle redword"},[t._v('商户还没有在小程序确认交付验收，请尽快督促商户完成"服务验收及评价"')]),t._v(" "),t.deliveryAcceptInfo?a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[t._v("服务内容：")]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[t._v("\n\t\t\t\t\t\t"+t._s(t.deliveryAcceptInfo.serviceGoal)+"\n\t\t\t\t\t")])]),t._v(" "),t.productInfo.length>0?a("dl",{staticClass:"content-wrap"},[a("dt",[t._v("产品信息：")]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"table-sheng"}},[t._m(0),t._v(" "),a("tbody",t._l(t.productInfo,function(e,s){return s>0?a("tr",[a("td",[t._v(t._s(s))]),t._v(" "),a("td",[t._v(t._s(e.content[0]))]),t._v(" "),a("td",[t._v(t._s(e.content[1]))]),t._v(" "),a("td",[t._v(t._s(e.content[2]))]),t._v(" "),"Y"===e.checkFlag?a("td",[t._v("通过")]):a("td",[t._v("不通过")])]):t._e()}))])])]):t._e(),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v("交付培训：")]),t._v(" "),t._l(t.trainInfo,function(e){return"Y"===e.checkFlag?a("dd",{staticClass:"margin-left-120"},[t._v(t._s(e.content))]):t._e()})],2),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v("商品评价：")]),t._v(" "),5==t.deliveryAcceptInfo.score?a("dd",{staticClass:"margin-left-120"},[t._v("非常满意，无可挑剔")]):4==t.deliveryAcceptInfo.score?a("dd",{staticClass:"margin-left-120"},[t._v("比较满意，仍可改善")]):3==t.deliveryAcceptInfo.score?a("dd",{staticClass:"margin-left-120"},[t._v("一般，还需改善")]):2==t.deliveryAcceptInfo.score?a("dd",{staticClass:"margin-left-120"},[t._v("不满意，比较差")]):1==t.deliveryAcceptInfo.score?a("dd",{staticClass:"margin-left-120"},[t._v("非常不满意，各方面都很差")]):t._e()])]):t._e()]),t._v(" "),a("div",{staticClass:"task-sider"},[a("p",{staticStyle:{"font-size":"17px","font-weight":"bold","margin-bottom":"8px"}},[t._v("上门服务确认完成")]),t._v(" "),a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[t._v(t._s(t.staticText.subtitle[3]))])]),t._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[4]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[a("div",{staticClass:"sub-infos"},[t._v(t._s(t.staticText.label[8]))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.serviceStartTime,expression:"serviceStartTime"}],attrs:{type:"text",id:"appointedStartTime",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss', isShowClear:false, readOnly:true});"},domProps:{value:t.serviceStartTime},on:{focus:function(e){t.changeTime(e,"serviceStartTime")},input:function(e){e.target.composing||(t.serviceStartTime=e.target.value)}}}),t._v(" — \n\t\t\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.serviceEndTime,expression:"serviceEndTime"}],attrs:{type:"text",id:"appointedEndTime",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss', isShowClear:false, minDate:'#F{$dp.$D(\\'appointedStartTime\\');}', readOnly:true});"},domProps:{value:t.serviceEndTime},on:{focus:function(e){t.changeTime(e,"serviceEndTime")},input:function(e){e.target.composing||(t.serviceEndTime=e.target.value)}}})])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[5]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[a("div",{staticClass:"sub-infos"},[t._v(t._s(t.staticText.label[9]))]),t._v(" "),a("div",{staticClass:"content-wrap-table"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",t._l(t.staticText.plan.columns,function(e,s){return a("th",{key:"cl_"+s},[t._v(t._s(e))])}))]),t._v(" "),a("tbody",t._l(t.itemRecords,function(e,s){return a("tr",{key:"row_"+s},[a("td",[t._v(t._s(e.serviceItemTxt))]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.completeFlag,expression:"row.completeFlag"}],attrs:{type:"checkbox",value:"Y"},domProps:{checked:Array.isArray(e.completeFlag)?t._i(e.completeFlag,"Y")>-1:e.completeFlag},on:{change:function(a){var s=e.completeFlag,n=a.target,i=!!n.checked;if(Array.isArray(s)){var r=t._i(s,"Y");n.checked?r<0&&(e.completeFlag=s.concat(["Y"])):r>-1&&(e.completeFlag=s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"completeFlag",i)}}})])])}))])])])]),t._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[t._v(t._s(t.staticText.label[6]))]),t._v(" "),a("dd",{staticClass:"margin-left-120"},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.remark,expression:"remark",modifiers:{trim:!0}}],staticClass:"content-textarea",attrs:{maxlength:"100"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])]),t._v(" "),a("div",{staticClass:"task-detail-footer"},[a("div",{staticClass:"footer-info"},[a("p",[t._v("负责人："+t._s(t.assignee))]),t._v(" "),a("p",[t._v(t._s(t.flowStartDate)+" —— "+t._s(t.flowEndDate))])]),t._v(" "),a("div",{staticClass:"footer-btn"},[a("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:t.clickHandler}},[t._v("确定完成")])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[a("div",{staticClass:"th"},[t._v("序号")])]),t._v(" "),a("th",[a("div",{staticClass:"th"},[t._v("产品名称")])]),t._v(" "),a("th",[a("div",{staticClass:"th"},[t._v("型号")])]),t._v(" "),a("th",[a("div",{staticClass:"th"},[t._v("数量")])]),t._v(" "),a("th",[a("div",{staticClass:"th"},[t._v("验收情况")])])])])}]},p=a("VU/8")(d,u,!1,null,null,null).exports;i.default.config.productionTip=!1,i.default.config.devtools=!1,new i.default(n()({},p)).$mount("#rootNode")},oAV5:function(t,e,a){"use strict";a.d(e,"f",function(){return l}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return u}),a.d(e,"d",function(){return p}),a.d(e,"b",function(){return v}),a.d(e,"a",function(){return m});var s=a("//Fk"),n=a.n(s),i=a("mvHQ"),r=a.n(i),o=a("pFYg"),c=a.n(o),l=function(t,e,a){for(var s=0,n=e.length,i=!1;s<n;){if(t===e[s][a]){i=!0;break}s++}return i},d=function(t){return""+t.replace(/(^\s*)|(\s*$)/g,"")},u=function(){var t=new Date,e=t.getMonth()+1,a=t.getDate();return t.getFullYear()+"-"+(e>9?e:"0"+e)+"-"+(a>9?a:"0"+a)};f.prototype.getDateStr3=function(t){var e=t;return""+e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1))+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())},f.prototype.getWeekStartAndEnd=function(t){var e=new Date,a=(e=new Date(e.getTime()+6048e5*t)).getDay(),s=(e.getDate(),0!=a?a-1:6),n=new Date(e.getTime()-864e5*s),i=new Date(n.getTime()+5184e5);return this.getDateStr3(n)+" - "+this.getDateStr3(i)};var p=function(t,e,a){t=t;var s=e?new Date(e):new Date,n=s.getFullYear(),i=s.getMonth()+1,r=s.getDate();return r<=t&&(i>1?i-=1:(n-=1,i=12)),"before"===a?s.setDate(s.getDate()-t):s.setDate(s.getDate()+t),n=s.getFullYear(),i=s.getMonth()+1,r=s.getDate(),n+"-"+(i<10?"0"+i:i)+"-"+(r<10?"0"+r:r)};function f(t){this.date=t.date,this.type=t.type,this.value=void 0!==t.value?t.value:0,this.format=void 0!==t.format?t.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}f.prototype.beforeDate=function(t,e){var a=t||this.type,s=e||this.value,n=this.year,i=this.month,r=this.day;"year"===a||"年"===a?n-=s:"month"===a||"月"===a?(n-=parseInt(s/12),(i-=s%12)<=0&&(n-=1,i+=12)):"day"!==a&&"日"!==a||(r-=s%30)<=0&&(n-=1,i+=12);var o=new Date(n,i-1,r);return this.formatDate(o,this.format)},f.prototype.formatDate=function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return e},f.prototype.getThisMonth=function(){var t=new Date(this.year,this.month-1),e=new Date(this.year,this.month,0);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.getSomeMonth=function(t){return this.beforeDate("month",t)+" - "+this.beforeDate("now",0)},f.prototype.getThisYear=function(){var t=new Date(this.year,0,1),e=new Date(this.year,11,31);return this.formatDate(t,this.format)+" - "+this.formatDate(e,this.format)},f.prototype.formatTimeStr=function(t){var e=new Date,a=parseInt(e.getTime()),s=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+(e.getDate()-1)+" 00:00:01"),n=new Date(t),i=(a-t)/1e3;return i>=31536e3||n.getFullYear()!=e.getFullYear()?n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():i>259200?n.getMonth()+1+"-"+n.getDate():n.getDate()==s.getDate()?"昨天":i>86400?Math.ceil(i/86400)+"天前":i>3600?Math.floor(i/3600)+"小时前":i>60?Math.floor(i/60)+"分钟前":"刚刚"};var v=new f({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),h=function(t){var e,a,s,n={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},i={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},r=(new Date).getTime(),o=/\[\]$/,l=/\=\?(&|$)/,d=/\?/,u=/%20/g,p=/\S/,f={},v={},h=function t(){var e,a,s,n,i,r,o=arguments[0]||{},l=arguments.length;for(e=1;e<l;++e)if(null!=(a=arguments[e]))for(r in a)s=o[r],n=a[r],o!==n&&("object"===(void 0===n?"undefined":c()(n))?(i=s&&"object"===(void 0===s?"undefined":c()(s))?s:{},o[r]=t(i,n)):void 0!==n&&(o[r]=n));return o}(n,t),m=h.type.toUpperCase(),g=/^(?:GET|HEAD)$/.test(m);if(h.url=h.url.replace(/#.*$/,""),h.context=t&&null!=t.context?t.context:h,h.data&&h.processData&&"string"!=typeof h.data&&(h.data=function(t){var e,a=[],s=function(t,e){e=F(e)?e():e,a[a.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(E(t))for(e in t)s(e,t[e]);else for(var n in t)j(n,t[n],s);return a.join("&").replace(u,"+")}(h.data)),"jsonp"===h.dataType&&("GET"===m?l.test(h.url)||(h.url+=(d.test(h.url)?"&":"?")+(h.jsonp||"callback")+"=?"):h.data&&l.test(h.data)||(h.data=(h.data?h.data+"&":"")+(h.jsonp||"callback")+"=?"),h.dataType="json"),"json"===h.dataType&&(h.data&&l.test(h.data)||l.test(h.url))){e=h.jsonpCallback||"jsonp"+r++,h.data&&(h.data=(h.data+"").replace(l,"="+e+"$1")),h.url=h.url.replace(l,"="+e+"$1"),h.dataType="script";var y=window[e];window[e]=function(t){if(F(y))y(t);else{window[e]=void 0;try{delete window[e]}catch(t){}}M(h,D,a,s=t),R(h,D,a),b&&b.removeChild(x)}}h.data&&g&&(h.url+=(d.test(h.url)?"&":"?")+h.data);var _=/^(\w+:)?\/\/([^\/?#]+)/.exec(h.url),w=_&&(_[1]&&_[1].toLowerCase()!==location.protocol||_[2].toLowerCase()!==location.host);if("script"===h.dataType&&"GET"===m&&w){var b=document.getElementsByTagName("head")[0]||document.documentElement,x=document.createElement("script");if(h.scriptCharset&&(x.charset=h.scriptCharset),x.src=h.url,!e){var C=!1;x.onload=x.onreadystatechange=function(){C||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(C=!0,M(h,D,a,s),R(h,D,a),x.onload=x.onreadystatechange=null,b&&x.parentNode&&b.removeChild(x))}}b.insertBefore(x,b.firstChild)}else{var T=!1,D=h.xhr();if(D){h.username?D.open(m,h.url,h.async,h.username,h.password):D.open(m,h.url,h.async),h.withCredentials&&"withCredentials"in D&&(D.withCredentials=!0);try{(null!=h.data&&!g||t&&t.contentType)&&D.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(f[h.url]&&D.setRequestHeader("If-Modified-Since",f[h.url]),v[h.url]&&D.setRequestHeader("If-None-Match",v[h.url])),w||D.setRequestHeader("X-Requested-With","XMLHttpRequest"),D.setRequestHeader("Accept",h.dataType&&h.accepts[h.dataType]?h.accepts[h.dataType]+", */*; q=0.01":h.accepts._default)}catch(t){}if(h.beforeSend&&!1===h.beforeSend.call(h.context,D,h))return D.abort(),!1;var S=D.onreadystatechange=function(t){if(D&&0!==D.readyState&&"abort"!==t){if(!T&&D&&(4===D.readyState||"timeout"===t)){var n;if(T=!0,D.onreadystatechange=O,"success"===(a="timeout"===t?"timeout":function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}(D)?h.ifModified&&function(t,e){var a=t.getResponseHeader("Last-Modified"),s=t.getResponseHeader("Etag");a&&(a[e]=a);s&&(s[e]=s);return 304===t.status}(D,h.url)?"notmodified":"success":"error"))try{s=function(t,e,a){var s=t.getResponseHeader("content-type")||"",n="xml"===e||!e&&s.indexOf("xml")>=0,i=n?t.responseXML:t.responseText;if(n&&"parsererror"===i.documentElement.nodeName)throw"parsererror";a&&a.dataFilter&&(i=a.dataFilter(i,e));"string"==typeof i&&("json"===e||!e&&s.indexOf("json")>=0?i=JSON.parse(i):("script"===e||!e&&s.indexOf("javascript")>=0)&&function(t){if(t&&p.test(t)){var e=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript",scriptEval?a.appendChild(document.createTextNode(t)):a.text=t,e.insertBefore(a,e.firstChild),e.removeChild(a)}}(i));return i}(D,h.dataType,h)}catch(t){a="parsererror",n=t}"success"===a||"notmodified"===a?e||M(h,D,a,s):A(h,D,a,n),e||R(h,D,a),"timeout"===t&&D.abort(),h.async&&(D=null)}}else T||R(h,D,a),T=!0,D&&(D.onreadystatechange=O)};try{var I=D.abort;D.abort=function(){D&&Function.prototype.call.call(I,D),S("abort")}}catch(t){}h.async&&h.timeout>0&&setTimeout(function(){D&&!T&&S("timeout")},h.timeout);try{D.send(g||null==h.data?null:h.data)}catch(t){A(h,D,null,t),R(h,D,a)}return h.async||S(),D}}function k(t){return null==t?String(t):i[toString.call(t)]||"object"}function F(t){return"function"===k(t)}function E(t){return"array"===k(t)}function j(t,e,a){if(E(e)&&e.length)for(var s in e){var n=e[s];o.test(t)?a(t,n):j(t+"["+("object"===(void 0===n?"undefined":c()(n))||E(n)?s:"")+"]",n,a)}else if(null!=e&&"object"===(void 0===e?"undefined":c()(e)))if(function(t){for(var e in t)return!1;return!0}(e))a(t,"");else for(var i in e){j(t+"["+i+"]",n=e[i],a)}else a(t,e)}function A(t,e,a,s){"function"==typeof t.error&&t.error.call(t.context,e,a,s)}function M(t,e,a,s){"function"==typeof t.success&&t.success.call(t.context,s,a,e)}function R(t,e,a){"function"==typeof t.complete&&t.complete.call(t.context,e,a)}function O(){}},m=function(t){var e,a,s=t.data;return"string"==typeof t.dataType&&"string"==typeof t.type&&"json"===(e=t.dataType.toLowerCase())&&"post"===t.type.toLowerCase()&&(s=r()(t.data)),"string"==typeof t.contentType&&(a=t.contentType.toLowerCase()),new n.a(function(n,i){h({url:t.url||"url",type:t.type||"GET",async:!1!==t.async,withCredentials:t.withCredentials,data:s,dataType:e||"default",contentType:a||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof t.beforeSend||t.beforeSend()},success:function(t,e,a,s){n(t,e,a,s)},error:function(t,e,a,s){i({responseText:t.responseText,code:t.status})},complete:function(t,e,a){n(t,e,a)}})})};e.c=f}},["azjI"]);