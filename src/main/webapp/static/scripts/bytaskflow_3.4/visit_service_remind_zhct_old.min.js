webpackJsonp([19],{"7OLh":function(e,t,a){"use strict";var s=a("mtWM"),i=a.n(s),r={data:function(){return{linkUrls:{}}},mounted:function(){this.getLinkUrls()},methods:{getLinkUrls:function(){var e=this;i.a.get(ctx+"/zhctOldShop/getLinkUrls").then(function(t){e.linkUrls=t.data})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-sider"},[e._m(0),e._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[a("a",{attrs:{target:"view_window",href:e.linkUrls.toolKitDownload}},[e._v("工具包下载")])])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[a("a",{attrs:{target:"view_window",href:e.linkUrls.trainingMaterialsDownload}},[e._v("培训资料下载")])])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[a("a",{attrs:{target:"view_window",href:e.linkUrls.printerDriverAndTestToolDownloadUrl}},[e._v("打印机安装相关教程")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"task-sider-subtitle"},[t("span",[this._v("相关资料")])])}]},o=a("VU/8")(r,n,!1,null,null,null);t.a=o.exports},"8K+q":function(e,t){},CIhD:function(e,t,a){"use strict";var s=a("pFYg"),i=a.n(s),r={props:["value","options","selectMoreConfig","label","identity","width","zIndex"],data:function(){return{isShow:!1,selectData:this.options,checkedList:[],isAll:!1,isOver:"",isNochecked:!1,trackByName:this.selectMoreConfig.trackByName,keyName:this.selectMoreConfig.keyName}},watch:{value:function(e,t){if("[object Array]"===Object.prototype.toString.call(e)&&e.length>0){var a=this,s=[];e.forEach(function(e){"object"===(void 0===e?"undefined":i()(e))?s.push(e[a.trackByName]):s.push(e)}),this.checkedList=s}},options:function(e,t){"[object Array]"===Object.prototype.toString.call(e)&&(this.selectData=e)},checkedList:function(e,t){var a=!1,s=this;if(e.length===this.selectData.length?this.isAll=!0:this.isAll=!1,e.length>0&&e.length===t.length?e.every(function(e,s){return e===t[s]||(a=!0,!1)}):a=!0,a){var r=[],n=this.trackByName;e.forEach(function(e){s.selectData.forEach(function(t){var a="object"===(void 0===t?"undefined":i()(t))?t[n]:t;e.toString()===a.toString()&&r.push(t)})}),this.$emit("input",r,s.identity)}}},computed:{checkedName:function(){var e=this,t="",a=this.trackByName;return this.checkedList.length>0&&this.selectData.length>0?(this.isNochecked=!1,this.checkedList.forEach(function(s){e.selectData.forEach(function(r){"object"===(void 0===r?"undefined":i()(r))&&r[a].toString()===s.toString()?t+=r[e.keyName]+"、":r===s&&(t+=r+"、")})}),t=t.replace(/^\s+|\s+$/g,"").substring(0,t.length-1)):(t=this.selectMoreConfig.placeholder?this.selectMoreConfig.placeholder:"",this.isNochecked=!0),t}},mounted:function(){if(this.value.length>0&&this.options.length>0){var e=this,t=e.trackByName,a=[];this.isAll=this.value.length===this.options.length,this.options.forEach(function(s){Array.isArray(e.value)&&e.value.forEach(function(i){e.isObject(i)&&e.isObject(s)&&i[t].toString()===s[t].toString()?a.push(i[t]):s===i&&a.push(i)})}),this.checkedList=a}document.body.addEventListener("click",this.closeTimeList,!1)},beforeDestroy:function(){document.body.removeEventListener("click",this.closeTimeList,!1)},methods:{isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},allCheck:function(){if(this.isAll)this.checkedList=[];else{var e=this,t=this.trackByName,a=[];this.selectData.forEach(function(s){e.isObject(s)?a.push(s[t]):a.push(s)}),this.checkedList=a}},showSelectClick:function(){this.isShow?this.isShow=!1:this.isShow=!0},closeTimeList:function(e){var t=e.target,a=this.$el.firstChild;t.isEqualNode(a)||(this.isShow=!1)},liMove:function(e){this.isOver=e},selectClick:function(){}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checked-time",style:{width:e.width||"220px","z-index":e.zIndex||1},on:{click:e.showSelectClick}},[a("div",{staticClass:"show-time",class:{"col-gay":e.isNochecked},attrs:{"data-label":this.label,title:e.checkedName}},[e._v("\n        "+e._s(e.checkedName)+"\n    ")]),e._v(" "),a("div",{staticClass:"trangle"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"select-box",on:{click:function(t){t.stopPropagation(),e.selectClick(t)}}},[a("ul",{staticClass:"select-list"},[a("li",{class:{"over-li":-1===e.isOver},on:{mousemove:function(t){e.isOver=-1}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isAll,expression:"isAll"}],attrs:{type:"checkbox",name:"time"},domProps:{checked:Array.isArray(e.isAll)?e._i(e.isAll,null)>-1:e.isAll},on:{change:function(t){var a=e.isAll,s=t.target,i=!!s.checked;if(Array.isArray(a)){var r=e._i(a,null);s.checked?r<0&&(e.isAll=a.concat([null])):r>-1&&(e.isAll=a.slice(0,r).concat(a.slice(r+1)))}else e.isAll=i}}}),e._v(" "),a("label",{staticClass:"fl-left",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.allCheck(t)}}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                   全选\n                ")])]),e._v(" "),e._l(e.selectData,function(t,s){return a("li",{key:"item"+s,staticClass:"clearfix",class:{"over-li":e.isOver===s},on:{mousemove:function(t){e.liMove(s)}}},[e.isString(t)?[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:e.identity+s+"labels"},domProps:{value:t,checked:Array.isArray(e.checkedList)?e._i(e.checkedList,t)>-1:e.checkedList},on:{change:function(a){var s=e.checkedList,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=t,o=e._i(s,n);i.checked?o<0&&(e.checkedList=s.concat([n])):o>-1&&(e.checkedList=s.slice(0,o).concat(s.slice(o+1)))}else e.checkedList=r}}}),e._v(" "),a("label",{staticClass:"fl-left",attrs:{for:e.identity+s+"labels"}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                       "+e._s(t)+"\n                    ")])]:[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:e.identity+s+"labels"},domProps:{value:t[e.trackByName],checked:Array.isArray(e.checkedList)?e._i(e.checkedList,t[e.trackByName])>-1:e.checkedList},on:{change:function(a){var s=e.checkedList,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=t[e.trackByName],o=e._i(s,n);i.checked?o<0&&(e.checkedList=s.concat([n])):o>-1&&(e.checkedList=s.slice(0,o).concat(s.slice(o+1)))}else e.checkedList=r}}}),e._v(" "),a("label",{staticClass:"fl-left",attrs:{for:e.identity+s+"labels"}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                       "+e._s(t[e.keyName])+"\n                    ")])]],2)})],2)])])},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(e){a("8K+q")},"data-v-123786a6",null);t.a=o.exports},PLU6:function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s),r=a("gBtx"),n=a.n(r),o=a("fZjL"),c=a.n(o),l=a("mtWM"),d=a.n(l),v={props:["isDisabled"],data:function(){return{isShopPrinter:"Y",printerNum:"1",printerInfoJson:[],isConnectPrinter:"Y",isShopCashRegister:"Y",cashRegisterNum:"1",cashRegisterInfoJson:[],isConnectInternet:"Y",shopDesc:"",linkUrls:{}}},mounted:function(){this.getLinkUrls()},methods:{getLinkUrls:function(){var e=this;d.a.get(ctx+"/zhctOldShop/getLinkUrls").then(function(t){e.linkUrls=t.data})},getData:function(e){var t=this;d.a.get(ctx+"/workflow/zhct/erpZhctProductRecord/findZhctOpenConditionByProcInsId?procInsId="+e).then(function(e){0!==c()(e.data).length&&(t.isShopPrinter=e.data.isShopPrinterID?e.data.isShopPrinterID:"Y",t.printerNum=e.data.printerNum?e.data.printerNum:"1",t.printerInfoJson=e.data.printerInfoJson?JSON.parse(e.data.printerInfoJson):[],t.isConnectPrinter=e.data.isConnectPrinter?e.data.isConnectPrinter:"Y",t.isShopCashRegister=e.data.isShopCashRegisterID?e.data.isShopCashRegisterID:"Y",t.cashRegisterNum=e.data.cashRegisterNum?e.data.cashRegisterNum:"1",t.cashRegisterInfoJson=e.data.cashRegisterInfoJson?JSON.parse(e.data.cashRegisterInfoJson):[],t.isConnectInternet=e.data.isConnectInterID?e.data.isConnectInterID:"Y",t.shopDesc=e.data.shopDesc?e.data.shopDesc:"")})},delPrinter:function(e){var t=this;popup.confirm({title:"提示",message:"确认删除此打印机?",confirmCallBack:function(){t.printerInfoJson.splice(e,1)}})},delCashRegister:function(e){var t=this;popup.confirm({title:"提示",message:"确认删除此收银机?",confirmCallBack:function(){t.cashRegisterInfoJson.splice(e,1)}})},addPrinter:function(){var e=this.printerInfoJson;!e.length||e[e.length-1].brand&&e[e.length-1].version&&e[e.length-1].number?this.printerInfoJson.push({brand:"",version:"",number:1}):erpApp.tip("请填写完整打印机信息，才能添加下一条!")},addCashRegister:function(){var e=this.cashRegisterInfoJson;!e.length||e[e.length-1].brand&&e[e.length-1].system&&e[e.length-1].distinguishability?this.cashRegisterInfoJson.push({brand:"",system:"",distinguishability:""}):erpApp.tip("请填写完整收银机信息，才能添加下一条!")},getContentData:function(){var e={isShopPrinter:this.isShopPrinter,printerNum:this.printerNum,printerInfoJson:this.printerInfoJson,isConnectPrinter:this.isConnectPrinter,isShopCashRegister:this.isShopCashRegister,cashRegisterNum:this.cashRegisterNum,cashRegisterInfoJson:this.cashRegisterInfoJson,isConnectInternet:this.isConnectInternet,shopDesc:this.shopDesc};if("Y"===e.isShopPrinter){var t=e.printerInfoJson.length;if(t){for(var a=0,s=0;s<t;s++)a+=n()(e.printerInfoJson[s].number)?n()(e.printerInfoJson[s].number):0;if(a>n()(e.printerNum))return 0;e.printerInfoJson.forEach(function(e){if(!e.brand||!e.version||!e.number)return"2"})}if(!e.printerNum||0==e.printerNum)return"4";e.printerInfoJson=i()(e.printerInfoJson)}else e.printerNum="",e.printerInfoJson="[]",e.isConnectPrinter="Y";if("Y"===e.isShopCashRegister){var r=e.cashRegisterInfoJson.length;if(r){if(r>n()(e.cashRegisterNum))return 1;e.cashRegisterInfoJson.forEach(function(e){if(!e.brand||!e.system||!e.distinguishability)return"3"})}if(!e.cashRegisterNum||0==e.cashRegisterNum)return"5";e.cashRegisterInfoJson=i()(e.cashRegisterInfoJson)}else e.cashRegisterNum="",e.cashRegisterInfoJson="[]";return e}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-sider opetate-task",attrs:{id:"opetate-task"}},[a("div",{staticClass:"task-sider-subtitle"},[e._t("header-title")],2),e._v(" "),e._t("hint-font"),e._v(" "),a("div",{staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"},[e._v("商户店内是否有打印机：")]),e._v(" "),a("dd",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isShopPrinter,expression:"isShopPrinter"}],attrs:{type:"radio",disabled:e.isDisabled,name:"isOne",id:"1",value:"Y"},domProps:{checked:e._q(e.isShopPrinter,"Y")},on:{change:function(t){e.isShopPrinter="Y"}}}),e._v(" "),a("label",{attrs:{for:"1"}},[e._v("是")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isShopPrinter,expression:"isShopPrinter"}],staticStyle:{"margin-left":"44px"},attrs:{disabled:e.isDisabled,type:"radio",value:"N",name:"isOne",id:"2"},domProps:{checked:e._q(e.isShopPrinter,"N")},on:{change:function(t){e.isShopPrinter="N"}}}),e._v(" "),a("label",{attrs:{for:"2"}},[e._v("否")])])]),e._v(" "),"Y"===e.isShopPrinter?[a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("label",[e._v("打印机的数量：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.printerNum,expression:"printerNum"}],staticClass:"width80",attrs:{type:"number",disabled:e.isDisabled,min:"1"},domProps:{value:e.printerNum},on:{input:function(t){t.target.composing||(e.printerNum=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("a",{attrs:{href:e.linkUrls.printerIntallTutorial,target:"view_window"}},[e._v("各品牌打印机驱动及测试工具下载地址汇总")])])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("table",{staticClass:"table table-striped table-bordered table-condensed width550",staticStyle:{"margin-bottom":"0"},attrs:{id:"table-sheng"}},[a("thead",[a("tr",[a("th",{attrs:{width:"25%"}},[e._v("品牌")]),e._v(" "),a("th",{attrs:{width:"25%"}},[e._v("型号")]),e._v(" "),a("th",{attrs:{width:"25%"}},[e._v("数量")]),e._v(" "),e.isDisabled?e._e():a("th",{attrs:{width:"25%"}},[e._v("操作")])])]),e._v(" "),a("tbody",[e.printerInfoJson.length?e._l(e.printerInfoJson,function(t,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.brand,expression:"item.brand"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"text"},domProps:{value:t.brand},on:{input:function(a){a.target.composing||e.$set(t,"brand",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.version,expression:"item.version"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"text"},domProps:{value:t.version},on:{input:function(a){a.target.composing||e.$set(t,"version",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"item.number"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"number"},domProps:{value:t.number},on:{input:function(a){a.target.composing||e.$set(t,"number",a.target.value)}}})]),e._v(" "),e.isDisabled?e._e():a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);",disabled:e.isDisabled},on:{click:function(t){e.delPrinter(s)}}},[e._v("删除")])])])}):[e._m(0)]],2)])]),e._v(" "),a("dd",[e.isDisabled?e._e():a("div",{staticStyle:{"font-size":"40px",cursor:"pointer",width:"26px","margin-left":"10px"},on:{click:e.addPrinter}},[e._v("+")])])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("label",[e._v("店内交换机接口是否足够连接打印机：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isConnectPrinter,expression:"isConnectPrinter"}],attrs:{id:"11",type:"radio",disabled:e.isDisabled,value:"Y",name:"isTwo"},domProps:{checked:e._q(e.isConnectPrinter,"Y")},on:{change:function(t){e.isConnectPrinter="Y"}}}),e._v(" "),a("label",{attrs:{for:"11"}},[e._v("是")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isConnectPrinter,expression:"isConnectPrinter"}],attrs:{id:"22",type:"radio",disabled:e.isDisabled,value:"N",name:"isTwo"},domProps:{checked:e._q(e.isConnectPrinter,"N")},on:{change:function(t){e.isConnectPrinter="N"}}}),e._v(" "),a("label",{attrs:{for:"22"}},[e._v("否")])])])]:e._e(),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"},[e._v("商户店内是否有收银机：")]),e._v(" "),a("dd",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isShopCashRegister,expression:"isShopCashRegister"}],attrs:{type:"radio",value:"Y",disabled:e.isDisabled,name:"isThree",id:"3"},domProps:{checked:e._q(e.isShopCashRegister,"Y")},on:{change:function(t){e.isShopCashRegister="Y"}}}),e._v(" "),a("label",{attrs:{for:"3"}},[e._v("是")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isShopCashRegister,expression:"isShopCashRegister"}],staticStyle:{"margin-left":"44px"},attrs:{disabled:e.isDisabled,value:"N",type:"radio",name:"isThree",id:"4"},domProps:{checked:e._q(e.isShopCashRegister,"N")},on:{change:function(t){e.isShopCashRegister="N"}}}),e._v(" "),a("label",{attrs:{for:"4"}},[e._v("否")])])]),e._v(" "),"Y"===e.isShopCashRegister?[a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("label",[e._v("收银机的数量：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.cashRegisterNum,expression:"cashRegisterNum"}],staticClass:"width80",attrs:{disabled:e.isDisabled,type:"number",min:"1"},domProps:{value:e.cashRegisterNum},on:{input:function(t){t.target.composing||(e.cashRegisterNum=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"}),e._v(" "),a("dd",[a("table",{staticClass:"table table-striped table-bordered table-condensed width550",staticStyle:{"margin-bottom":"0"},attrs:{id:"table-sheng"}},[a("thead",[a("tr",[a("th",{attrs:{width:"25%"}},[e._v("品牌")]),e._v(" "),a("th",{attrs:{width:"25%"}},[e._v("操作系统")]),e._v(" "),a("th",{attrs:{width:"25%"}},[e._v("分辨率是否大于1366*768")]),e._v(" "),e.isDisabled?e._e():a("th",{attrs:{width:"25%"}},[e._v("操作")])])]),e._v(" "),a("tbody",[e.cashRegisterInfoJson.length?e._l(e.cashRegisterInfoJson,function(t,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.brand,expression:"item.brand"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"text"},domProps:{value:t.brand},on:{input:function(a){a.target.composing||e.$set(t,"brand",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.system,expression:"item.system"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"text"},domProps:{value:t.system},on:{input:function(a){a.target.composing||e.$set(t,"system",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.distinguishability,expression:"item.distinguishability"}],staticClass:"width120",attrs:{disabled:e.isDisabled,type:"text"},domProps:{value:t.distinguishability},on:{input:function(a){a.target.composing||e.$set(t,"distinguishability",a.target.value)}}})]),e._v(" "),e.isDisabled?e._e():a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.delCashRegister(s)}}},[e._v("删除")])])])}):[e._m(1)]],2)])]),e._v(" "),a("dd",[e.isDisabled?e._e():a("div",{staticStyle:{"font-size":"40px",cursor:"pointer",width:"26px","margin-left":"10px"},on:{click:e.addCashRegister}},[e._v("+")])])])]:e._e(),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"},[e._v("安装智慧餐厅客户端的电脑是否可以联网：")]),e._v(" "),a("dd",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isConnectInternet,expression:"isConnectInternet"}],attrs:{type:"radio",value:"Y",disabled:e.isDisabled,name:"isFour",id:"33"},domProps:{checked:e._q(e.isConnectInternet,"Y")},on:{change:function(t){e.isConnectInternet="Y"}}}),e._v(" "),a("label",{attrs:{for:"33"}},[e._v("是")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isConnectInternet,expression:"isConnectInternet"}],staticStyle:{"margin-left":"44px"},attrs:{value:"N",disabled:e.isDisabled,type:"radio",name:"isFour",id:"44"},domProps:{checked:e._q(e.isConnectInternet,"N")},on:{change:function(t){e.isConnectInternet="N"}}}),e._v(" "),a("label",{attrs:{for:"44"}},[e._v("否")])])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("dt",{staticClass:"dt-width"},[e._v("商户店内布线及桌台场景：")]),e._v(" "),a("dd",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.shopDesc,expression:"shopDesc"}],staticClass:"width550",attrs:{rows:"3",disabled:e.isDisabled,maxlength:"1000",placeholder:"描述商户店内布线、桌台、桌台分区、收银点落点设计、厨房打印机数目及分单情况等信息"},domProps:{value:e.shopDesc},on:{input:function(t){t.target.composing||(e.shopDesc=t.target.value)}}})])])],2)],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"5"}},[t("div",{staticStyle:{height:"30px","text-align":"center"}},[this._v("暂无数据")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"5"}},[t("div",{staticStyle:{height:"30px","text-align":"center"}},[this._v("暂无数据")])])])}]},u=a("VU/8")(v,p,!1,null,null,null);t.a=u.exports},"Q+k6":function(e,t,a){"use strict";var s=a("fZjL"),i=a.n(s),r=a("mtWM"),n=a.n(r),o=a("oAV5"),c={props:["taskId","procInsId","serviceGoalCode","isjyk","serviceTypeCode","procInstName","isDisabled","serviceGoalText","shopAttendeesText","shopPreparationInfoText","remarksText","visitType"],data:function(){return{username:pageDataObject.username,label:["上门时间：","上门地点：","上门目的：","参与人员安排：","商户准备材料：","具体流程安排：","备注：","商户：","掌贝：","培训记录人：","上门准备清单：","硬件产品交付："],staticText:{columns:["项目","时间安排","时长","参与人"],column:["汇总","","时间",""]},meettime:"2018-05-26 13:15:07",selectMoreConfig:{keyName:"label",trackByName:"value",placeholder:"请选择"},taskDefKey:pageDataObject.taskDefKey,serviceType:pageDataObject.serviceType,formData:{shop:{name:"",id:""},tableContent:[],serviceData:{id:"",shopInfoId:"",shopInfoName:"",serviceAddress:"",serviceTypeCode:this.serviceTypeCode,serviceTypeTxt:"",serviceGoalCode:this.serviceGoalCode,serviceGoalTxt:"",serviceGoal:this.serviceGoalText,serviceUser:"",serviceUserName:"",servicePreparationInfo:"",shopAttendees:this.shopAttendeesText,shopPreparationInfo:this.shopPreparationInfoText,trainRecorder:"",serviceReason:"",shopNeedsPicture:"",appointedStartTime:"",auditStatus:"",auditUser:"",auditUserName:"",cancelReason:"",modifySuggest:"",receivingReport:"",procInsId:"",itemRecords:[],hardwareDeliverFlag:"Y",listProductObj:[],operationAdviserName:""}},newArr:[],storeList:[],prodNames:["POS机","拉客手环"],prodTypes:["Z2","Z3","Z5","Z5p"],prodTypesBy:[{value:"/",name:"无"}]}},components:{selectmore:a("CIhD").a},computed:{remark:function(){return this.remarksText},storeItem:function(){return this.storeList}},watch:{},mounted:function(){this.getDoorDetail()},methods:{getDoorDetail:function(){var e=this;n.a.get(ctx+"/delivery/flow/2P0/getVisitServiceCompleteDetail",{params:{taskId:this.taskId,procInsId:this.procInsId,serviceGoalCode:this.serviceGoalCode,visitType:this.visitType?this.visitType:"",taskDefKey:this.taskDefKey&&"null"!=this.taskDefKey?this.taskDefKey:"",serviceType:this.serviceType&&"null"!=this.serviceType?this.serviceType:""}}).then(function(t){if(t.data.result){e.formData.serviceData.listProductObj=t.data.listProductObj?t.data.listProductObj:[],e.formData.serviceData.operationAdviserName=t.data.operationAdviserName?t.data.operationAdviserName:"",e.formData.serviceData.hardwareDeliverFlag=t.data.result1.hardwareDeliverFlag?t.data.result1.hardwareDeliverFlag:"N";["visit_service_subscribe_first_3.3","visit_service_modify_first_3.3","visit_service_subscribe_jyk_3.3","visit_service_modify_jyk_3.3","visit_service_subscribe_material_3.3","visit_service_modify_material_3.3","visit_service_subscribe_charge","visit_service_modify_charge","visit_service_subscribe_basic","visit_service_modify_basic"].indexOf(e.taskDefKey);var a=-1!==e.taskDefKey.indexOf("_material"),s=0,r=[];if("object"===erpApp.util.type(t.data.shop)&&(e.formData.shop=erpApp.extend(!0,e.formData.shop,t.data.shop),e.getStoreList(t.data.shop.id)),"object"===erpApp.util.type(t.data.result1)&&(Array.isArray(t.data.result1.itemRecords)||delete t.data.result1.itemRecords,e.formData.serviceData=erpApp.extend(!0,e.formData.serviceData,t.data.result1)),Array.isArray(t.data.result2)){var n=t.data.result2.map(function(i,n){try{var o=t.data.result1.itemRecords.filter(function(e,t){return i.serviceItemCode===e.serviceItemCode});i.serviceStartTime=o.length>0&&o[0].hasOwnProperty("serviceStartTime")?o[0].serviceStartTime:""}catch(t){i.serviceStartTime="";var c={serviceStartTime:"",serviceItemAttendees:i.serviceItemAttendees,serviceItemCode:i.serviceItemCode};e.formData.serviceData.itemRecords.push(c)}var l=e.formData.serviceData.itemRecords.filter(function(e,t){return e.serviceItemCode===i.serviceItemCode});return i.serviceValueTxt=e.formData.serviceData.itemRecords[n].serviceItemAttendees?e.formData.serviceData.itemRecords[n].serviceItemAttendees.split("/"):i.serviceItemAttendees?i.serviceItemAttendees.split("/"):[],i.transServiceItemAttendees=l[0].serviceItemAttendees||"",i.options=i.serviceItemAttendees?i.serviceItemAttendees.split("/"):[],i.serviceStartTime||"Y"===i.defaultFlag?i.checked=!0:(i.checked=!1,i.transServiceItemAttendees=i.serviceStartTime?i.transServiceItemAttendees:""),a||"8"!==i.serviceFlag&&"6"!==i.serviceFlag||r.push(i),s+=i.serviceTimeLength,i}),o=s?s+"min":"";e.staticText.column.splice(2,1,o),e.formData.tableContent=n,[{0:""},{1:"支付开通准备"},{2:"营销策划服务"},{7:"安装"},{8:"测试"},{3:"操作培训"},{5:"售后服务"}].forEach(function(t,s){var n=i()(t)[0],o=t[n],c=a||"8"!==n?e.formData.tableContent.filter(function(e){return e.serviceFlag===n}):r;c.length&&e.newArr.push({rowName:o,rowData:c})})}e.$emit("update",{shop:t.data.shop,serviceData:t.data.result1,affirmVisitTimeList:t.data.affirmVisitTimeList,serviceTypeTxt:t.data.serviceTypeTxt,serviceGoalTxt:t.data.serviceGoalTxt})}})},getStoreList:function(e){var t=this;n.a.get(ctx+"/store/basic/erpStoreInfo/getlist/?id="+e).then(function(e){Array.isArray(e.data.storelist)&&(t.storeList=e.data.storelist)})},selectStroeAddress:function(){var e=this;if(!this.isDisabled){erpApp.selectStroeAddress(this.storeItem,function(t){e.formData.serviceData.serviceAddress=t})}},changeItemAttendees:function(){},changeMeettime:function(e){if(!this.isDisabled){var t=e.target.value?e.target.value:this.formData.serviceData.appointedStartTime;this.formData.serviceData.appointedStartTime=t;var a=new Date(t).getTime();if(!isNaN(a)&&t){var s=this.formData.tableContent.filter(function(e,t){return e.checked||(e.serviceStartTime=""),e.checked});s.forEach(function(e,t){t>0&&(a+=6e4*s[t-1].serviceTimeLength),e.serviceStartTime=o.b.formatDate(new Date(a),"yyyy-MM-dd hh:mm")})}}},changeTimes:function(e,t){if(!this.isDisabled){var a=0,s=(this.formData.tableContent,e.target.value),i=new Date(s).getTime();if(!isNaN(i)&&s){for(var r=this.formData.tableContent.filter(function(e,t){return e.checked||(e.serviceStartTime=""),e.checked}),n=0,c=r.length;n<c;n++)if(r[n].serviceItemCode===t){a=n;break}r.forEach(function(e,t){t===a?e.serviceStartTime=s:t>a&&(i+=6e4*r[t-1].serviceTimeLength,e.serviceStartTime=o.b.formatDate(new Date(i),"yyyy-MM-dd hh:mm"))})}}},getContentData:function(e){var t=this,a={appointedStartTime:"请选择上门时间！",serviceAddress:"请填写上门地点！",serviceGoal:"请填写上门目的！",shopAttendees:"请填写商户参与人员！",shopPreparationInfo:"请填写商户准备材料！"};if(this.procInstName&&(a={appointedStartTime:"请选择上门时间！",serviceAddress:"请填写上门地点！",serviceGoal:"请填写上门目的！",trainRecorder:"请填写培训记录人！",shopAttendees:"请填写商户参与人员！",shopPreparationInfo:"请填写商户上门准备清单！",servicePreparationInfo:"请填写掌贝上门准备清单！"}),!this.isDisabled&&!e){for(var s in a)if(!this.formData.serviceData[s])return erpApp.tip(a[s]),!1;if("Y"===this.formData.serviceData.hardwareDeliverFlag){if(0===this.formData.serviceData.listProductObj.length)return erpApp.tip("请至少添加一条硬件产品交付!"),!1;for(var i=!1,r=this.formData.serviceData.listProductObj,n=0;n<r.length;n++)if(!r[n].prodNum||0===parseInt(r[n].prodNum)){i=!0;break}if(i)return erpApp.tip("硬件产品交付的数量必须大于0!"),!1}for(var o=0,c=this.formData.tableContent.length;o<c;o++){this.formData.tableContent[o].transServiceItemAttendees=Array.isArray(this.formData.tableContent[o].serviceValueTxt)?this.formData.tableContent[o].serviceValueTxt.join("/"):"";var l=this.formData.tableContent[o];if(l.checked){if(!l.serviceStartTime)return erpApp.tip("请选择"+l.serviceItem+"的时间安排"),!1;if(!l.transServiceItemAttendees&&"现场休息"!==l.serviceItem&&"培训确认表填写"!==l.serviceItem)return erpApp.tip("请选择"+l.serviceItem+"的参与人"),!1}}}return this.formData.serviceData.itemRecords.forEach(function(e,a){t.formData.tableContent.forEach(function(t,a){e.serviceItemCode===t.serviceItemCode&&(e.serviceStartTime=t.serviceStartTime,e.serviceItemAttendees=t.transServiceItemAttendees)})}),this.formData},changeJykcodeo:function(e){if(!this.isDisabled){for(var t=0,a=this.formData.tableContent,s=0,i=a.length;s<i;s++)if(a[s].serviceItemCode===e){t=s;break}this.formData.tableContent[t].serviceStartTime=""}},addProduct:function(){this.formData.serviceData.listProductObj.push({id:"",prodName:"POS机",prodType:"Z5p",prodNum:1})},deleteProduct:function(e,t){var a=this;popup.confirm({title:"提示",message:"确认删除此卡券模块?",confirmCallBack:function(){e?n.a.get(ctx+"/visit/erpVisitServiceProductRecord/delete?id="+e).then(function(e){e.data.result?a.formData.serviceData.listProductObj.splice(t,1):erpApp.tip(e.data.message)}):a.formData.serviceData.listProductObj.splice(t,1)}})},changProdName:function(e){"拉客手环"===e.prodName?e.prodType="/":e.prodType="Z5p"}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-form"},[a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[0]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.appointedStartTime,expression:"formData.serviceData.appointedStartTime"}],staticClass:"tableform-input",attrs:{type:"text",id:"meetTime",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled},domProps:{value:e.formData.serviceData.appointedStartTime},on:{focus:function(t){e.changeMeettime(t)},input:function(t){t.target.composing||e.$set(e.formData.serviceData,"appointedStartTime",t.target.value)}}})])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[1]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.serviceAddress,expression:"formData.serviceData.serviceAddress"}],staticClass:"tableform-input",attrs:{type:"text",maxlength:"100",disabled:e.isDisabled},domProps:{value:e.formData.serviceData.serviceAddress},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"serviceAddress",t.target.value)}}}),e._v(" "),a("a",{staticClass:"btn search-storelist-btn",on:{click:e.selectStroeAddress}},[a("i",{staticClass:"icon-search"})])])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[2]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.serviceGoal,expression:"formData.serviceData.serviceGoal"}],staticClass:"tableform-textarea",attrs:{maxlength:"100",disabled:e.isDisabled},domProps:{value:e.formData.serviceData.serviceGoal},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"serviceGoal",t.target.value)}}})])]),e._v(" "),e.procInstName?a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[9]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.trainRecorder,expression:"formData.serviceData.trainRecorder"}],staticClass:"tableform-input",attrs:{type:"text",disabled:e.isDisabled,maxlength:"100"},domProps:{value:e.formData.serviceData.trainRecorder},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"trainRecorder",t.target.value)}}})])]):e._e(),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[3]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("p",[e._v(e._s(e.label[7]))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.shopAttendees,expression:"formData.serviceData.shopAttendees"}],staticClass:"tableform-input",attrs:{type:"text",maxlength:"100",disabled:e.isDisabled},domProps:{value:e.formData.serviceData.shopAttendees},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"shopAttendees",t.target.value)}}}),e._v(" "),a("p",[e._v(e._s(e.label[8]))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.operationAdviserName,expression:"formData.serviceData.operationAdviserName"}],staticClass:"tableform-input",attrs:{type:"text",disabled:"true"},domProps:{value:e.formData.serviceData.operationAdviserName},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"operationAdviserName",t.target.value)}}})])]),e._v(" "),e.procInstName?a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[10]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("p",[e._v(e._s(e.label[7]))]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.shopPreparationInfo,expression:"formData.serviceData.shopPreparationInfo"}],staticClass:"tableform-textarea",attrs:{disabled:e.isDisabled,maxlength:"100"},domProps:{value:e.formData.serviceData.shopPreparationInfo},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"shopPreparationInfo",t.target.value)}}}),e._v(" "),a("p",[e._v(e._s(e.label[8]))]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.servicePreparationInfo,expression:"formData.serviceData.servicePreparationInfo"}],staticClass:"tableform-textarea",attrs:{disabled:e.isDisabled,maxlength:"100"},domProps:{value:e.formData.serviceData.servicePreparationInfo},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"servicePreparationInfo",t.target.value)}}})])]):a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[4]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.shopPreparationInfo,expression:"formData.serviceData.shopPreparationInfo"}],staticClass:"tableform-textarea",attrs:{maxlength:"100",disabled:e.isDisabled},domProps:{value:e.formData.serviceData.shopPreparationInfo},on:{input:function(t){t.target.composing||e.$set(e.formData.serviceData,"shopPreparationInfo",t.target.value)}}})])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[11]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("p",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.hardwareDeliverFlag,expression:"formData.serviceData.hardwareDeliverFlag"}],attrs:{disabled:e.isDisabled,value:"Y",type:"radio",id:"hardwareDeliver11"},domProps:{checked:e._q(e.formData.serviceData.hardwareDeliverFlag,"Y")},on:{change:function(t){e.$set(e.formData.serviceData,"hardwareDeliverFlag","Y")}}}),e._v(" "),a("label",{attrs:{for:"hardwareDeliver11"}},[e._v("需要交付")])]),e._v(" "),a("span",{staticStyle:{"margin-left":"15px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.serviceData.hardwareDeliverFlag,expression:"formData.serviceData.hardwareDeliverFlag"}],attrs:{disabled:e.isDisabled,value:"N",type:"radio",id:"hardwareDeliver22"},domProps:{checked:e._q(e.formData.serviceData.hardwareDeliverFlag,"N")},on:{change:function(t){e.$set(e.formData.serviceData,"hardwareDeliverFlag","N")}}}),e._v(" "),a("label",{attrs:{for:"hardwareDeliver22"}},[e._v("不需要交付")])])]),e._v(" "),"Y"===e.formData.serviceData.hardwareDeliverFlag?[a("p",[a("table",{staticClass:"table table-striped table-bordered table-condensed"},[a("thead",[a("tr",[a("th",{attrs:{width:"20%"}},[e._v("序号")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("产品名称")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("型号")]),e._v(" "),a("th",{attrs:{width:"20%"}},[e._v("数量")]),e._v(" "),e.isDisabled?e._e():a("th",{attrs:{width:"20%"}},[e._v("操作")])])]),e._v(" "),a("tbody",[e.formData.serviceData.listProductObj.length>0?e._l(e.formData.serviceData.listProductObj,function(t,s){return a("tr",{key:"listProductObj_"+s},[a("td",[e._v(e._s(s+1))]),e._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.prodName,expression:"item.prodName"}],staticClass:"width-100",attrs:{disabled:e.isDisabled},on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"prodName",a.target.multiple?s:s[0])},function(a){e.changProdName(t)}]}},e._l(e.prodNames,function(t,s){return a("option",{key:"prodNames"+s,domProps:{value:t}},[e._v(e._s(t))])}))]),e._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.prodType,expression:"item.prodType"}],staticClass:"width-100",attrs:{disabled:e.isDisabled},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"prodType",a.target.multiple?s:s[0])}}},["POS机"===t.prodName?e._l(e.prodTypes,function(t,s){return a("option",{key:"prodTypes"+s,domProps:{value:t}},[e._v(e._s(t))])}):e._l(e.prodTypesBy,function(t,s){return a("option",{key:"prodTypesBy"+s,domProps:{value:t.value}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.prodNum,expression:"item.prodNum"}],staticClass:"width-100 margin-bottom-0",attrs:{disabled:e.isDisabled,type:"number",min:"1"},domProps:{value:t.prodNum},on:{input:function(a){a.target.composing||e.$set(t,"prodNum",a.target.value)}}})]),e._v(" "),e.isDisabled?e._e():a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:function(a){e.deleteProduct(t.id,s)}}},[e._v("删除")])])])}):[e._m(0)]],2)])]),e._v(" "),a("p"),e.isDisabled?e._e():a("div",{staticStyle:{"font-size":"40px",cursor:"pointer",width:"26px"},on:{click:e.addProduct}},[e._v("+")]),e._v(" "),a("p")]:e._e()],2)]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.label[5]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("div",{staticClass:"content-wrap-table"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[e._l(e.staticText.columns,function(t,s){return[0===s?a("th",{attrs:{colspan:"2"}},[e._v(e._s(t))]):a("th",[e._v(e._s(t))])]})],2)]),e._v(" "),a("tbody",[e._l(e.newArr,function(t){return[a("tr",[t.rowName?[a("td",{attrs:{rowspan:t.rowData.length}},[e._v(e._s(t.rowName))]),e._v(" "),a("td",["N"===t.rowData[0].defaultFlag?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[0].checked,expression:"item.rowData[0].checked"}],attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{checked:Array.isArray(t.rowData[0].checked)?e._i(t.rowData[0].checked,null)>-1:t.rowData[0].checked},on:{change:[function(a){var s=t.rowData[0].checked,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=e._i(s,null);i.checked?n<0&&(t.rowData[0].checked=s.concat([null])):n>-1&&(t.rowData[0].checked=s.slice(0,n).concat(s.slice(n+1)))}else e.$set(t.rowData[0],"checked",r)},function(a){e.changeJykcodeo(t.rowData[0].serviceItemCode)}]}})]:e._e(),e._v("\n\t\t\t\t\t        \t\t\t"+e._s(t.rowData[0].serviceItem)+"\n\t\t\t\t\t        \t\t")],2),e._v(" "),a("td",["N"===t.rowData[0].defaultFlag?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[0].serviceStartTime,expression:"item.rowData[0].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled||!t.rowData[0].checked},domProps:{value:t.rowData[0].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[0].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[0],"serviceStartTime",a.target.value)}}})]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[0].serviceStartTime,expression:"item.rowData[0].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled},domProps:{value:t.rowData[0].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[0].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[0],"serviceStartTime",a.target.value)}}})]],2),e._v(" "),a("td",[e._v(e._s(t.rowData[0].serviceTimeLengthTxt))]),e._v(" "),a("td",[t.rowData[0].serviceValueTxt&&!e.isDisabled?[a("selectmore",{attrs:{options:t.rowData[0].options,"select-more-config":e.selectMoreConfig,label:"label",identity:t.rowData[0].serviceItemCode,width:"150px",zIndex:"inherit"},on:{input:e.changeItemAttendees},model:{value:t.rowData[0].serviceValueTxt,callback:function(a){e.$set(t.rowData[0],"serviceValueTxt",a)},expression:"item.rowData[0].serviceValueTxt"}})]:[e._v(e._s(t.rowData[0].transServiceItemAttendees))]],2)]:[a("td",{attrs:{colspan:"2"}},[e._v(e._s(t.rowData[0].serviceItem))]),e._v(" "),a("td",["N"===t.rowData[0].defaultFlag?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[0].serviceStartTime,expression:"item.rowData[0].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled||!t.rowData[0].checked},domProps:{value:t.rowData[0].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[0].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[0],"serviceStartTime",a.target.value)}}})]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[0].serviceStartTime,expression:"item.rowData[0].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled},domProps:{value:t.rowData[0].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[0].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[0],"serviceStartTime",a.target.value)}}})]],2),e._v(" "),a("td",[e._v(e._s(t.rowData[0].serviceTimeLengthTxt))]),e._v(" "),a("td",[t.rowData[0].serviceValueTxt&&!e.isDisabled?[a("selectmore",{attrs:{options:t.rowData[0].options,"select-more-config":e.selectMoreConfig,label:"label",identity:t.rowData[0].serviceItemCode,width:"150px",zIndex:"inherit"},on:{input:e.changeItemAttendees},model:{value:t.rowData[0].serviceValueTxt,callback:function(a){e.$set(t.rowData[0],"serviceValueTxt",a)},expression:"item.rowData[0].serviceValueTxt"}})]:[e._v(e._s(t.rowData[0].transServiceItemAttendees))]],2)]],2),e._v(" "),e._l(t.rowData.length-1,function(s,i){return[a("tr",[a("td",["N"===t.rowData[s].defaultFlag?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[s].checked,expression:"item.rowData[row].checked"}],attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{checked:Array.isArray(t.rowData[s].checked)?e._i(t.rowData[s].checked,null)>-1:t.rowData[s].checked},on:{change:[function(a){var i=t.rowData[s].checked,r=a.target,n=!!r.checked;if(Array.isArray(i)){var o=e._i(i,null);r.checked?o<0&&(t.rowData[s].checked=i.concat([null])):o>-1&&(t.rowData[s].checked=i.slice(0,o).concat(i.slice(o+1)))}else e.$set(t.rowData[s],"checked",n)},function(a){e.changeJykcodeo(t.rowData[s].serviceItemCode)}]}})]:e._e(),e._v("\n\t\t\t\t\t\t          \t\t"+e._s(t.rowData[s].serviceItem)+"\n\t\t\t\t\t\t          \t")],2),e._v(" "),a("td",["N"===t.rowData[s].defaultFlag?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[s].serviceStartTime,expression:"item.rowData[row].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled||!t.rowData[s].checked},domProps:{value:t.rowData[s].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[s].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[s],"serviceStartTime",a.target.value)}}})]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rowData[s].serviceStartTime,expression:"item.rowData[row].serviceStartTime"}],staticClass:"form-input",attrs:{type:"text",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm', isShowClear:false, readOnly:true});",disabled:e.isDisabled},domProps:{value:t.rowData[s].serviceStartTime},on:{focus:function(a){e.changeTimes(a,t.rowData[s].serviceItemCode)},input:function(a){a.target.composing||e.$set(t.rowData[s],"serviceStartTime",a.target.value)}}})]],2),e._v(" "),a("td",[e._v(e._s(t.rowData[s].serviceTimeLengthTxt))]),e._v(" "),a("td",[t.rowData[s].serviceValueTxt&&!e.isDisabled?[a("selectmore",{attrs:{options:t.rowData[s].options,"select-more-config":e.selectMoreConfig,label:"label",identity:t.rowData[s].serviceItemCode,width:"150px",zIndex:"inherit"},on:{input:e.changeItemAttendees},model:{value:t.rowData[s].serviceValueTxt,callback:function(a){e.$set(t.rowData[s],"serviceValueTxt",a)},expression:"item.rowData[row].serviceValueTxt"}})]:[e._v(e._s(t.rowData[s].transServiceItemAttendees))]],2)])]})]}),e._v(" "),a("tr",[e._l(e.staticText.column,function(t,s){return[0===s?a("td",{attrs:{colspan:"2"}},[e._v(e._s(t))]):a("td",[e._v(e._s(t))])]})],2)],2)])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"5"}},[t("div",{staticStyle:{height:"30px","text-align":"center"}},[this._v("暂无数据")])])])}]},d=a("VU/8")(c,l,!1,null,null,null);t.a=d.exports},dcwP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),r=a("7+uW"),n=a("mtWM"),o=a.n(n),c=a("oAV5"),l=a("Q+k6"),d=a("PLU6"),v=a("7OLh");window.task_flow_version="beiyi_flow";var p={data:function(){return{assignee:pageDataObject.assignee,flowStartDate:c.b.formatDate(new Date(pageDataObject.flowStartDate),"yyyy-MM-dd hh:mm:ss"),flowEndDate:c.b.formatDate(new Date(pageDataObject.flowEndDate),"yyyy-MM-dd hh:mm:ss"),staticText:{subtitle:["电话预约商户，进行上门实施","任务操作指引","参考话术","任务操作","微信群再次确认","任务操作说明","再次电话确认上门服务"],label:["商户名称：","上门服务类型：","上门目的：","预约上门时间：","上门准备备注：","上门服务安排表：","保存培训执行清单后，下载执行清单图，发给微信群给商户确认","上门服务提醒（首次营销策划服务）里加入一个任务操作：再次电话确认上门服务XXX您好，我是您的掌贝专属运营顾问XXX。给您打电话的目的是跟您再确定下明天上门服务的事项，需要占用您大概2分钟时间，请问您现在方便吗？本次上门是免费，如后续上门需要收费，为了确保上门效果，有以下几件事需要再跟您提醒确认下：<br>①公司公章、支付宝账号密码您准备好了吗？<br>②XXX决策人明天能按时到场吗？<br>③会员卡名称和店铺Logo准备好了吗？<br>④店长、服务员、财务、收银能否都准时到场？<br>好的，那谢谢XXX，咱们明天XX时间见。"]},tip:{a:!1},plan:["服务员培训"],taskId:erpApp.getQueryString("taskId"),procInsId:erpApp.getQueryString("procInsId"),channelType:[],storeList:[],shopName:"",shopId:"",orderId:"",taskName:decodeURI(erpApp.getQueryString("taskName")),serviceType:pageDataObject.serviceType,visitType:pageDataObject.visitType,publicStaticText:{},contentData:{shop:{name:"",id:""},serviceData:{id:"",shopInfoId:"",shopInfoName:"",serviceAddress:"",serviceTypeCode:"",serviceTypeTxt:"",serviceGoalCode:"",serviceGoalTxt:"",serviceGoal:"",appointedStartTime:"",appointedEndTime:"",modifySuggest:""}}}},components:{tableform:l.a,OperateTask:d.a,OperateDown:v.a},computed:{},mounted:function(){},created:function(){this.setPublicTask()},methods:{setPublicTask:function(){this.publicStaticText=deliveryFlowByDoorService.ZHCT_FONT},clickHandler:function(e){var t=this,a=e,s="确定完成上门服务吗？";"Return"===e&&(s="确定修改上门服务预约申请吗？"),erpApp.confirm(s,function(){var e={auditStatus:t.contentData.serviceData.auditStatus||"",auditUser:t.contentData.serviceData.auditUser||"",id:t.contentData.serviceData.id,modifySuggest:t.contentData.serviceData.modifySuggest||""};o.a.post(ctx+"/zhctOldShop/visit_service_remind_zhct_old?taskId="+t.taskId+"&procInsId="+t.procInsId+"&channelType="+a+"&serviceType="+t.serviceType+"&visitType="+t.visitType+"&orderId="+t.orderId,e).then(function(e){e.data.result?(erpApp.tip(e.data.message||"处理成功！"),erpApp.jumpToTasklistPage("beiyiTaskFlow")):erpApp.tip(e.data.message||"处理失败！")})})},toggleMore:function(e){this.tip[e]=!this.tip[e]},updateContent:function(e){"object"===erpApp.util.type(e.shop)&&(this.shopName=e.shop.name,this.shopId=e.shop.id,this.orderId=e.shop.orderId),"object"===erpApp.util.type(e.serviceData)&&(this.contentData.serviceData=erpApp.extend(!0,this.contentData.serviceData,e.serviceData)),this.$refs.operateTask.getData(this.procInsId)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskflow-content"},[a("div",{staticClass:"task-detail-wrapper",attrs:{id:"taskDetailWrapper"}},[a("h3",{staticClass:"task-title"},[e._v(e._s(e.taskName)+" — 上门服务时间："+e._s(e.contentData.serviceData.appointedStartTime))]),e._v(" "),a("operate-task",{ref:"operateTask",attrs:{isQuest:!0,isDisabled:"true"}},[a("span",{attrs:{slot:"header-title"},slot:"header-title"},[e._v("开通智慧餐厅前置条件")])]),e._v(" "),a("operate-down"),e._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitle"},[a("span",[e._v("再次电话确认上门服务")]),e._v(" "),a("a",{staticClass:"disblock floatright togglemoreinfo",class:{show:e.tip.a},attrs:{href:"javascript:;"},on:{click:function(t){e.toggleMore("a")}}},[a("i",{staticClass:"icon-chevron-down icon"})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tip.a,expression:"tip.a"}],staticClass:"task-sider-content"},[a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"hsck"},[a("div",{domProps:{innerHTML:e._s(e.publicStaticText.commonhscks)}})])])])]),e._v(" "),a("div",{staticClass:"task-sider"},[a("div",{staticClass:"task-sider-subtitlec"},[a("i",{staticClass:"icon-wrench"}),a("span",[e._v(e._s(e.staticText.subtitle[3]))])]),e._v(" "),a("div",{staticClass:"task-sider-content"},[a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.staticText.label[0]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[e._v(e._s(e.shopName))])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.staticText.label[1]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[e._v(e._s(e.contentData.serviceData.serviceTypeTxt))])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.staticText.label[2]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[e._v(e._s(e.contentData.serviceData.serviceGoalTxt))])]),e._v(" "),a("dl",{staticClass:"content-wrap"},[a("dt",[e._v(e._s(e.staticText.label[3]))]),e._v(" "),a("dd",{staticClass:"margin-left-120"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.contentData.serviceData.appointedStartTime,expression:"contentData.serviceData.appointedStartTime"}],attrs:{type:"text",disabled:"true",readonly:"readonly"},domProps:{value:e.contentData.serviceData.appointedStartTime},on:{input:function(t){t.target.composing||e.$set(e.contentData.serviceData,"appointedStartTime",t.target.value)}}}),e._v(" — \n\t\t\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.contentData.serviceData.appointedEndTime,expression:"contentData.serviceData.appointedEndTime"}],attrs:{type:"text",disabled:"true",readonly:"readonly"},domProps:{value:e.contentData.serviceData.appointedEndTime},on:{input:function(t){t.target.composing||e.$set(e.contentData.serviceData,"appointedEndTime",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"sub-info"},[e._v(e._s(e.staticText.label[4]))]),e._v(" "),a("div",{staticClass:"content-wrap"},e._l(e.publicStaticText.remarklabel,function(t,s){return a("div",{staticClass:"checkbox-list"},[a("label",{staticClass:"content-label"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t\t")]),e._v(" "),e._l(t.children,function(t,s){return a("div",{staticClass:"checkbox-list padding-left10"},[a("label",{staticClass:"content-label"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t)+"\n\t\t\t\t\t\t\t\t")])])})],2)}))]),e._v(" "),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"sub-info"},[e._v(e._s(e.staticText.label[5]))])]),e._v(" "),a("div",{staticClass:"gray-border positionrelative",attrs:{id:"contentWrapTable"}},[a("div",{staticClass:"positionrabsolute backgrounddiv"}),e._v(" "),a("div",{staticClass:"form-title border-bottom"},[e._v("（"+e._s(e.shopName)+"）上门服务安排")]),e._v(" "),a("tableform",{ref:"visitServiceConentTable",attrs:{taskId:e.taskId,procInsId:e.procInsId,serviceTypeCode:e.publicStaticText.serviceTypeCode,serviceGoalCode:e.publicStaticText.serviceGoalCode,isDisabled:"true"},on:{update:e.updateContent}})],1)])]),e._v(" "),a("div",{staticClass:"task-detail-footer"},[a("div",{staticClass:"footer-info"},[a("p",[e._v("负责人："+e._s(e.assignee))]),e._v(" "),a("p",[e._v(e._s(e.flowStartDate)+" —— "+e._s(e.flowEndDate))])]),e._v(" "),a("div",{staticClass:"footer-btn"},[a("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:function(t){e.clickHandler("Return")}}},[e._v("修改")]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-large",attrs:{type:"button"},on:{click:function(t){e.clickHandler("Pass")}}},[e._v("完成上门服务")])])])],1)])},staticRenderFns:[]},m=a("VU/8")(p,u,!1,null,null,null).exports;r.default.config.productionTip=!1,r.default.config.devtools=!1,new r.default(i()({},m)).$mount("#rootNode")},oAV5:function(e,t,a){"use strict";a.d(t,"f",function(){return l}),a.d(t,"g",function(){return d}),a.d(t,"e",function(){return v}),a.d(t,"d",function(){return p}),a.d(t,"b",function(){return m}),a.d(t,"a",function(){return f});var s=a("//Fk"),i=a.n(s),r=a("mvHQ"),n=a.n(r),o=a("pFYg"),c=a.n(o),l=function(e,t,a){for(var s=0,i=t.length,r=!1;s<i;){if(e===t[s][a]){r=!0;break}s++}return r},d=function(e){return""+e.replace(/(^\s*)|(\s*$)/g,"")},v=function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return e.getFullYear()+"-"+(t>9?t:"0"+t)+"-"+(a>9?a:"0"+a)};u.prototype.getDateStr3=function(e){var t=e;return""+t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1))+"-"+(t.getDate()<10?"0"+t.getDate():""+t.getDate())},u.prototype.getWeekStartAndEnd=function(e){var t=new Date,a=(t=new Date(t.getTime()+6048e5*e)).getDay(),s=(t.getDate(),0!=a?a-1:6),i=new Date(t.getTime()-864e5*s),r=new Date(i.getTime()+5184e5);return this.getDateStr3(i)+" - "+this.getDateStr3(r)};var p=function(e,t,a){e=e;var s=t?new Date(t):new Date,i=s.getFullYear(),r=s.getMonth()+1,n=s.getDate();return n<=e&&(r>1?r-=1:(i-=1,r=12)),"before"===a?s.setDate(s.getDate()-e):s.setDate(s.getDate()+e),i=s.getFullYear(),r=s.getMonth()+1,n=s.getDate(),i+"-"+(r<10?"0"+r:r)+"-"+(n<10?"0"+n:n)};function u(e){this.date=e.date,this.type=e.type,this.value=void 0!==e.value?e.value:0,this.format=void 0!==e.format?e.format:"yyyy/MM/dd",this.date instanceof Date?(this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate()):(this.year=this.date.substr(0,4),this.month=this.date.substr(5,2),this.day=this.date.substr(8,2))}u.prototype.beforeDate=function(e,t){var a=e||this.type,s=t||this.value,i=this.year,r=this.month,n=this.day;"year"===a||"年"===a?i-=s:"month"===a||"月"===a?(i-=parseInt(s/12),(r-=s%12)<=0&&(i-=1,r+=12)):"day"!==a&&"日"!==a||(n-=s%30)<=0&&(i-=1,r+=12);var o=new Date(i,r-1,n);return this.formatDate(o,this.format)},u.prototype.formatDate=function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return t},u.prototype.getThisMonth=function(){var e=new Date(this.year,this.month-1),t=new Date(this.year,this.month,0);return this.formatDate(e,this.format)+" - "+this.formatDate(t,this.format)},u.prototype.getSomeMonth=function(e){return this.beforeDate("month",e)+" - "+this.beforeDate("now",0)},u.prototype.getThisYear=function(){var e=new Date(this.year,0,1),t=new Date(this.year,11,31);return this.formatDate(e,this.format)+" - "+this.formatDate(t,this.format)},u.prototype.formatTimeStr=function(e){var t=new Date,a=parseInt(t.getTime()),s=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+(t.getDate()-1)+" 00:00:01"),i=new Date(e),r=(a-e)/1e3;return r>=31536e3||i.getFullYear()!=t.getFullYear()?i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate():r>259200?i.getMonth()+1+"-"+i.getDate():i.getDate()==s.getDate()?"昨天":r>86400?Math.ceil(r/86400)+"天前":r>3600?Math.floor(r/3600)+"小时前":r>60?Math.floor(r/60)+"分钟前":"刚刚"};var m=new u({date:"2018-06-01",type:"month",value:"14",format:"yyyy-MM-dd hh:mm:ss"}),h=function(e){var t,a,s,i={url:location.href,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,xhr:function(){try{return new XMLHttpRequest}catch(e){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},r={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"},n=(new Date).getTime(),o=/\[\]$/,l=/\=\?(&|$)/,d=/\?/,v=/%20/g,p=/\S/,u={},m={},h=function e(){var t,a,s,i,r,n,o=arguments[0]||{},l=arguments.length;for(t=1;t<l;++t)if(null!=(a=arguments[t]))for(n in a)s=o[n],i=a[n],o!==i&&("object"===(void 0===i?"undefined":c()(i))?(r=s&&"object"===(void 0===s?"undefined":c()(s))?s:{},o[n]=e(r,i)):void 0!==i&&(o[n]=i));return o}(i,e),f=h.type.toUpperCase(),g=/^(?:GET|HEAD)$/.test(f);if(h.url=h.url.replace(/#.*$/,""),h.context=e&&null!=e.context?e.context:h,h.data&&h.processData&&"string"!=typeof h.data&&(h.data=function(e){var t,a=[],s=function(e,t){t=N(t)?t():t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(P(e))for(t in e)s(t,e[t]);else for(var i in e)A(i,e[i],s);return a.join("&").replace(v,"+")}(h.data)),"jsonp"===h.dataType&&("GET"===f?l.test(h.url)||(h.url+=(d.test(h.url)?"&":"?")+(h.jsonp||"callback")+"=?"):h.data&&l.test(h.data)||(h.data=(h.data?h.data+"&":"")+(h.jsonp||"callback")+"=?"),h.dataType="json"),"json"===h.dataType&&(h.data&&l.test(h.data)||l.test(h.url))){t=h.jsonpCallback||"jsonp"+n++,h.data&&(h.data=(h.data+"").replace(l,"="+t+"$1")),h.url=h.url.replace(l,"="+t+"$1"),h.dataType="script";var D=window[t];window[t]=function(e){if(N(D))D(e);else{window[t]=void 0;try{delete window[t]}catch(e){}}j(h,T,a,s=e),M(h,T,a),y&&y.removeChild(w)}}h.data&&g&&(h.url+=(d.test(h.url)?"&":"?")+h.data);var _=/^(\w+:)?\/\/([^\/?#]+)/.exec(h.url),b=_&&(_[1]&&_[1].toLowerCase()!==location.protocol||_[2].toLowerCase()!==location.host);if("script"===h.dataType&&"GET"===f&&b){var y=document.getElementsByTagName("head")[0]||document.documentElement,w=document.createElement("script");if(h.scriptCharset&&(w.charset=h.scriptCharset),w.src=h.url,!t){var C=!1;w.onload=w.onreadystatechange=function(){C||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(C=!0,j(h,T,a,s),M(h,T,a),w.onload=w.onreadystatechange=null,y&&w.parentNode&&y.removeChild(w))}}y.insertBefore(w,y.firstChild)}else{var k=!1,T=h.xhr();if(T){h.username?T.open(f,h.url,h.async,h.username,h.password):T.open(f,h.url,h.async),h.withCredentials&&"withCredentials"in T&&(T.withCredentials=!0);try{(null!=h.data&&!g||e&&e.contentType)&&T.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(u[h.url]&&T.setRequestHeader("If-Modified-Since",u[h.url]),m[h.url]&&T.setRequestHeader("If-None-Match",m[h.url])),b||T.setRequestHeader("X-Requested-With","XMLHttpRequest"),T.setRequestHeader("Accept",h.dataType&&h.accepts[h.dataType]?h.accepts[h.dataType]+", */*; q=0.01":h.accepts._default)}catch(e){}if(h.beforeSend&&!1===h.beforeSend.call(h.context,T,h))return T.abort(),!1;var x=T.onreadystatechange=function(e){if(T&&0!==T.readyState&&"abort"!==e){if(!k&&T&&(4===T.readyState||"timeout"===e)){var i;if(k=!0,T.onreadystatechange=L,"success"===(a="timeout"===e?"timeout":function(e){try{return!e.status&&"file:"===location.protocol||e.status>=200&&e.status<300||304===e.status||1223===e.status}catch(e){}return!1}(T)?h.ifModified&&function(e,t){var a=e.getResponseHeader("Last-Modified"),s=e.getResponseHeader("Etag");a&&(a[t]=a);s&&(s[t]=s);return 304===e.status}(T,h.url)?"notmodified":"success":"error"))try{s=function(e,t,a){var s=e.getResponseHeader("content-type")||"",i="xml"===t||!t&&s.indexOf("xml")>=0,r=i?e.responseXML:e.responseText;if(i&&"parsererror"===r.documentElement.nodeName)throw"parsererror";a&&a.dataFilter&&(r=a.dataFilter(r,t));"string"==typeof r&&("json"===t||!t&&s.indexOf("json")>=0?r=JSON.parse(r):("script"===t||!t&&s.indexOf("javascript")>=0)&&function(e){if(e&&p.test(e)){var t=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.type="text/javascript",scriptEval?a.appendChild(document.createTextNode(e)):a.text=e,t.insertBefore(a,t.firstChild),t.removeChild(a)}}(r));return r}(T,h.dataType,h)}catch(e){a="parsererror",i=e}"success"===a||"notmodified"===a?t||j(h,T,a,s):R(h,T,a,i),t||M(h,T,a),"timeout"===e&&T.abort(),h.async&&(T=null)}}else k||M(h,T,a),k=!0,T&&(T.onreadystatechange=L)};try{var S=T.abort;T.abort=function(){T&&Function.prototype.call.call(S,T),x("abort")}}catch(e){}h.async&&h.timeout>0&&setTimeout(function(){T&&!k&&x("timeout")},h.timeout);try{T.send(g||null==h.data?null:h.data)}catch(e){R(h,T,null,e),M(h,T,a)}return h.async||x(),T}}function I(e){return null==e?String(e):r[toString.call(e)]||"object"}function N(e){return"function"===I(e)}function P(e){return"array"===I(e)}function A(e,t,a){if(P(t)&&t.length)for(var s in t){var i=t[s];o.test(e)?a(e,i):A(e+"["+("object"===(void 0===i?"undefined":c()(i))||P(i)?s:"")+"]",i,a)}else if(null!=t&&"object"===(void 0===t?"undefined":c()(t)))if(function(e){for(var t in e)return!1;return!0}(t))a(e,"");else for(var r in t){A(e+"["+r+"]",i=t[r],a)}else a(e,t)}function R(e,t,a,s){"function"==typeof e.error&&e.error.call(e.context,t,a,s)}function j(e,t,a,s){"function"==typeof e.success&&e.success.call(e.context,s,a,t)}function M(e,t,a){"function"==typeof e.complete&&e.complete.call(e.context,t,a)}function L(){}},f=function(e){var t,a,s=e.data;return"string"==typeof e.dataType&&"string"==typeof e.type&&"json"===(t=e.dataType.toLowerCase())&&"post"===e.type.toLowerCase()&&(s=n()(e.data)),"string"==typeof e.contentType&&(a=e.contentType.toLowerCase()),new i.a(function(i,r){h({url:e.url||"url",type:e.type||"GET",async:!1!==e.async,withCredentials:e.withCredentials,data:s,dataType:t||"default",contentType:a||"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){return"function"!=typeof e.beforeSend||e.beforeSend()},success:function(e,t,a,s){i(e,t,a,s)},error:function(e,t,a,s){r({responseText:e.responseText,code:e.status})},complete:function(e,t,a){i(e,t,a)}})})};t.c=u}},["dcwP"]);