webpackJsonp([109],{"5d0s":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),c=i("7+uW"),r=i("mvHQ"),n=i.n(r),v=i("mtWM"),l=i.n(v),o={data:function(){return{teamsList:[],loding:!1,tabOne:!0,tabTwo:!1,id:erpShopApp.getQueryString("id",location.href),price:"",name:"",packageServiceList:[],singleServiceList:[],packageServiceListSelect:[],singleServiceListSelect:[],packageServiceFlag:!0,singleServiceFlag:!0,packageServiceListBy:[],singleServiceListBy:[]}},components:{},watch:{packageServiceListSelect:function(e,t){var i=this.selectToast(e);this.packageServiceListSelect=i?e:t},singleServiceListSelect:function(e,t){var i=this.selectToast(e);this.singleServiceListSelect=i?e:t}},mounted:function(){this.getFindList()},methods:{selectToast:function(e){if(Array.isArray(e)){for(var t=[],i="38924457a0bb48308d5dabb2fba23fb9",a="cb516bfaf9b7469dafaaa7629d7523d1",s=0,c=e.length;s<c;s++){var r=e[s].serviceItemId;if(t.push(r),-1!==t.indexOf(a)&&-1!==t.indexOf("262107d9a49c4284a17ef673c819e991")&&-1!==t.indexOf(i))return erpApp.tip("“掌贝平台交付服务”不能与“物料更新服务”或“售后上门培训服务（付费版）”同时选中"),!1;if(-1!==t.indexOf(i)&&-1!==t.indexOf("262107d9a49c4284a17ef673c819e991"))return erpApp.tip("“掌贝平台交付服务”和“售后上门培训服务（付费版）”只能2选1"),!1;if(-1!==t.indexOf(i)&&-1!==t.indexOf(a))return erpApp.tip("“掌贝平台交付服务”和“物料更新服务”只能2选1"),!1}return!0}},savePage:function(){this.packageServiceListSelect.map(function(e){return"N"===e.isDeadline&&(e.serviceTerm=1),e}),this.singleServiceListSelect.map(function(e){return"N"===e.isDeadline&&(e.serviceTerm=1),e}),l.a.post(ctx+"/good/erpGoodInfo/saveGoodService",{id:this.id,packageServiceList:this.packageServiceListSelect,singleServiceList:this.singleServiceListSelect}).then(function(e){"0"===e.data.code?popup.tip("修改成功!","success"):popup.tip("修改失败!","success")})},getFindList:function(){var e=this;l.a.get(ctx+"/good/erpGoodServiceItem/findList").then(function(t){e.packageServiceList=t.data.serviceItemList,e.getData()})},getData:function(){var e=this;l.a.get(ctx+"/good/erpGoodInfo/edit?id="+this.id).then(function(t){if("0"===t.data.code){var i=t.data.attach[0];e.price=i.price/100,e.name=i.name,e.packageServiceListBy=JSON.parse(n()(e.packageServiceList)),i.hasOwnProperty("packageServiceList")?(e.packageServiceListSelect=i.packageServiceList,e.packageServiceListSelect.forEach(function(t){e.packageServiceList.forEach(function(i,a){t.serviceItemId===i.id?(t.id="",e.packageServiceListBy[a]=t,e.packageServiceListBy[a].readonly=i.readonly):(e.packageServiceListBy[a].serviceItemId=i.id,e.packageServiceListBy[a].id="")})})):e.packageServiceListBy.forEach(function(e){e.serviceItemId=e.id,e.id=""}),e.packageServiceListBy.forEach(function(e){e.times||(e.times=1),e.isDeadline||(e.isDeadline="N"),e.serviceTerm||(e.serviceTerm=12),e.serviceItemName||(e.serviceItemName=e.name),e.isPackage="Y"}),e.singleServiceListBy=JSON.parse(n()(e.packageServiceList)),i.hasOwnProperty("singleServiceList")?(e.singleServiceListSelect=i.singleServiceList,e.singleServiceListSelect.forEach(function(t){e.packageServiceList.forEach(function(i,a){t.serviceItemId===i.id?(t.id="",e.singleServiceListBy[a]=t,e.singleServiceListBy[a].readonly=i.readonly):(e.singleServiceListBy[a].serviceItemId=i.id,e.singleServiceListBy[a].id="")})})):e.singleServiceListBy.forEach(function(e){e.serviceItemId=e.id,e.id=""}),e.singleServiceListBy.forEach(function(e){e.times||(e.times=1),e.isDeadline||(e.isDeadline="N"),e.serviceTerm||(e.serviceTerm=12),e.serviceItemName||(e.serviceItemName=e.name),e.isPackage="N"})}})},changeDeadline:function(){var e=this;this.packageServiceFlag=!1,this.$nextTick(function(){e.packageServiceFlag=!0})},changeDeadlineBy:function(){var e=this;this.singleServiceFlag=!1,this.$nextTick(function(){e.singleServiceFlag=!0})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modify-server"},[e._m(0),e._v(" "),i("div",{staticClass:"server-outside-wrapper"},[i("div",{staticClass:"header-show"},[i("p",[e._v("商品："+e._s(e.name))]),e._v(" "),i("p",{staticClass:"margin-left-120"},[e._v("价格："+e._s(e.price))]),e._v(" "),i("button",{staticClass:"btn btn-primary",on:{click:e.savePage}},[e._v("确定")])]),e._v(" "),i("div",{staticClass:"tab-nav-content"},[i("button",{staticClass:"btn",class:{"btn-primary":e.tabOne},on:{click:function(t){e.tabOne=!0,e.tabTwo=!1}}},[e._v("作为套餐里商品的服务项目")]),e._v(" "),i("button",{staticClass:"btn",class:{"btn-primary":e.tabTwo},on:{click:function(t){e.tabTwo=!0,e.tabOne=!1}}},[e._v("作为单商品购买的服务项目")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tabOne,expression:"tabOne"}],staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[i("div",{staticClass:"statistics-box"},[i("div",{staticClass:"statistics-table"},[i("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[e._m(1),e._v(" "),i("tbody",e._l(e.packageServiceListBy,function(t,a){return e.packageServiceFlag?i("tr",[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.packageServiceListSelect,expression:"packageServiceListSelect"}],attrs:{id:a,type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.packageServiceListSelect)?e._i(e.packageServiceListSelect,t)>-1:e.packageServiceListSelect},on:{change:function(i){var a=e.packageServiceListSelect,s=i.target,c=!!s.checked;if(Array.isArray(a)){var r=t,n=e._i(a,r);s.checked?n<0&&(e.packageServiceListSelect=a.concat([r])):n>-1&&(e.packageServiceListSelect=a.slice(0,n).concat(a.slice(n+1)))}else e.packageServiceListSelect=c}}}),e._v(" "),i("label",{attrs:{for:a}},[e._v(e._s(t.serviceItemName))])]),e._v(" "),i("td",["N"===t.readonly?[i("input",{directives:[{name:"model",rawName:"v-model",value:t.times,expression:"item.times"}],attrs:{type:"number",min:"1"},domProps:{value:t.times},on:{input:function(i){i.target.composing||e.$set(t,"times",i.target.value)}}})]:[e._v("\n\t\t\t\t\t\t\t\t\t\t"+e._s(t.times)+"\n\t\t\t\t\t\t\t\t\t")]],2),e._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.isDeadline,expression:"item.isDeadline"}],on:{change:[function(i){var a=Array.prototype.filter.call(i.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"isDeadline",i.target.multiple?a:a[0])},e.changeDeadline]}},[i("option",{attrs:{value:"N"}},[e._v("无")]),e._v(" "),i("option",{attrs:{value:"Y"}},[e._v("有")])]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:"Y"===t.isDeadline,expression:"item.isDeadline === 'Y'"},{name:"model",rawName:"v-model",value:t.serviceTerm,expression:"item.serviceTerm"}],attrs:{max:"12",type:"number",min:"1"},domProps:{value:t.serviceTerm},on:{input:function(i){i.target.composing||e.$set(t,"serviceTerm",i.target.value)}}})])]):e._e()}))])])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tabTwo,expression:"tabTwo"}],staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[i("div",{staticClass:"statistics-box"},[i("div",{staticClass:"statistics-table"},[i("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[e._m(2),e._v(" "),i("tbody",e._l(e.singleServiceListBy,function(t,a){return e.singleServiceFlag?i("tr",[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.singleServiceListSelect,expression:"singleServiceListSelect"}],attrs:{id:a+100,type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.singleServiceListSelect)?e._i(e.singleServiceListSelect,t)>-1:e.singleServiceListSelect},on:{change:function(i){var a=e.singleServiceListSelect,s=i.target,c=!!s.checked;if(Array.isArray(a)){var r=t,n=e._i(a,r);s.checked?n<0&&(e.singleServiceListSelect=a.concat([r])):n>-1&&(e.singleServiceListSelect=a.slice(0,n).concat(a.slice(n+1)))}else e.singleServiceListSelect=c}}}),e._v(" "),i("label",{attrs:{for:a+100}},[e._v(e._s(t.serviceItemName))])]),e._v(" "),i("td",["N"===t.readonly?[i("input",{directives:[{name:"model",rawName:"v-model",value:t.times,expression:"item.times"}],attrs:{type:"number",min:"1"},domProps:{value:t.times},on:{input:function(i){i.target.composing||e.$set(t,"times",i.target.value)}}})]:[e._v("\n\t\t\t\t\t\t\t\t\t\t"+e._s(t.times)+"\n\t\t\t\t\t\t\t\t\t")]],2),e._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.isDeadline,expression:"item.isDeadline"}],on:{change:[function(i){var a=Array.prototype.filter.call(i.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"isDeadline",i.target.multiple?a:a[0])},e.changeDeadlineBy]}},[i("option",{attrs:{value:"N"}},[e._v("无")]),e._v(" "),i("option",{attrs:{value:"Y"}},[e._v("有")])]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:"Y"===t.isDeadline,expression:"item.isDeadline === 'Y'"},{name:"model",rawName:"v-model",value:t.serviceTerm,expression:"item.serviceTerm"}],attrs:{type:"number",max:"12",min:"1"},domProps:{value:t.serviceTerm},on:{input:function(i){i.target.composing||e.$set(t,"serviceTerm",i.target.value)}}})])]):e._e()}))])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"act-top positionrelative overview"},[t("ul",{staticClass:"nav nav-tabs"},[t("li",[t("a",{staticClass:"comebacka",attrs:{href:"javascript:history.go(-1);"}},[this._v("返回")])]),this._v(" "),t("li",{staticClass:"acttitle active"},[t("a",{attrs:{href:"javascript:;"}},[this._v("商品服务项目编辑")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{width:"33.3%"}},[t("div",{staticClass:"th"},[this._v("服务项目")])]),this._v(" "),t("th",{attrs:{width:"33.3%"}},[t("div",{staticClass:"th"},[this._v("服务次数")])]),this._v(" "),t("th",[t("div",{staticClass:"th"},[this._v("服务期限（月）")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{width:"33.3%"}},[t("div",{staticClass:"th"},[this._v("服务项目")])]),this._v(" "),t("th",{attrs:{width:"33.3%"}},[t("div",{staticClass:"th"},[this._v("服务次数")])]),this._v(" "),t("th",[t("div",{staticClass:"th"},[this._v("服务期限（月）")])])])])}]};var p=i("VU/8")(o,d,!1,function(e){i("gsNS")},null,null).exports;c.default.config.productionTip=!1,c.default.config.devtools=!1,new c.default(s()({},p)).$mount("#rootNode")},gsNS:function(e,t){}},["5d0s"]);