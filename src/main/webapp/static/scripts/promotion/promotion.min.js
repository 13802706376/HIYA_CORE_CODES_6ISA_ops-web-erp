webpackJsonp([1,132],{"2kjH":function(t,e){},"3hN0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"getRequest",function(){return c}),i.d(e,"deepClone",function(){return r}),i.d(e,"jsonCompare",function(){return l}),i.d(e,"changeCallback",function(){return d});var s=i("mvHQ"),a=i.n(s),o=i("pFYg"),n=i.n(o);function r(t){var e,i=t.constructor===Array?[]:{};if("object"===(void 0===t?"undefined":n()(t))){if(window.JSON)e=a()(t),i=JSON.parse(e);else for(var s in t)i[s]="object"===n()(t[s])?r(t[s]):t[s];return i}}function l(t,e){return a()(t)===a()(e)}function c(){var t=location.search,e=new Object;if(-1!==t.indexOf("?")){var i=t.substr(1);i=i.split("&");for(var s=0;s<i.length;s++)e[i[s].split("=")[0]]=decodeURI(i[s].split("=")[1]);return e}return!1}function d(t,e,i){e?popup.tip("保存失败！","error"):(popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:i||"保存失败！",confirmCallBack:function(){t(!0)},cancelCallBack:function(){t(!1)}}))}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t}},"825q":function(t,e){},"8TEt":function(t,e){},"8iZB":function(t,e){},An3k:function(t,e){},BD2p:function(t,e,i){"use strict";var s=i("bOdI"),a=i.n(s),o={name:"Icon",props:{type:String,size:[Number,String],color:String},computed:{classes:function(){return"ivu-icon ivu-icon-"+this.type},styles:function(){var t={};return this.size&&(t["font-size"]=this.size+"px"),this.color&&(t.color=this.color),t}}},n={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles})},staticRenderFns:[]},r=i("VU/8")(o,n,!1,null,null,null).exports,l=(i("BO1k"),i("7+uW").default.prototype.$isServer);function c(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return!0;return!1}!l&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);var d={components:{Icon:r},props:{percent:{type:Number,default:0},status:{validator:function(t){return c(t,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1}},data:function(){return{currentStatus:this.status}},computed:{isStatus:function(){return"wrong"==this.currentStatus||"success"==this.currentStatus},statusIcon:function(){var t="";switch(this.currentStatus){case"wrong":t="ios-close";break;case"success":t="ios-checkmark"}return t},bgStyle:function(){return this.vertical?{height:this.percent+"%",width:this.strokeWidth+"px"}:{width:this.percent+"%",height:this.strokeWidth+"px"}},wrapClasses:function(){var t;return["ivu-progress","ivu-progress-"+this.currentStatus,(t={},a()(t,"ivu-progress-show-info",!this.hideInfo),a()(t,"ivu-progress-vertical",this.vertical),t)]},textClasses:function(){return"ivu-progress-text"},textInnerClasses:function(){return"ivu-progress-text-inner"},outerClasses:function(){return"ivu-progress-outer"},innerClasses:function(){return"ivu-progress-inner"},bgClasses:function(){return"ivu-progress-bg"}},created:function(){this.handleStatus()},methods:{handleStatus:function(t){t?(this.currentStatus="normal",this.$emit("on-status-change","normal")):100==parseInt(this.percent,10)&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent:function(t,e){t<e?this.handleStatus(!0):this.handleStatus()},status:function(t){this.currentStatus=t}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.wrapClasses},[i("div",{class:t.outerClasses},[i("div",{class:t.innerClasses},[i("div",{class:t.bgClasses,style:t.bgStyle})])]),t._v(" "),t.hideInfo?t._e():i("span",{class:t.textClasses},[t._t("default",[t.isStatus?i("span",{class:t.textInnerClasses},[i("Icon",{attrs:{type:t.statusIcon}})],1):i("span",{class:t.textInnerClasses},[t._v("\n                "+t._s(t.percent)+"%\n            ")])])],2)])},staticRenderFns:[]},u={name:"UploadList",components:{Icon:r,iProgress:i("VU/8")(d,p,!1,null,null,null).exports},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload"}},methods:{fileCls:function(t){return["ivu-upload-list-file",a()({},"ivu-upload-list-file-finish","finished"===t.status)]},handleClick:function(t){this.$emit("on-file-click",t)},handlePreview:function(t){this.$emit("on-file-preview",t)},handleRemove:function(t){this.$emit("on-file-remove",t)},format:function(t){var e=t.name.split(".").pop().toLocaleLowerCase()||"",i="document";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(e)>-1&&(i="image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(e)>-1&&(i="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(e)>-1&&(i="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(e)>-1&&(i="document-text"),["numbers","csv","xls","xlsx"].indexOf(e)>-1&&(i="stats-bars"),["keynote","ppt","pptx"].indexOf(e)>-1&&(i="ios-videocam"),i},parsePercentage:function(t){return parseInt(t,10)}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:[t.prefixCls+"-list"]},t._l(t.files,function(e){return i("li",{class:t.fileCls(e),on:{click:function(i){t.handleClick(e)}}},[i("span",{on:{click:function(i){t.handlePreview(e)}}},[i("Icon",{attrs:{type:t.format(e)}}),t._v(" "+t._s(e.name)+"\n        ")],1),t._v(" "),i("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===e.status,expression:"file.status === 'finished'"}],class:[t.prefixCls+"-list-remove"],attrs:{type:"ios-close-empty"},nativeOn:{click:function(i){t.handleRemove(e)}}}),t._v(" "),i("transition",{attrs:{name:"fade"}},[e.showProgress?i("i-progress",{attrs:{"stroke-width":2,percent:t.parsePercentage(e.percentage),status:"finished"===e.status&&e.showProgress?"success":"normal"}}):t._e()],1)],1)}))},staticRenderFns:[]},m=i("VU/8")(u,v,!1,null,null,null).exports,h=i("fZjL"),f=i.n(h);function g(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}function _(t){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest,i=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var s=new FormData;t.data&&f()(t.data).map(function(e){s.append(e,t.data[e])}),s.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(function(t,e,i){var s="fail to post "+t+" "+i.status+"'",a=new Error(s);return a.status=i.status,a.method="post",a.url=t,a}(i,0,e),g(e));t.onSuccess(g(e))},e.open("post",i,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var a=t.headers||{};for(var o in a)a.hasOwnProperty(o)&&null!==a[o]&&e.setRequestHeader(o,a[o]);e.send(s)}}var b={name:"Upload",mixins:[{methods:{dispatch:function(t,e,i){for(var s=this.$parent||this.$root,a=s.$options.name;s&&(!a||a!==t);)(s=s.$parent)&&(a=s.$options.name);s&&s.$emit.apply(s,[e].concat(i))},broadcast:function(t,e,i){(function t(e,i,s){this.$children.forEach(function(a){a.$options.name===e?a.$emit.apply(a,[i].concat(s)):t.apply(a,[e,i].concat([s]))})}).call(this,t,e,i)}}}],components:{UploadList:m},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(t){return c(t,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},maxSelectNum:{type:Number},existNum:{type:Number},index:{type:Number}},data:function(){return{prefixCls:"ivu-upload",dragOver:!1,fileList:[],tempIndex:1}},computed:{classes:function(){var t;return["ivu-upload",(t={},a()(t,"ivu-upload-select","select"===this.type),a()(t,"ivu-upload-drag","drag"===this.type),a()(t,"ivu-upload-dragOver","drag"===this.type&&this.dragOver),t)]}},methods:{handleClick:function(){this.$refs.input.click()},handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},onDrop:function(t){this.dragOver=!1,this.uploadFiles(t.dataTransfer.files)},uploadFiles:function(t){var e=this,i=Array.prototype.slice.call(t);if(this.maxSelectNum&&i.length>this.maxSelectNum-this.existNum)return erpShopApp.tip("最多只能上传"+this.maxSelectNum+"张图片！","info"),!1;this.multiple||(i=i.slice(0,1)),0!==i.length&&i.forEach(function(t){e.upload(t)})},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var i=this.beforeUpload(t,this.index);i&&i.then?i.then(function(i){"[object File]"===Object.prototype.toString.call(i)?e.post(i):e.post(t)},function(){}):!1!==i&&this.post(t)},post:function(t){var e=this;if(this.format.length){var i=t.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(function(t){return t.toLocaleLowerCase()===i}))return this.onFormatError(t,this.fileList),!1}if(this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t),(new FormData).append(this.name,t),_({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(i){e.handleProgress(i,t)},onSuccess:function(i){e.handleSuccess(i,t,e.index)},onError:function(i,s){e.handleError(i,s,t)}})},handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)},getFile:function(t){var e=void 0;return this.fileList.every(function(i){return!(e=t.uid===i.uid?i:null)}),e},handleProgress:function(t,e){var i=this.getFile(e);this.onProgress(t,i,this.fileList),i.percentage=t.percent||0},handleSuccess:function(t,e,i){var s=this.getFile(e);s&&(s.status="finished",s.response=t,this.dispatch("FormItem","on-form-change",s),this.onSuccess(t,s,this.fileList,i),setTimeout(function(){s.showProgress=!1},1e3))},handleError:function(t,e,i){var s=this.getFile(i),a=this.fileList;s.status="fail",a.splice(a.indexOf(s),1),this.onError(t,e,i)},handleRemove:function(t){var e=this.fileList;e.splice(e.indexOf(t),1),this.onRemove(t,e)},handlePreview:function(t){"finished"===t.status&&this.onPreview(t)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(t){var e=this;this.fileList=t.map(function(t){return t.status="finished",t.percentage=100,t.uid=Date.now()+e.tempIndex++,t})}}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.prefixCls]},[i("div",{class:t.classes,on:{click:t.handleClick,drop:function(e){e.preventDefault(),t.onDrop(e)},dragover:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1}}},[i("input",{ref:"input",class:[t.prefixCls+"-input"],attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("tip"),t._v(" "),t.showUploadList?i("upload-list",{attrs:{files:t.fileList},on:{"on-file-remove":t.handleRemove,"on-file-preview":t.handlePreview}}):t._e()],2)},staticRenderFns:[]},C=i("VU/8")(b,y,!1,null,null,null);e.a=C.exports},C8im:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={};i.d(s,"isNumber",function(){return ct});var a=i("Dd8w"),o=i.n(a),n=i("fZjL"),r=i.n(n),l=i("7+uW"),c=i("mtWM"),d=i.n(c),p=i("mvHQ"),u=i.n(p),v=i("//Fk"),m=i.n(v),h=i("3hN0"),f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step-tips"},[e("p",[this._v("Tips："+this._s(this.tipText))])])},staticRenderFns:[]};var g=i("VU/8")({props:["tipText"]},f,!1,function(t){i("2kjH")},null,null).exports,_={data:function(){return{cityLevelList:[{label:"核心城市",citys:"北京、上海。（2个）"},{label:"重点城市",citys:"广州，成都，深圳，杭州，武汉，苏州，重庆，南京，天津，西安，沈阳，长沙，青岛，宁波，郑州，大连，厦门，济南，哈尔滨，福州。（20个）"},{label:"普通城市",citys:"除上述核心和重点城市以外的其他城市。"}]}},methods:{showCityLevelList:function(){var t={title:"城市级别列表",width:560,height:400,opacity:0,buttons:null,text:this.$refs.cityLevelList.innerHTML};erpShopApp.showDialog(t)}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("a",{staticStyle:{"font-weight":"normal","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:function(e){e.preventDefault(),t.showCityLevelList(e)}}},[t._v("城市级别列表")]),t._v(" "),i("div",{ref:"cityLevelList",staticClass:"hide"},[i("div",{staticClass:"form-horizontal",staticStyle:{"margin-top":"20px"}},t._l(t.cityLevelList,function(e,s){return i("div",{key:"cityLevelList_"+s,staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v(t._s(e.label)+"：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t"+t._s(e.citys)+"\n\t\t\t\t")])])}))])])},staticRenderFns:[]},y=i("VU/8")(_,b,!1,null,null,null).exports,C={props:["pageData"],data:function(){return{nowPageData:{promotePhone:"",contactNumber:"",agentName:"",contactName:"",shopAbbreviation:"",shopName:"",erpOrderSplitGoods:[],orderVersion:"",promoteContact:"",cityLevel:"",serviceKnow:"",packageAdditional:"",shopId:"",splitId:""},cityLevelLists:[],shopInfoKnowList:[],timer:0}},computed:{isDisabled:function(){return!(!this.pageData.followTaskDetailWrap||!this.pageData.isPromotionProposalAudit)}},components:{cityLevelList:y,tips:g},methods:{initData:function(){var t=this;d.a.get(ctx+"/diagnosis/diagnosisForm/getPreparationStageData/"+this.pageData.splitId).then(function(e){e&&e.data&&"0"===e.data.code&&(t.nowPageData=erpShopApp.extend(!0,t.nowPageData,e.data.attach),t.shopInfoKnowList=e.data.attach.shopInfoKnowList,t.cityLevelLists=e.data.attach.cityLevelList,e.data.attach.activityGoal&&-1!==e.data.attach.activityGoal.indexOf("coupons_attract_customer")&&t.$emit("addStep",1),delete t.nowPageData.cityLevelList,delete t.nowPageData.shopInfoKnowList)}),this.timer=0},pageSave:function(t){var e=this.nowPageData,i=e.cityLevel,s=e.erpOrderSplitGoods,a=e.orderId,o=e.packageAdditional,n=e.serviceKnow,r=e.splitId,l="经营诊断1（电话前准备阶段）保存失败，确定要离开吗？";if(t||i.trim()?!(!t&&!n.trim()&&(popup.tip("请选择商品产品/服务信息了解！","info"),1)):(popup.tip("请选择商户所在城市级别！","info"),!1))return Array.isArray(s)&&s.forEach(function(t){t.buyExposure=isNaN(+t.buyExposure)||t.buyExposure<0?0:t.buyExposure,t.donateExposure=isNaN(+t.donateExposure)||t.donateExposure<0?0:t.donateExposure}),new m.a(function(e,c){d.a.post(ctx+"/diagnosis/diagnosisForm/savePreparationStageData",{cityLevel:i,erpOrderSplitGoods:s,orderId:a,packageAdditional:o,serviceKnow:n,splitId:r}).then(function(i){return i&&i.data&&"0"===i.data.code?(t||popup.tip("保存成功","info"),void e(!0)):void Object(h.changeCallback)(e,1,l)}).catch(function(){Object(h.changeCallback)(e,!t,t?l:null)})})},showKnowList:function(){var t={title:"套餐曝光量",width:1090,height:650,opacity:0,buttons:null,text:'<img src="'+(ctxStatic+"/images/orderSplitGoodList.png")+'" alt="套餐曝光量" />'};erpShopApp.showDialog(t)}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step1"},[t._m(0),t._v(" "),i("tips",{attrs:{tipText:"打电话给商户前，需要提前查找相关信息，要心中有数，客户说的内容能快速反应过来，可提升专业形象及提高沟通效率。"}}),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("基本信息：")]),t._v(" "),i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("商户全称：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t\t"+t._s(t.nowPageData.shopName)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("商户简称：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t\t"+t._s(t.nowPageData.shopAbbreviation)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("所属分公司：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t\t"+t._s(t.nowPageData.agentName)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("商户联系人：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t\t"+t._s(t.nowPageData.contactName)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("商户联系电话：")]),t._v(" "),i("div",{staticClass:"controls"},[t._v("\n\t\t\t\t\t\t"+t._s(t.nowPageData.contactNumber)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[t._m(1),t._v(" "),i("div",{staticClass:"controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.nowPageData.cityLevel,expression:"nowPageData.cityLevel"}],staticStyle:{width:"300px"},attrs:{name:"cityLevelList",disabled:t.isDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.nowPageData,"cityLevel",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.cityLevelLists,function(e,s){return i("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.label))])})],2),t._v(" "),i("cityLevelList")],1)])])]),t._v(" "),i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("订单套餐信息："),i("a",{staticStyle:{"font-weight":"normal","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:function(e){e.preventDefault(),t.showKnowList(e)}}},[t._v("查看套餐购买曝光量")])]),t._v(" "),i("div",{staticClass:"info-box"},[t._l(t.nowPageData.erpOrderSplitGoods,function(e,s){return i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v(t._s(e.goodName)+"*1 -  ")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.buyExposure,expression:"goodList.buyExposure",modifiers:{number:!0}}],staticClass:"input-general",staticStyle:{width:"110px"},attrs:{type:"number",disabled:t.isDisabled,placeholder:"购买曝光量",min:"0"},domProps:{value:e.buyExposure},on:{input:function(i){i.target.composing||t.$set(e,"buyExposure",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v("  万  -  \n\t\t\t\t\t\t"),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.donateExposure,expression:"goodList.donateExposure",modifiers:{number:!0}}],staticClass:"input-general",staticStyle:{width:"110px"},attrs:{type:"number",disabled:t.isDisabled,placeholder:"赠送曝光量",min:"0"},domProps:{value:e.donateExposure},on:{input:function(i){i.target.composing||t.$set(e,"donateExposure",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v("  万\n\t\t\t\t\t")])])}),t._v(" "),i("div",{staticClass:"infotips"},[t._v("\n\t\t\t\t\t赠送曝光量请查询右侧“订单”里的备注信息，若有赠送曝光量信息请填写，如果没有为空\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"packageAdditional"},[i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"},[t._v("其他补充：")]),t._v(" "),i("div",{staticClass:"controls"},[i("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.nowPageData.packageAdditional,expression:"nowPageData.packageAdditional",modifiers:{trim:!0}}],staticClass:"input-text",staticStyle:{width:"290px",height:"50px",padding:"5px"},attrs:{disabled:t.isDisabled,placeholder:"包含补偿订单和购买客常来赠送聚引客套餐及曝光量",maxlength:"500"},domProps:{value:t.nowPageData.packageAdditional},on:{input:function(e){e.target.composing||t.$set(t.nowPageData,"packageAdditional",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])],2)]),t._v(" "),i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("商品产品/服务信息了解（大众点评）：")]),t._v(" "),i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[t._m(2),t._v(" "),i("div",{staticClass:"controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.nowPageData.serviceKnow,expression:"nowPageData.serviceKnow"}],staticStyle:{width:"300px"},attrs:{name:"cityLevelList",disabled:t.isDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.nowPageData,"serviceKnow",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.shopInfoKnowList,function(e,s){return i("option",{key:e.id,domProps:{selected:e.value===t.nowPageData.serviceKnow,value:e.value}},[t._v(t._s(e.label))])})],2)])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("经营诊断1（电话前准备阶段）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"control-label"},[this._v("商户所在城市级别："),e("span",{staticClass:"hint"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"control-label"},[this._v("商品产品/服务信息了解："),e("span",{staticClass:"hint"},[this._v("*")])])}]};var w=i("VU/8")(C,x,!1,function(t){i("8iZB")},null,null).exports,k={props:["value","isDisabled","width","index"],data:function(){return{previceList:[],provinceId:this.value.province||this.value.provinceId,provinceName:this.value.province?this.value.provinceName:"",cityList:[],cityId:this.value.city||this.value.cityId,cityName:this.value.city?this.value.cityName:"",areaList:[],areaId:this.value.area||this.value.areaId,areaName:this.value.area?this.value.areaName:""}},mounted:function(){this.getPrevice(),this.value.province&&(this.getCity(),this.getArea())},computed:{selectedObj:function(){return{province:{provinceId:this.provinceId,provinceName:this.provinceName},city:{cityId:this.cityId,cityName:this.cityName},area:{areaId:this.areaId,areaName:this.areaName}}}},watch:{value:function(t,e){u()(t)!==u()(e)&&(this.provinceId=t.province?t.province.provinceId:"",this.cityId=t.city?t.city.cityId:"",this.areaId=t.area?t.area.areaId:"")},provinceId:function(t,e){if(u()(t)!==u()(e)){var i=this;this.cityId="",this.cityName="",this.areaId="",this.areaName="",this.getCity(),this.previceList.every(function(e){return e.provinceId!=t||(i.provinceName=e.province,!1)}),this.getCity(),this.$emit("input",this.selectedObj,this.index)}},cityId:function(t,e){if(""!==t&&u()(t)!==u()(e)){var i=this;this.areaId="",this.areaName="",this.getArea(),this.cityList.every(function(e){return e.cityId!=t||(i.cityName=e.city,!1)}),this.$emit("input",this.selectedObj,this.index)}else this.cityName=""},areaId:function(t,e){if(""!==t&&u()(t)!==u()(e)){var i=this;this.areaList.every(function(e){return e.areaId!=t||(i.areaName=e.area,!1)}),this.$emit("input",this.selectedObj,this.index)}else this.cityName=""}},methods:{getPrevice:function(){var t=this;d.a.post(ctx+"/location/get-province-list").then(function(e){"0"===e.data.code&&(t.previceList=e.data.attach)})},getCity:function(){var t=this;d.a.post(ctx+"/location/get-city-list",{father:this.provinceId}).then(function(e){"0"===e.data.code&&(t.cityList=e.data.attach)})},getArea:function(){var t=this;d.a.post(ctx+"/location/get-area-list",{father:this.cityId}).then(function(e){"0"===e.data.code&&(t.areaList=e.data.attach)})}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slect-address"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.provinceId,expression:"provinceId"}],style:{width:t.width+"px"},attrs:{disabled:t.isDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.provinceId=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",disabled:""}},[t._v(" 省份 ")]),t._v(" "),t._l(t.previceList,function(e,s){return i("option",{key:e.province,domProps:{value:e.provinceId}},[t._v(" "+t._s(e.province)+" ")])})],2),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.cityId,expression:"cityId"}],style:{width:t.width+"px"},attrs:{disabled:t.isDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.cityId=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",disabled:""}},[t._v(" 市 ")]),t._v(" "),t._l(t.cityList,function(e,s){return i("option",{key:e.city,domProps:{value:e.cityId}},[t._v(" "+t._s(e.city)+" ")])})],2),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.areaId,expression:"areaId"}],style:{width:t.width+"px"},attrs:{disabled:t.isDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.areaId=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",disabled:""}},[t._v(" 区/县 ")]),t._v(" "),t._l(t.areaList,function(e,s){return i("option",{key:e.area,domProps:{value:e.areaId}},[t._v(" "+t._s(e.area)+" ")])})],2)])},staticRenderFns:[]},S=i("VU/8")(k,P,!1,null,null,null).exports,D={props:["value","startChoiceIndex","label","index","subindex","type"],watch:{value:function(t,e){this.checkedTime=t.split(":").join(" : "),this.isClick=void 0!==t&&""!==t?this.getIndex(t):null}},data:function(){return{isMove:null,isClick:this.value?this.getIndex(this.value):null,checkedTime:this.value?this.value.split(":").join(" : "):"",isShow:!1}},computed:{timeList:function(){for(var t=[],e=0;e<48;e++)t.push(e);return t}},mounted:function(){document.body.addEventListener("click",this.closeTimeList,!1)},beforeDestroy:function(){document.body.removeEventListener("click",this.closeTimeList,!1)},methods:{mouseOver:function(t){this.isMove=t},liClick:function(t){this.isClick=t,this.checkedTime=this.getTime(t);var e=this.checkedTime.replace(/\s+/g,"");this.$emit("input",e,this.index,this.subindex,this.type),this.isShow=!1},closeTimeList:function(t){var e=t.target,i=this.$el.firstChild;e.isEqualNode(i)||(this.isShow=!1)},getTime:function(t){var e=parseInt(t);return e%2==0?e/2>9?e/2+" : 00":"0"+e/2+" : 00":Math.floor(e/2)>9?Math.floor(e/2)+" : 30":"0"+Math.floor(e/2)+" : 30"},getIndex:function(t){var e=t.split(":"),i=parseInt(e[0]);return 0==parseInt(e[1])?2*i:2*i+1}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"checked-only-time",on:{click:function(e){t.isShow=!t.isShow}}},[i("div",{staticClass:"show-time",attrs:{"data-label":this.label}},[t._v("\n        "+t._s(t.checkedTime)+"\n    ")]),t._v(" "),i("div",{staticClass:"trangle"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"select-box"},[i("p",{staticClass:"choice-time"},[t._v("请选择时间")]),t._v(" "),i("ul",{staticClass:"select-list"},t._l(t.timeList,function(e,s){return i("li",{key:s,class:{"move-li":t.isMove==s,"click-li":t.isClick===s,"no-choice":s<=t.startChoiceIndex},on:{mouseover:function(e){t.mouseOver(s)},click:function(e){e.stopPropagation(),t.liClick(s)}}},[t._v("\n                "+t._s(s%2==0?s/2>9?s/2+":00":"0"+s/2+":00":Math.floor(s/2)>9?Math.floor(s/2)+":30":"0"+Math.floor(s/2)+":30")+"\n            ")])}))])])},staticRenderFns:[]};var N=i("VU/8")(D,I,!1,function(t){i("bQP2")},"data-v-685dc7ba",null).exports,A={props:["value","workdayList","label","index","subindex","type","identity"],data:function(){return{checkWeekList:[],isAllWeek:!1}},mounted:function(){this.setWeek()},computed:{workdayLists:function(){return this.workdayList}},watch:{checkWeekList:function(t,e){var i=[];t.length<7?this.isAllWeek=!1:7==t.length&&(this.isAllWeek=!0),t.forEach(function(t){i.push(t)}),this.$emit("input",this.removeVal(i).join(","),this.index,this.subindex,this.type)}},methods:{setWeek:function(){var t=this;if("[object String]"===Object.prototype.toString.call(this.value)&&this.value.length>0){var e=this.value.split(",");this.checkWeekList=[],e.forEach(function(e,i){e&&"NaN"!==e&&t.checkWeekList.push(e)})}},removeVal:function(t){if(!Array.isArray(t))return[];var e={},i=[];return t.forEach(function(t){t&&!e[t]&&(e[t]=t,i.push(t))}),i},checkWeek:function(){var t=this;if(this.isAllWeek)this.checkWeekList.splice(0,this.checkWeekList.length);else{var e=-1;this.workdayLists.forEach(function(i,s){"WholeWeek"!==i.remarks&&(e++,t.checkWeekList.splice(e,0,i.value))})}}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"check-week clearfix"},[t._l(t.workdayLists,function(e,s){return["WholeWeek"===e.remarks?[i("div",{staticClass:"fl-left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllWeek,expression:"isAllWeek"}],attrs:{type:"checkbox",id:t.index+t.subindex+t.label+t.identity+"allWeek"},domProps:{checked:Array.isArray(t.isAllWeek)?t._i(t.isAllWeek,null)>-1:t.isAllWeek},on:{click:t.checkWeek,change:function(e){var i=t.isAllWeek,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.isAllWeek=i.concat([null])):o>-1&&(t.isAllWeek=i.slice(0,o).concat(i.slice(o+1)))}else t.isAllWeek=a}}}),t._v(" "),i("label",{attrs:{for:t.index+t.subindex+t.label+t.identity+"allWeek"}},[t._v("整周")])]),t._v(" "),i("div",{staticClass:"fl-left one-line"},[t._v("\n                |\n            ")])]:[i("div",{staticClass:"fl-left day-one"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkWeekList,expression:"checkWeekList"}],attrs:{type:"checkbox",id:t.index+t.subindex+t.identity+e.id},domProps:{value:e.value,checked:Array.isArray(t.checkWeekList)?t._i(t.checkWeekList,e.value)>-1:t.checkWeekList},on:{change:function(i){var s=t.checkWeekList,a=i.target,o=!!a.checked;if(Array.isArray(s)){var n=e.value,r=t._i(s,n);a.checked?r<0&&(t.checkWeekList=s.concat([n])):r>-1&&(t.checkWeekList=s.slice(0,r).concat(s.slice(r+1)))}else t.checkWeekList=o}}}),t._v(" "),i("label",{attrs:{for:t.index+t.subindex+t.identity+e.id}},[t._v(t._s(e.label))])])]]})],2)},staticRenderFns:[]};var T=i("VU/8")(A,L,!1,function(t){i("b3FJ")},"data-v-a3e82e9c",null).exports,$={props:["value","options","selectMoreConfig","label","index"],data:function(){return{isShow:!1,selectData:this.options,checkedList:[],isAll:!1,isOver:"",isNochecked:!1,trackByName:this.selectMoreConfig.trackByName,keyName:this.selectMoreConfig.keyName}},watch:{value:function(t,e){if("[object Array]"===Object.prototype.toString.call(t)&&t.length>0){var i=this,s=[];t.forEach(function(t){s.push(t[i.trackByName])}),this.checkedList=s}},options:function(t,e){"[object Array]"===Object.prototype.toString.call(t)&&(this.selectData=t)},checkedList:function(t,e){var i=!1;if(t.length<this.selectData.length?this.isAll=!1:t.length==this.selectData.length&&(this.isAll=!0),t.length>0&&t.length==e.length?t.every(function(t,s){return t===e[s]||(i=!0,!1)}):i=!0,i){var s=this,a=[],o=this.trackByName;t.forEach(function(t){s.selectData.forEach(function(e){t.toString()===e[o].toString()&&a.push(e)})}),this.$emit("input",a,this.index)}}},computed:{checkedName:function(){var t=this,e="",i=this.trackByName;return this.checkedList.length>0&&this.selectData.length>0?(this.isNochecked=!1,this.checkedList.forEach(function(s){t.selectData.forEach(function(a){a[i].toString()===s.toString()&&(e+=a[t.keyName]+" / ")})}),e=(e=e.replace(/^\s+|\s+$/g,"")).substring(0,e.length-1)):(e=this.selectMoreConfig.placeholder?this.selectMoreConfig.placeholder:"",this.isNochecked=!0),e}},mounted:function(){if(this.value.length>0&&this.options.length>0){var t=this,e=t.trackByName,i=[];this.options.forEach(function(s){t.value.forEach(function(t){t[e].toString()===s[e].toString()&&i.push(t[e])})}),this.checkedList=i}document.body.addEventListener("click",this.closeTimeList,!1)},beforeDestroy:function(){document.body.removeEventListener("click",this.closeTimeList,!1)},methods:{allCheck:function(){if(this.isAll)this.checkedList=[];else{var t=this.trackByName,e=[];this.selectData.forEach(function(i){e.push(i[t])}),this.checkedList=e}},showSelectClick:function(){this.isShow?this.isShow=!1:this.isShow=!0},closeTimeList:function(t){var e=t.target,i=this.$el.firstChild;e.isEqualNode(i)||(this.isShow=!1)},liMove:function(t){this.isOver=t},selectClick:function(){}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"checked-time",on:{click:t.showSelectClick}},[i("div",{staticClass:"show-time",class:{"col-gay":t.isNochecked},attrs:{"data-label":this.label}},[t._v("\n        "+t._s(t.checkedName)+"\n    ")]),t._v(" "),i("div",{staticClass:"trangle"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"select-box",on:{click:function(e){e.stopPropagation(),t.selectClick(e)}}},[i("ul",{staticClass:"select-list"},[i("li",{class:{"over-li":-1===t.isOver},on:{mousemove:function(e){t.isOver=-1}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isAll,expression:"isAll"}],attrs:{type:"checkbox",name:"time"},domProps:{checked:Array.isArray(t.isAll)?t._i(t.isAll,null)>-1:t.isAll},on:{change:function(e){var i=t.isAll,s=e.target,a=!!s.checked;if(Array.isArray(i)){var o=t._i(i,null);s.checked?o<0&&(t.isAll=i.concat([null])):o>-1&&(t.isAll=i.slice(0,o).concat(i.slice(o+1)))}else t.isAll=a}}}),t._v(" "),i("label",{staticClass:"fl-left",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.allCheck(e)}}}),t._v(" "),i("span",{staticClass:"fl-left span-time"},[t._v("\n                   全部\n                ")])]),t._v(" "),t._l(t.selectData,function(e,s){return i("li",{key:e.id,staticClass:"clearfix",class:{"over-li":t.isOver===s},on:{mousemove:function(e){t.liMove(s)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:t.label+""+s},domProps:{value:e[t.trackByName],checked:Array.isArray(t.checkedList)?t._i(t.checkedList,e[t.trackByName])>-1:t.checkedList},on:{change:function(i){var s=t.checkedList,a=i.target,o=!!a.checked;if(Array.isArray(s)){var n=e[t.trackByName],r=t._i(s,n);a.checked?r<0&&(t.checkedList=s.concat([n])):r>-1&&(t.checkedList=s.slice(0,r).concat(s.slice(r+1)))}else t.checkedList=o}}}),t._v(" "),i("label",{staticClass:"fl-left",attrs:{for:t.label+""+s}}),t._v(" "),i("span",{staticClass:"fl-left span-time"},[t._v("\n                   "+t._s(e[t.keyName])+"\n                ")])])})],2)])])},staticRenderFns:[]};var U=i("VU/8")($,M,!1,function(t){i("uQuL")},"data-v-2ed02a78",null).exports,F={props:["title","type"],methods:{showCityLevelList:function(){var t=this.$refs.cityLevelList.innerHTML,e={title:this.title,width:560,height:500,opacity:0,buttons:null,text:t};erpShopApp.showDialog(e)}}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("a",{staticStyle:{"font-weight":"normal","font-size":"14px"},attrs:{href:"javascript:;"},on:{click:function(e){e.preventDefault(),t.showCityLevelList(e)}}},[t._v(t._s(t.title))]),t._v(" "),i("div",{ref:"cityLevelList",staticClass:"hide"},["age"===t.type?i("div",{staticClass:"contents"},[t._m(0)]):"lightspot"===t.type?i("div",{staticClass:"contents"},[t._m(1)]):"promoteProduct"===t.type?i("div",{staticClass:"contents"},[t._m(2)]):"activityGoal"===t.type?i("div",{staticClass:"contents"},[t._m(3)]):"activity"===t.type?i("div",{staticClass:"contents"},[t._m(4)]):"brandLightspot"===t.type?i("div",{staticClass:"contents"},[t._m(5)]):"infoList"===t.type?i("div",{staticClass:"contents"},[i("p",{staticStyle:{padding:"10px"}},[t._v("为了让我们的团队更好地策划此次推广的方案，以下资料，如果咱们店里有的话，还请尽快提供给我。资料可以是文字、图片、视频、链接等形式。")])]):i("div",{staticClass:"contents"},[t._m(6)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticStyle:{padding:"10px"}},[t._v("\n\t\t\t\t（填年龄区间）根据职业分布和人群年龄参考值，询问商户大概的用户群年龄段，不用具体到岁数，填大概的年龄段即可。"),i("br"),t._v("\n\t\t\t\t【人群的年龄参考值】："),i("br"),t._v("\n\t\t\t\t学生 12-22岁"),i("br"),t._v("\n\t\t\t\t蓝领 18-45岁"),i("br"),t._v("\n\t\t\t\t白领 22-45岁"),i("br"),t._v("\n\t\t\t\t高薪 28-55岁"),i("br"),t._v("\n\t\t\t\t退休 45-70岁"),i("br"),t._v("\n\t\t\t\t无明显特征  25-48岁"),i("br")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{padding:"10px"}},[this._v("咱们店主打的产品有哪些？"),e("br"),this._v("这些主打的产品，有什么特点，例如在原材料、制作方法、吃起来或者闻起来有哪些特色？（一个一问）"),e("br"),this._v("这些产品的特色，您有没一些资料可以发到咱们对接的群里，便于我们之后作为素材进行了解"),e("br"),this._v("如果客户不能说出来及提供产品资料，则不填\n\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{padding:"10px"}},[this._v("如果本次推广的产品或服务跟主打的一样，就不用再次问了"),e("br"),this._v("咱们店本次投放想推广的产品或服务是哪些？"),e("br"),this._v("这些要推广的产品/服务，价格是多少？"),e("br"),this._v("这些要推广的产品/服务，有哪些特点？"),e("br"),this._v("如果产品特点比较大众化的，可引导主推口碑较好的产品\n\t\t\t")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticStyle:{padding:"10px"}},[t._v("新店开业 ：开张、重新装修、更换名称、更换老板、店铺搬迁"),i("br"),t._v("节假日营销：为了庆祝XX节日（有节过节，无节造节）"),i("br"),t._v("店庆活动：店铺开了一年以上，想做类似店庆的活动"),i("br"),t._v("新品推出：更新了菜单、增加了新款式、推出了应季套餐、活动期间才有的专供品、产品的做法/工艺升级了"),i("br"),t._v("推主打/高毛利产品：想重点宣传XX产品、这个产品在店里卖得好、这个产品利润高、想多卖这些产品、来的客户喜欢用这款产品"),i("br"),t._v("去库存：产品进货比较多，但是卖不出去；换季要清仓；新款推出，旧款积压；再不卖出去就亏本了"),i("br"),t._v("会员拉新：新会员可享受此次活动的奖品；活动就是为了涨会员"),i("br"),t._v("闲时营销：每天的客流只集中在几个时段，其他时间很少人来；客流太集中，照料不过来，想分散客流；想平均每个时段都有客人过来"),i("br"),t._v("淡季营销 ：按照往年趋势，整个行业（周边）这几个月生意都不好；这个东西在这几个月都不好卖；现在是春天，要秋冬季节才是旺季")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticStyle:{padding:"10px"}},[t._v("一、咱们门店现在开业多久了呢？"),i("br"),t._v("1、XX年4月开业（临近月份），那咱这一次是要进行门店X周年庆/新店开业活动么？"),i("br"),t._v("2.1、XX年8年开业(非接下来临近月份)，那这次咱们是要做针对于XX节日的活动么？还是进行日常的营销推广？"),i("br"),t._v("2.2、日常推广的话，其实是希望推好卖的产品、新品、还是扩大非高峰时期的客流量呢？"),i("br"),t._v("二、商户表达的，可识别的需求字眼和句子"),i("br"),t._v("新店开业 ：开张、重新装修、更换名称、更换老板、店铺搬迁"),i("br"),t._v("节假日营销：为了庆祝XX节日（有节过节，无节造节）"),i("br"),t._v("店庆活动：店铺开了一年以上，想做类似店庆的活动"),i("br"),t._v("新品推出：更新了菜单、增加了新款式、推出了应季套餐、活动期间才有的专供品、产品的做法/工艺升级了"),i("br"),t._v("推主打/高毛利产品：想重点宣传XX产品、这个产品在店里卖得好、这个产品利润高、想多卖这些产品、来的客户喜欢用这款产品"),i("br"),t._v("去库存：产品进货比较多，但是卖不出去；换季要清仓；新款推出，旧款积压；再不卖出去就亏本了"),i("br"),t._v("会员拉新：新会员可享受此次活动的奖品；活动就是为了涨会员"),i("br"),t._v("闲时营销：每天的客流只集中在几个时段，其他时间很少人来；客流太集中，照料不过来，想分散客流；想平均每个时段都有客人过来"),i("br"),t._v("淡季营销 ：按照往年趋势，整个行业（周边）这几个月生意都不好；这个东西在这几个月都不好卖；现在是春天，要秋冬季节才是旺季")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{padding:"10px"}},[this._v("咱们店铺有没有一些可包装的品牌资料？例如有没一些传承了很多年的工艺，或者对外宣的传语？"),e("br"),this._v("(当客户回答“有”的时候，而且说得比较多，则引导发送给你)"),e("br"),this._v("为了便于我们快速整理咱们店铺的资料，这些品牌文化的资料，稍后还请一并发到咱们的微信对接群里。")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticStyle:{padding:"10px"}},[t._v("\n\t\t\t\t咱们门店所在的消费圈是怎样的？例如周边是否有写字楼、社区、学校、美食街这些？"),i("br"),t._v("(当客户回答“有”的时候，进一步询问有哪些)"),i("br"),t._v("咱们门店周边的写字楼是属于CBD的还是普通写字楼？"),i("br"),t._v("咱们门店周边的社区，是类似保利地产那样的高端社区呢，还是普通的小社区？"),i("br"),t._v("咱们门店周边的学校，是小学、中学，还是大学呢？"),i("br"),t._v("(当客户回答“没有”、“都不是”的时候，继续询问)"),i("br"),t._v("那咱们门店旁边是否有酒吧、商场、医院、车站、景点这些呢？"),i("br"),t._v("(当客户回答“没有”、“都不是”的时候，引导商户主动描述)"),i("br"),t._v("那咱们门店旁边的店是卖什么的、提供什么服务的呢？\n\t\t\t")])}]},O=i("VU/8")(F,E,!1,null,null,null).exports,R={props:["pageData"],data:function(){return{activityList:[],selectOccupationMoreConfig:{keyName:"label",trackByName:"id",placeholder:"选择职业"},selectMoreConfig:{keyName:"label",trackByName:"id",placeholder:"选择消费圈类型"},pageUseData:{id:"",isNewRecord:!1,createDate:"",updateDate:"",splitId:"",packageAdditional:"",serviceKnow:"",contactPerson:"",contactPhone:"",packageSelection:"",majorProduct:"",promoteProduct:"",activityRequirements:"",activityGoal:"",brandLightspot:"",originalityCulture:"",diagnosisContentAdditional:"",referenceMaterial:"",mainPush:"",backupFirst:"",backupSecond:"",pushArea:"",shopUsername:"",shopPassword:"",firstPropagandaContent:"",secondPropagandaContent:"",promotionStoreNum:1,diagnosisStoreInfos:[],activityRequirementsList:[],activityGoalList:[],diagnosisDiscounts:[],erpOrderSplitGoods:[]},diagnosisStoreInfos:[],diagnosisDiscounts:[],activityRequirementsList:[],activityGoalList:[],activityGoalVal:"",timer:0,storeAdressObj:{},erpOrderSplitGoods:[]}},components:{checkedTime:N,checkWeek:T,selectMore:U,selectAddress:S,cityLevelList:y,contentTip:O,tips:g},computed:{isDisabled:function(){return!!this.pageData.followTaskDetailWrap||this.pageData.isPromotionProposalAudit},datas:function(){return this.pageUseData},storeInfos:function(){return this.diagnosisStoreInfos},discounts:function(){return this.diagnosisDiscounts}},methods:{numFormat:function(t,e){var i=e||1e4;return t>i?(t/i).toFixed(1)+"万":t},initData:function(){var t=this;d.a.get(ctx+"/diagnosis/diagnosisForm/byPhone/"+this.pageData.splitId).then(function(e){if(e&&e.data&&"0"===e.data.code){t.activityRequirementsList.splice(0,t.activityRequirementsList.length+1),t.activityGoalList.splice(0,t.activityGoalList.length+1),t.pageUseData=erpShopApp.extend(!0,t.pageUseData,e.data.attach),t.diagnosisDiscounts=e.data.attach.diagnosisDiscounts||[],Array.isArray(e.data.attach.activityGoalList)&&e.data.attach.activityGoalList.forEach(function(e,i){e.checked&&t.activityGoalList.push(e.value)}),Array.isArray(e.data.attach.activityRequirementsList)&&e.data.attach.activityRequirementsList.forEach(function(e,i){e.checked&&t.activityRequirementsList.push(e.id)}),Array.isArray(e.data.attach.erpOrderSplitGoods)&&e.data.attach.erpOrderSplitGoods.forEach(function(e,i){e.checked&&t.erpOrderSplitGoods.push(e.id)}),t.pageUseData.packageSelection=[];var i=e.data.attach.diagnosisStoreInfos;if(Array.isArray(i))for(var s=0;s<i.length;s++){i[s].odList=[],i[s].consumptionTypess=[],i[s].erpStoreInfo.hasOwnProperty("telephone")||(i[s].erpStoreInfo.telephone="");for(var a=0,o=i[s].consumptionAreaList.length;a<o;a++)if(i[s].consumptionAreaList[a].checked){i[s].consumptionArea=i[s].consumptionAreaList[a].id;break}for(var n=0,r=i[s].consumptionTypesList.length;n<r;n++)i[s].consumptionTypesList[n].checked&&i[s].consumptionTypess.push(i[s].consumptionTypesList[n]);for(var l=0,c=i[s].genderDistributionList.length;l<c;l++){if(i[s].genderDistributionList[l].checked){i[s].genderDistribution=i[s].genderDistributionList[l].id;break}i[s].genderDistribution=""}for(var d=0,p=i[s].occupationDistributionsList.length;d<p;d++)i[s].occupationDistributionsList[d].checked&&i[s].odList.push(i[s].occupationDistributionsList[d])}t.diagnosisStoreInfos=i}}),this.timer=0},pageSave:function(t){var e=this.datas,i=e.brandLightspot,s=e.contactPerson,a=e.contactPhone,n=e.majorProduct,r=e.originalityCulture,l=e.promoteProduct,c=e.splitId,p=this.storeInfos,u=this.discounts,v=this.erpOrderSplitGoods.join(","),f=this.activityGoalList.join(","),g=this.activityRequirementsList.join(",");if(p.forEach(function(t,e){var i=t,s=[],a=[];t.tableAvgPriceMin=isNaN(t.tableAvgPersonNumMin*t.personAvgPriceMin)?0:t.tableAvgPersonNumMin*t.personAvgPriceMin,t.tableAvgPriceMax=isNaN(t.tableAvgPersonNumMax*t.personAvgPriceMax)?0:t.tableAvgPersonNumMax*t.personAvgPriceMax,t.personAvgPriceMax=isNaN(t.personAvgPriceMax)||!t.personAvgPriceMax?0:t.personAvgPriceMax,t.personAvgPriceMin=isNaN(t.personAvgPriceMin)||!t.personAvgPriceMin?0:t.personAvgPriceMin,Array.isArray(t.consumptionTypess)&&t.consumptionTypess.length&&t.consumptionTypess.forEach(function(t){s.push(t.id)}),Array.isArray(t.odList)&&t.odList.length&&t.odList.forEach(function(t){a.push(t.id)}),Array.isArray(t.normalBusinessHours)&&t.normalBusinessHours.forEach(function(t){t.storeInfoId=i.storeInfoId,t.endTimeStr=t.endTimeStr?t.endTimeStr:"",t.startTimeStr=t.startTimeStr?t.startTimeStr:"",t.workdays=t.workdays?t.workdays:""}),Array.isArray(t.peakBusinessHours)&&t.peakBusinessHours.forEach(function(t){t.storeInfoId=i.storeInfoId,t.endTimeStr=t.endTimeStr?t.endTimeStr:"",t.startTimeStr=t.startTimeStr?t.startTimeStr:"",t.workdays=t.workdays?t.workdays:""}),t.consumptionTypes=s.join(","),t.occupationDistributions=a.join(","),t.genderDistribution=t.genderDistribution?t.genderDistribution:""}),Array.isArray(this.datas.erpOrderSplitGoods))for(var _=0,b=this.datas.erpOrderSplitGoods.length;_<b;_++)-1!==this.erpOrderSplitGoods.indexOf(this.datas.erpOrderSplitGoods[_].id)?this.datas.erpOrderSplitGoods[_].checked=!0:this.datas.erpOrderSplitGoods[_].checked=!1;var y={activityGoal:f,activityRequirements:g,brandLightspot:i,contactPerson:s,contactPhone:a,majorProduct:n,originalityCulture:r,packageSelection:v,promoteProduct:l,splitId:c,diagnosisStoreInfos:p,diagnosisDiscounts:u};if(function(t){if(t)return!0;if(!y.contactPerson)return popup.tip("请填写本次推广联系人！","info"),!1;if(!/\d{3}-\d{8}|\d{4}-\{7,8}/.test(y.contactPhone)&&!/^[13|14|15|16|17|18|19]+\d{9}$/.test(y.contactPhone))return popup.tip("请正确填写本次推广联系人电话！","info"),!1;for(var e=0,i=y.diagnosisStoreInfos.length;e<i;e++){var s=y.diagnosisStoreInfos[e];if(s.erpStoreInfo.telephone.trim()&&!/\d{3}-\d{8}|\d{4}-\{7,8}/.test(s.erpStoreInfo.telephone)&&!/^[13|14|15|16|17|18|19]+\d{9}$/.test(s.erpStoreInfo.telephone))return popup.tip("门店联系方式错误！","info"),!1;if(!s.consumptionArea)return popup.tip("请选择商圈位置！","info"),!1;if(!s.consumptionTypes)return popup.tip("请选择消费圈类型！","info"),!1;for(var a=0,o=s.normalBusinessHours.length;a<o;a++){var n=s.normalBusinessHours[a];if(!n.workdays.trim()||!n.endTimeStr.trim()||!n.startTimeStr.trim())return popup.tip("请选择营业时间！","info"),!1}if(s.personAvgPriceMax<=0||s.personAvgPriceMin<=0)return popup.tip("请填写人均客单价！","info"),!1;if(!s.genderDistribution)return popup.tip("请选择性别分布！","info"),!1;if(!s.ageDistributionMax||!s.ageDistributionMin)return popup.tip("请选择年龄分布！","info"),!1}return y.activityRequirements?!!y.activityGoal||(popup.tip("请选择1个活动目的！","info"),!1):(popup.tip("请选择1—3个活动主题/推广需求！","info"),!1)}(t)){var C="经营诊断2（电话诊断阶段）保存失败，确定要离开吗？";return new m.a(function(e,i){d.a.post(ctx+"/diagnosis/diagnosisForm/byPhone",o()({},y)).then(function(i){return i&&i.data&&"0"===i.data.code?(t||popup.tip("保存成功","info"),void e(!0)):void Object(h.changeCallback)(e,1,C)}).catch(function(){Object(h.changeCallback)(e,!t,t?C:null)})})}},selectCityLevelHandler:function(t,e){var i=this.storeInfos,s=this.datas.shopCityLevel;!s||isNaN(Number(s))?showInfoTip("经营诊断1页面中，商户所在城市级别未选择，请先完成前面的选择",1,function(){i[e].cityLevel=""}):t&&!isNaN(Number(t))&&Number(t)>Number(s)&&showInfoTip("本次推广城市级别高于商户所在城市级别，请联系商户和销售协商解决",0,function(){i[e].cityLevel=""})},setAdress:function(t,e){this.storeAdressObj[e]=t,this.diagnosisStoreInfos[e].erpStoreInfo.area=t.area.areaId,this.diagnosisStoreInfos[e].erpStoreInfo.areaName=t.area.areaName,this.diagnosisStoreInfos[e].erpStoreInfo.city=t.city.cityId,this.diagnosisStoreInfos[e].erpStoreInfo.cityName=t.city.cityName,this.diagnosisStoreInfos[e].erpStoreInfo.province=t.province.provinceId,this.diagnosisStoreInfos[e].erpStoreInfo.provinceName=t.province.provinceName},hoursChange:function(t,e,i,s){this.diagnosisStoreInfos[e][s][i].workdays=t},timeStrChange:function(t,e,i,s){this.diagnosisStoreInfos[e][s.split(",")[0]][i][s.split(",")[1]]=t},addBusinessTime:function(t){this.isDisabled||this.diagnosisStoreInfos[t].normalBusinessHours.push({startTimeStr:"",endTimeStr:"",businessType:"normal",workdays:"",storeInfoId:this.diagnosisStoreInfos[t].erpStoreInfo.id,workdayList:this.diagnosisStoreInfos[t].normalBusinessHours[0].workdayList})},delBusinessTime:function(t,e){if(!this.isDisabled){var i=this;i.diagnosisStoreInfos[t].normalBusinessHours.length<=1||(popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:"确定删除此营业时间段？",confirmCallBack:function(){i.diagnosisStoreInfos[t].normalBusinessHours.splice(e,1)}}))}},addPeakDate:function(t){this.isDisabled||this.diagnosisStoreInfos[t].peakBusinessHours.push({startTimeStr:"",endTimeStr:"",businessType:"peak",workdays:"",storeInfoId:this.diagnosisStoreInfos[t].erpStoreInfo.id,workdayList:this.diagnosisStoreInfos[t].peakBusinessHours[0].workdayList})},delPeakDate:function(t,e){if(!this.isDisabled){var i=this;this.diagnosisStoreInfos[t].peakBusinessHours.length<=1||(popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:"确定删除此高峰时间段？",confirmCallBack:function(){i.diagnosisStoreInfos[t].peakBusinessHours.splice(e,1)}}))}},addActivity:function(){this.isDisabled||this.diagnosisDiscounts.push({title:"",content:"",splitId:this.diagnosisDiscounts.length?this.diagnosisDiscounts[0].splitId:this.datas.splitId})},delActivity:function(t){if(!this.isDisabled){var e=this;e.diagnosisDiscounts.length<=1||(popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:"确定删除此活动案例？",confirmCallBack:function(){e.diagnosisDiscounts.splice(t,1)}}))}},changeActivity:function(t,e){"coupons_attract_customer"===t&&(-1!==e.indexOf("coupons_attract_customer")?this.$emit("addStep",1):this.$emit("addStep",0))}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step2"},[t._m(0),t._v(" "),i("tips",{attrs:{tipText:"建议在此阶段打开地图，查看商户门店所在周边情况。"}}),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("推广对接人联系信息：")]),t._v(" "),i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("本次推广联系人：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.datas.contactPerson,expression:"datas.contactPerson",modifiers:{trim:!0}}],attrs:{type:"text",disabled:t.isDisabled},domProps:{value:t.datas.contactPerson},on:{input:function(e){e.target.composing||t.$set(t.datas,"contactPerson",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("本次推广联系人电话：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.datas.contactPhone,expression:"datas.contactPhone",modifiers:{trim:!0}}],attrs:{type:"text",disabled:t.isDisabled},domProps:{value:t.datas.contactPhone},on:{input:function(e){e.target.composing||t.$set(t.datas,"contactPhone",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("本次推广套餐选择：")]),t._v(" "),i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("本次推广套餐选择：")]),t._v(" "),i("div",{staticClass:"controls"},[i("ul",{staticClass:"split-goods-item"},t._l(t.datas.erpOrderSplitGoods,function(e,s){return i("li",{key:"splitgoods_"+s,staticClass:"list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.erpOrderSplitGoods,expression:"erpOrderSplitGoods"}],attrs:{type:"checkbox",name:"splitGoods",id:"goods_"+s},domProps:{value:e.id,checked:Array.isArray(t.erpOrderSplitGoods)?t._i(t.erpOrderSplitGoods,e.id)>-1:t.erpOrderSplitGoods},on:{change:function(i){var s=t.erpOrderSplitGoods,a=i.target,o=!!a.checked;if(Array.isArray(s)){var n=e.id,r=t._i(s,n);a.checked?r<0&&(t.erpOrderSplitGoods=s.concat([n])):r>-1&&(t.erpOrderSplitGoods=s.slice(0,r).concat(s.slice(r+1)))}else t.erpOrderSplitGoods=o}}}),t._v(" "),i("label",{attrs:{for:"goods_"+s}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.packageInfo)+"\n\t\t\t\t\t\t\t\t")])])}))])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("其他补充：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.datas.packageAdditional,expression:"datas.packageAdditional"}],attrs:{type:"text",disabled:!0},domProps:{value:t.datas.packageAdditional},on:{input:function(e){e.target.composing||t.$set(t.datas,"packageAdditional",e.target.value)}}})])])]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("本次推广的门店数："+t._s(t.datas.promotionStoreNum))]),t._v(" "),i("div",{staticClass:"storeInfos"},t._l(t.storeInfos,function(e,s){return i("div",{key:"stroes_"+s,staticClass:"store-item"},[i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("名店名称：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.erpStoreName,expression:"stores.erpStoreName"}],attrs:{type:"text",disabled:!0},domProps:{value:e.erpStoreName},on:{input:function(i){i.target.composing||t.$set(e,"erpStoreName",i.target.value)}}})])]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("地址和联系方式：")]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("推广门店地址：")]),t._v(" "),i("div",{staticClass:"controls"},[i("div",{staticClass:"city"},[i("selectAddress",{attrs:{value:e.erpStoreInfo,isDisabled:t.isDisabled,width:180,index:s},on:{input:t.setAdress}})],1),t._v(" "),i("div",{staticClass:"address"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.erpStoreInfo.address,expression:"stores.erpStoreInfo.address"}],attrs:{type:"text",disabled:t.isDisabled},domProps:{value:e.erpStoreInfo.address},on:{input:function(i){i.target.composing||t.$set(e.erpStoreInfo,"address",i.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("推广门店联系方式：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.erpStoreInfo.telephone,expression:"stores.erpStoreInfo.telephone"}],attrs:{type:"text",disabled:t.isDisabled},domProps:{value:e.erpStoreInfo.telephone},on:{input:function(i){i.target.composing||t.$set(e.erpStoreInfo,"telephone",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("推广门店城市级别：")]),t._v(" "),i("div",{staticClass:"controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.cityLevel,expression:"stores.cityLevel"}],ref:"storesCityLevel",refInFor:!0,attrs:{name:"cityLevelList",disabled:t.isDisabled},on:{change:[function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"cityLevel",i.target.multiple?s:s[0])},function(i){t.selectCityLevelHandler(e.cityLevel,s)}]}},[i("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(e.cityLevels,function(e,a){return i("option",{key:s+"sd"+e.value,domProps:{value:e.value}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.label)+"\n\t\t\t\t\t\t\t\t\t")])})],2),t._v(" "),i("cityLevelList")],1)]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("门店经营信息：")]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("消费圈位置：")]),t._v(" "),i("div",{staticClass:"controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.consumptionArea,expression:"stores.consumptionArea"}],attrs:{disabled:t.isDisabled},on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"consumptionArea",i.target.multiple?s:s[0])}}},[i("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(e.consumptionAreaList,function(e,s){return i("option",{key:"area_"+s,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("消费圈类型：")]),t._v(" "),i("div",{staticClass:"controls",staticStyle:{"overflow-y":"visible","overflow-x":"visible"}},[i("select-more",{attrs:{"is-disabled":t.isDisabled,options:e.consumptionTypesList,"select-more-config":t.selectMoreConfig,label:s+"consume",index:s},model:{value:e.consumptionTypess,callback:function(i){t.$set(e,"consumptionTypess",i)},expression:"stores.consumptionTypess"}}),t._v(" "),i("contentTip",{attrs:{title:"参考话术"}})],1)]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("交通引导：")]),t._v(" "),i("div",{staticClass:"controls"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.trafficGuide,expression:"stores.trafficGuide"}],attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:e.trafficGuide},on:{input:function(i){i.target.composing||t.$set(e,"trafficGuide",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("营业时间：")]),t._v(" "),i("div",{staticClass:"controls check-time"},[i("ul",{staticClass:"businessDate"},t._l(e.normalBusinessHours,function(a,o){return i("li",{key:"normalBusinessHours"+o},[i("check-week",{attrs:{"is-disabled":t.isDisabled,workdayList:a.workdayList,label:s+"bussinesTime"+o,index:s,subindex:o,type:"normalBusinessHours",identity:"normal"},on:{input:t.hoursChange},model:{value:a.workdays,callback:function(e){t.$set(a,"workdays",e)},expression:"val.workdays"}}),t._v(" "),i("div",{staticClass:"clearfix"},[i("div",{staticClass:"fl-left mar-right time-box"},[i("checked-time",{attrs:{"is-disabled":t.isDisabled,label:s+"checkStartTime"+o,index:s,subindex:o,type:"normalBusinessHours,startTimeStr"},on:{input:t.timeStrChange},model:{value:a.startTimeStr,callback:function(e){t.$set(a,"startTimeStr",e)},expression:"val.startTimeStr"}})],1),t._v(" "),i("div",{staticClass:"fl-left mar-right time-box"},[i("checked-time",{attrs:{"is-disabled":t.isDisabled,label:s+"checkEndTime"+o,index:s,subindex:o,type:"normalBusinessHours,endTimeStr"},on:{input:t.timeStrChange},model:{value:a.endTimeStr,callback:function(e){t.$set(a,"endTimeStr",e)},expression:"val.endTimeStr"}})],1),t._v(" "),i("div",{staticClass:"fl-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.normalBusinessHours.length&&e.normalBusinessHours.length>1,expression:"stores.normalBusinessHours.length && stores.normalBusinessHours.length>1"}],staticClass:"del-btn fl-left",on:{click:function(e){t.delBusinessTime(s,o)}}},[t._v("删除此营业时间段")])])])],1)})),t._v(" "),i("div",{staticClass:"add-btn fl-left",on:{click:function(e){e.stopPropagation(),t.addBusinessTime(s)}}},[t._v("添加营业时间段")])])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("高峰时间段：")]),t._v(" "),i("div",{staticClass:"controls check-time"},[i("ul",{staticClass:"businessDate"},t._l(e.peakBusinessHours,function(a,o){return i("li",{key:"peakBusinessHours"+o},[i("check-week",{attrs:{"is-disabled":t.isDisabled,workdayList:a.workdayList,label:s+"peakDate"+o,index:s,subindex:o,type:"peakBusinessHours",identity:"peak"},on:{input:t.hoursChange},model:{value:a.workdays,callback:function(e){t.$set(a,"workdays",e)},expression:"val.workdays"}}),t._v(" "),i("div",{staticClass:"clearfix"},[i("div",{staticClass:"fl-left mar-right time-box"},[i("checked-time",{attrs:{"is-disabled":t.isDisabled,label:s+"peakStartTime"+o,index:s,subindex:o,type:"peakBusinessHours,startTimeStr"},on:{input:t.timeStrChange},model:{value:a.startTimeStr,callback:function(e){t.$set(a,"startTimeStr",e)},expression:"val.startTimeStr"}})],1),t._v(" "),i("div",{staticClass:"fl-left time-box mar-right clearfix"},[i("checked-time",{attrs:{"is-disabled":t.isDisabled,label:s+"peakEndTime"+o,index:s,subindex:o,type:"peakBusinessHours,endTimeStr"},on:{input:t.timeStrChange},model:{value:a.endTimeStr,callback:function(e){t.$set(a,"endTimeStr",e)},expression:"val.endTimeStr"}})],1),t._v(" "),i("div",{staticClass:"fl-left"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.peakBusinessHours.length&&e.peakBusinessHours.length>1,expression:"stores.peakBusinessHours.length && stores.peakBusinessHours.length>1"}],staticClass:"del-btn fl-left",on:{click:function(e){t.delPeakDate(s,o)}}},[t._v("删除此高峰时间段")])])])],1)})),t._v(" "),i("div",{staticClass:"add-btn fl-left",on:{click:function(e){t.addPeakDate(s)}}},[t._v("添加高峰时间段")])])]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("桌均和客单价（餐饮行业必填，定优惠力度参考）：")]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("人均客单价：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.personAvgPriceMin,expression:"stores.personAvgPriceMin",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,min:"1"},domProps:{value:e.personAvgPriceMin},on:{input:function(i){i.target.composing||t.$set(e,"personAvgPriceMin",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.personAvgPriceMax,expression:"stores.personAvgPriceMax",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,min:"1"},domProps:{value:e.personAvgPriceMax},on:{input:function(i){i.target.composing||t.$set(e,"personAvgPriceMax",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:""!==e.personAvgPriceMin&&""!==e.personAvgPriceMax&&e.personAvgPriceMin>e.personAvgPriceMax,expression:"stores.personAvgPriceMin !== '' && stores.personAvgPriceMax !== '' && stores.personAvgPriceMin > stores.personAvgPriceMax"}],staticClass:"err-info"},[t._v("结束值要大于或等于开始值")])])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("桌均人数：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.tableAvgPersonNumMin,expression:"stores.tableAvgPersonNumMin",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,min:"1"},domProps:{value:e.tableAvgPersonNumMin},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPersonNumMin",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.tableAvgPersonNumMax,expression:"stores.tableAvgPersonNumMax",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,min:"1"},domProps:{value:e.tableAvgPersonNumMax},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPersonNumMax",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:""!==e.tableAvgPersonNumMin&&""!==e.tableAvgPersonNumMax&&e.tableAvgPersonNumMin>e.tableAvgPersonNumMax,expression:"stores.tableAvgPersonNumMin !== '' && stores.tableAvgPersonNumMax !== '' && stores.tableAvgPersonNumMin > stores.tableAvgPersonNumMax"}],staticClass:"err-info"},[t._v("结束值要大于或等于开始值")])])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("桌均客单价：")]),t._v(" "),i("div",{staticClass:"controls clearfix"},[i("label",{staticClass:"price-table fl-left"},[t._v(t._s(isNaN(e.tableAvgPersonNumMin*e.personAvgPriceMin)?0:e.tableAvgPersonNumMin*e.personAvgPriceMin))]),t._v(" "),i("span",{staticClass:"fl-left price-span"},[t._v("——")]),t._v(" "),i("label",{staticClass:"price-table fl-left"},[t._v(t._s(isNaN(e.tableAvgPersonNumMax*e.personAvgPriceMax)?0:e.tableAvgPersonNumMax*e.personAvgPriceMax))])])]),t._v(" "),i("p",{staticClass:"title-info"},[t._v("客户属性：")]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("性别分布：")]),t._v(" "),i("div",{staticClass:"controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.genderDistribution,expression:"stores.genderDistribution"}],attrs:{disabled:t.isDisabled},on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"genderDistribution",i.target.multiple?s:s[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(e.genderDistributionList,function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.label)+"\n\t\t\t\t\t\t\t\t\t")])})],2)])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"},[t._v("职业分布：")]),t._v(" "),i("div",{staticClass:"controls check-time"},[i("select-more",{attrs:{"is-disabled":t.isDisabled,options:e.occupationDistributionsList,"select-more-config":t.selectOccupationMoreConfig,label:s+"profession",index:s},model:{value:e.odList,callback:function(i){t.$set(e,"odList",i)},expression:"stores.odList"}})],1)]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("年龄分布：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.ageDistributionMin,expression:"stores.ageDistributionMin",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,placeholder:"年龄",min:"1"},domProps:{value:e.ageDistributionMin},on:{input:function(i){i.target.composing||t.$set(e,"ageDistributionMin",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("span",{staticClass:"horizontal-line"},[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.ageDistributionMax,expression:"stores.ageDistributionMax",modifiers:{number:!0}}],staticClass:"input-short",attrs:{type:"number",disabled:t.isDisabled,placeholder:"年龄",min:"1"},domProps:{value:e.ageDistributionMax},on:{input:function(i){i.target.composing||t.$set(e,"ageDistributionMax",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("contentTip",{attrs:{title:"参考话术",type:"age"}}),t._v(" "),t._m(2,!0)],1)])])])}))])]),t._v(" "),t._m(3),t._v(" "),i("div",{staticClass:"brand-lightspot"},[i("div",{staticClass:"base-info"},[i("div",{staticClass:"lightspot-title title-info"},[t._v("（1）主打产品/服务特色："),i("contentTip",{attrs:{title:"参考话术",type:"lightspot"}})],1),t._v(" "),i("p",[t._v("产品名称、价格优势、特点（原材料、制作工艺、闻听吃触摸的体验感等）")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.majorProduct,expression:"datas.majorProduct"}],staticClass:"promote-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.majorProduct},on:{input:function(e){e.target.composing||t.$set(t.datas,"majorProduct",e.target.value)}}}),t._v(" "),i("p",{staticClass:"grayword"},[t._v("如无特色可不填写。如特色太多可在群里收集资料，电话后整理进来。如： 1、遇见牛排：严选一头牛第6至第8对肋骨的六块牛排，用数十种中西香料腌浸2天2夜，250℃高温烘烤一个半小时，全熟且鲜嫩多汁。2、最喜牛腩：选用新西兰天然草饲牛，这里环境优越，从未发生过疯牛病。牛腩块富含肌肉纤维，脂肪含量更低，肉质紧密结实，油花嫩筋浓香可口，好吃不怕胖，适合全家食用。")]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("（2）本次推广的产品/服务特色："),i("contentTip",{attrs:{title:"参考话术",type:"promoteProduct"}})],1),t._v(" "),i("p",[t._v("（如本次推广的就是主打产品/服务，则该模块无需填写）")]),t._v(" "),i("p",[t._v("产品名称、价格优势、特点（原材料、制作工艺、闻听吃触摸的体验感等）")]),t._v(" "),i("div",{staticClass:"textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.promoteProduct,expression:"datas.promoteProduct"}],staticClass:"promote-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.promoteProduct},on:{input:function(e){e.target.composing||t.$set(t.datas,"promoteProduct",e.target.value)}}})]),t._v(" "),i("p",{staticClass:"grayword"},[t._v("如无特色可不填写。如：本次投放主推纯天然植物精华面膜，99元一盒，原材料来自海拔5000米的高原，添加保加利亚的玫瑰花精粹，水润修护干燥、粗糙、暗黄，敷后焕发令人心动的雪肌。")]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("（3）以往及进行中的优惠内容：")]),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[t._l(t.discounts,function(e,s){return i("div",{key:"diagnosis"+s,staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("优惠标题：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"diagnosis.title"}],staticClass:"input-short",attrs:{type:"text",disabled:t.isDisabled},domProps:{value:e.title},on:{input:function(i){i.target.composing||t.$set(e,"title",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label hint"},[t._v("优惠详情及活动效果：")]),t._v(" "),i("div",{staticClass:"controls"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"diagnosis.content"}],staticClass:"diagnosis-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:e.content},on:{input:function(i){i.target.composing||t.$set(e,"content",i.target.value)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.discounts.length&&t.discounts.length>1,expression:"discounts.length && discounts.length>1"}],staticClass:"del-btn",staticStyle:{"margin-top":"6px"},on:{click:function(e){t.delActivity(s)}}},[t._v("删除此活动案例")])])])])}),t._v(" "),i("div",{staticClass:"control-group no-bor"},[i("div",{staticClass:"control-label"}),t._v(" "),i("div",{staticClass:"controls"},[t._m(4),t._v(" "),i("div",{staticClass:"add-btn",on:{click:t.addActivity}},[t._v("添加活动案例")])])])],2),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("（4）本次活动主题和目的：")]),t._v(" "),i("div",{staticClass:"lightspot-title title-info hint"},[t._v("活动主题/推广需求（选择1-3个）："),i("contentTip",{attrs:{title:"参考话术",type:"activity"}})],1),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"}),t._v(" "),i("div",{staticClass:"controls"},[i("ul",{staticClass:"activityRequirementsList clearfix"},t._l(t.datas.activityRequirementsList,function(e){return i("li",{key:e.id,staticClass:"fl-left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activityRequirementsList,expression:"activityRequirementsList"}],attrs:{type:"checkbox",disabled:t.isDisabled},domProps:{value:e.id,checked:Array.isArray(t.activityRequirementsList)?t._i(t.activityRequirementsList,e.id)>-1:t.activityRequirementsList},on:{change:function(i){var s=t.activityRequirementsList,a=i.target,o=!!a.checked;if(Array.isArray(s)){var n=e.id,r=t._i(s,n);a.checked?r<0&&(t.activityRequirementsList=s.concat([n])):r>-1&&(t.activityRequirementsList=s.slice(0,r).concat(s.slice(r+1)))}else t.activityRequirementsList=o}}}),t._v(" "),i("span",[t._v(" "+t._s(e.label)+" ")])])}))])])]),t._v(" "),t._m(5)]),t._v(" "),i("div",{staticClass:"lightspot-title title-info hint"},[t._v("活动目的（建议只选1个）："),i("contentTip",{attrs:{title:"可识别的需求字眼和句子",type:"activityGoal"}})],1),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"info-box"},[i("div",{staticClass:"control-group no-bor"},[i("label",{staticClass:"control-label"}),t._v(" "),i("div",{staticClass:"controls"},[i("ul",{staticClass:"activityRequirementsList clearfix"},t._l(t.datas.activityGoalList,function(e){return i("li",{key:e.id,staticClass:"fl-left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.activityGoalList,expression:"activityGoalList"}],attrs:{type:"checkbox",disabled:t.isDisabled},domProps:{value:e.value,checked:Array.isArray(t.activityGoalList)?t._i(t.activityGoalList,e.value)>-1:t.activityGoalList},on:{change:[function(i){var s=t.activityGoalList,a=i.target,o=!!a.checked;if(Array.isArray(s)){var n=e.value,r=t._i(s,n);a.checked?r<0&&(t.activityGoalList=s.concat([n])):r>-1&&(t.activityGoalList=s.slice(0,r).concat(s.slice(r+1)))}else t.activityGoalList=o},function(i){t.changeActivity(e.value,t.activityGoalList)}]}}),t._v(" "),i("span",[t._v(" "+t._s(e.label)+" ")])])}))])])]),t._v(" "),t._m(6)]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("（5）品牌文化亮点："),i("contentTip",{attrs:{title:"参考话术",type:"brandLightspot"}})],1),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("品牌亮点：")]),t._v(" "),t._m(7),t._v(" "),i("div",{staticClass:"textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.brandLightspot,expression:"datas.brandLightspot"}],staticClass:"promote-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.brandLightspot},on:{input:function(e){e.target.composing||t.$set(t.datas,"brandLightspot",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("创意文化：")]),t._v(" "),i("p",[t._v("门店鲜明的主题、该主题的详细描述（店铺装饰、桌椅、餐具、服务人员衣着、特色服务）")]),t._v(" "),i("div",{staticClass:"textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.originalityCulture,expression:"datas.originalityCulture"}],staticClass:"promote-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.originalityCulture},on:{input:function(e){e.target.composing||t.$set(t.datas,"originalityCulture",e.target.value)}}})]),t._v(" "),t._m(8)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("经营诊断2（电话诊断阶段）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step-title"},[e("h4",[this._v("1、商户基础属性及顾客属性诊断")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grayword"},[t._v("（填年龄区间）根据职业分布和人群年龄参考值，询问商户大概的用户群年龄段，不用具体到岁数，填大概的年龄段即可。"),i("br"),t._v("【人群的年龄参考值】："),i("br"),t._v("学生 12-22岁"),i("br"),t._v("蓝领 18-45岁"),i("br"),t._v("白领 22-45岁"),i("br"),t._v("高薪 28-55岁"),i("br"),t._v("退休 45-70岁"),i("br"),t._v("无明显特征  25-48岁")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step-title"},[e("h4",[this._v("2、营销亮点及营销需求诊断")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"grayword"},[this._v("询问活动时间、线上/线下方式、优惠内容和力度、活动效果（好/中/差）如："),e("br"),this._v("优惠内容标题：（可按商户的活动形式提炼出来）如：情人节满2件享75折活动、新店开业大促活动、女生节买满送活动……"),e("br"),this._v("优惠详细内容及活动效果：2月1日-2月10日，门店物料及派单的方式，凡到本店购买2件及以上正价产品，即享受75折优惠，卖完即止，先到先得。活动效果比较好。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"grayword"},[this._v("【识别需求的顺序】"),e("br"),this._v("1、在交谈中，可识别商户主动提及的：新店开业、节假日营销、店庆活动、淡季、闲时"),e("br"),this._v("2、询问、引导、沟通，商户是否要做新品推出、推主打/高毛利产品、去库存，明确重点宣传的东西"),e("br"),this._v("3、不主动提及让商户做 会员拉新")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"grayword"},[this._v("【活动目的选择顺序】"),e("br"),this._v("1、优先推荐选择优惠劵派发，并与商户沟通。商户同意的，就选此目的。不同意的，进行询问及引导"),e("br"),this._v("2、询问商户得知想弄纯曝光、关注公众号/微博的，视情况接受商户的想法"),e("br"),this._v("3、询问商户得知想弄报名"),e("br"),this._v("4、询问商户得知想弄优惠劵派发+另一项活动目的的，强烈建议商户不要做两种")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("品牌故事/品牌历史（举例：祖传18代、清朝流传至今）"),e("br"),this._v("品牌影响力范围（举例：全国连锁品牌、广州知名品牌）"),e("br"),this._v("品牌授权/特许（举例：xx服装特许经营店）"),e("br"),this._v("品牌吉祥物/图标"),e("br"),this._v("品牌口碑（举例：龙洞区域够地道的潮汕小吃）"),e("br"),this._v("品牌标语/口号（举例：怕上火喝王老吉）"),e("br"),this._v("品牌代言人")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"grayword"},[this._v("特定时代的主题：三国时代"),e("br"),this._v("特定地域的主题：湘西土家族风格、泰国风格"),e("br"),this._v("特定的文化艺术：海贼王、麻将火锅（菜品麻将样式、菜名是麻将菜名、墙面有麻将物料装饰）"),e("br"),this._v("宗教信仰/神话传说：佛学文化主题"),e("br"),this._v("特色服务：驻唱互动、表演互动、等位时送小吃、服务人员提供餐桌旁烤肉、拌饭的服务")])}]};var j=i("VU/8")(R,B,!1,function(t){i("Ck2n")},null,null).exports,W={props:["pageData"],data:function(){return{NumberComparison:{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},canCommit:!0,pageUseData:{brandLightspot:"",diagnosisContentAdditional:"",referenceMaterial:"",diagnosisStoreInfos:[],industryAttributes:[]},propertyItem:[],timer:0}},computed:{isDisabled:function(){return!!this.pageData.followTaskDetailWrap||this.pageData.isPromotionProposalAudit},propertyItems:function(){return this.propertyItem},datas:function(){return this.pageUseData}},components:{contentTip:O},methods:{saveProgress:function(){var t=ctx+"/message/erpServiceSchedule/saveProgress",e=[{procInsId:this.pageData.procInsId,serviceType:"SplitJuYinKe",status:"End",type:"OperateDiagnosis"},{procInsId:this.pageData.procInsId,serviceType:"SplitJuYinKe",status:"Begin",type:"PromotionAccount"}];d.a.get(t,{params:{paramJson:u()(e)}})},saveMessageRecord:function(){var t=ctx+"/message/erpServiceMessage/saveMessageRecord",e=[{procInsId:this.pageData.procInsId,serviceType:"SplitJuYinKe",status:"End",nodeType:"PromotionOnlineConfirm"}];d.a.get(t,{params:{paramJson:u()(e)}})},initData:function(){var t=this;this.propertyItem.splice(0,this.propertyItem.length+1),d.a.get(ctx+"/diagnosis/diagnosisForm/afterPhone/"+this.pageData.splitId).then(function(e){"0"===e.data.code&&e.data.attach&&(t.pageUseData=erpShopApp.extend(!0,t.pageUseData,e.data.attach),t.$nextTick(function(){Array.isArray(t.pageUseData.industryAttributes)&&t.pageUseData.industryAttributes.length?t.pageUseData.industryAttributes.forEach(function(e,i){e.pid&&t.getProperty(e.pid,i)}):(t.pageUseData.industryAttributes=[{id:"",industryAttribute:"",level:1,name:"",order:0,pid:"0",remarks:""}],t.getProperty("0",0))}))}),this.timer=0,this.saveProgress(),pageDataObject.runSaveMessageRecord&&this.saveMessageRecord()},getProperty:function(t,e){var i=this;d.a.get(ctx+"/diagnosis/diagnosisIndustryAttribute/pid/"+t).then(function(t){Array.isArray(t.data)&&t.data.length&&i.propertyItem.splice(e,0,t.data)})},changePropertyHandler:function(t,e){var i=this,s={id:"",industryAttribute:"",level:e+1,name:"",order:e+1,pid:t,remarks:""};d.a.get(ctx+"/diagnosis/diagnosisIndustryAttribute/pid/"+t).then(function(t){i.pageUseData.industryAttributes.splice(e+1,i.pageUseData.industryAttributes.length+1),Array.isArray(t.data)&&t.data.length&&(i.propertyItem.splice(e+1,0,t.data),i.pageUseData.industryAttributes.splice(e+1,0,s))})},pageSave:function(t){var e=this,i="经营诊断3（电话诊断结束阶段）保存失败，确定要离开吗？",s=[],a=this.pageUseData,o=a.diagnosisContentAdditional,n=a.diagnosisStoreInfos,r=a.referenceMaterial,l=a.splitId;if(function(t){return!!t||(!(!e.pageUseData.industryAttributes||0===e.pageUseData.industryAttributes.length)||(popup.tip("请选择行业属性！","info"),!1))}(t))return this.pageUseData.industryAttributes.forEach(function(t){t.id&&s.push({splitId:l,industryAttributeId:t.id})}),new m.a(function(e,a){d.a.post(ctx+"/diagnosis/diagnosisForm/afterPhone",{diagnosisContentAdditional:o,diagnosisStoreInfos:n,referenceMaterial:r,splitId:l,splitIndustryAttributes:s}).then(function(s){if(s&&s.data){if("0"===s.data.code)return t||popup.tip(s.data.message||"保存成功！","info"),void e(!0);Object(h.changeCallback)(e,1,i)}}).catch(function(s){Object(h.changeCallback)(e,!t,t?i:null)})})}}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step"},[t._m(0),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label form-required"},[t._v("行业属性：")]),t._v(" "),i("div",{staticClass:"controls"},[t._l(t.datas.industryAttributes,function(e,s){return[t.datas.industryAttributes[s]&&t.datas.industryAttributes[s].hasOwnProperty("id")?i("select",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"item.id"}],staticClass:"form-control mr20",attrs:{disabled:t.isDisabled},on:{change:[function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"id",i.target.multiple?s:s[0])},function(i){t.changePropertyHandler(e.id,s)}]}},[i("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.NumberComparison[s+1]+"级行业选择"))]),t._v(" "),t._l(t.propertyItems[s],function(e){return i("option",{key:"dee"+s+e.id,domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t")])})],2):t._e()]})],2)]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("品牌亮点：")]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("电话前诊断结果：")]),t._v(" "),i("div",{staticClass:"controls"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.brandLightspot,expression:"datas.brandLightspot"}],staticClass:"promote-textarea",attrs:{disabled:"disabled",maxlength:"500"},domProps:{value:t.datas.brandLightspot},on:{input:function(e){e.target.composing||t.$set(t.datas,"brandLightspot",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("电话后补充的诊断内容：")]),t._v(" "),i("div",{staticClass:"controls"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.diagnosisContentAdditional,expression:"datas.diagnosisContentAdditional"}],staticClass:"promote-textarea",attrs:{disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.diagnosisContentAdditional},on:{input:function(e){e.target.composing||t.$set(t.datas,"diagnosisContentAdditional",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("大众点评信息：")]),t._v(" "),t._l(t.datas.diagnosisStoreInfos,function(e,s){return i("div",{staticClass:"storeInfos"},[i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("门店名称：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.erpStoreName,expression:"infos.erpStoreName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"门店名称",disabled:"disabled"},domProps:{value:e.erpStoreName},on:{input:function(i){i.target.composing||t.$set(e,"erpStoreName",i.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("大众点评店名：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dianpingStoreName,expression:"infos.dianpingStoreName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"大众点评店名",disabled:t.isDisabled},domProps:{value:e.dianpingStoreName},on:{input:function(i){i.target.composing||t.$set(e,"dianpingStoreName",i.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("大众点评链接：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dianpingLink,expression:"infos.dianpingLink",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"大众点评链接",disabled:t.isDisabled},domProps:{value:e.dianpingLink},on:{input:function(i){i.target.composing||t.$set(e,"dianpingLink",i.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("大众点评排名：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dianpingRanking,expression:"infos.dianpingRanking",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"打开大众点评APP，在店铺详情页，如：广州粤菜热门榜第一名",disabled:t.isDisabled},domProps:{value:e.dianpingRanking},on:{input:function(i){i.target.composing||t.$set(e,"dianpingRanking",i.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),t._m(2,!0)])}),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("参考资料：")]),t._v(" "),i("div",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.datas.referenceMaterial,expression:"datas.referenceMaterial"}],staticClass:"promote-textarea",staticStyle:{width:"99%"},attrs:{placeholder:"参考资料",disabled:t.isDisabled,maxlength:"500"},domProps:{value:t.datas.referenceMaterial},on:{input:function(e){e.target.composing||t.$set(t.datas,"referenceMaterial",e.target.value)}}}),t._v(" "),i("p",{staticClass:"grayword"},[t._v("整理商户提供的以往推文、以往活动物料、产品介绍等材料。也可以找找该商户其他团购网站、外卖、购物类网站的信息")])]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("此阶段可向客户索要的资料清单："),i("contentTip",{attrs:{title:"参考话术",type:"infoList"}})],1)],2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:JSON.stringify(t.datas),expression:"JSON.stringify(datas)"}],attrs:{type:"hidden"},domProps:{value:JSON.stringify(t.datas)},on:{input:function(e){e.target.composing||t.$set(JSON,"stringify(datas)",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:JSON.stringify(t.propertyItems),expression:"JSON.stringify(propertyItems)"}],attrs:{type:"hidden"},domProps:{value:JSON.stringify(t.propertyItems)},on:{input:function(e){e.target.composing||t.$set(JSON,"stringify(propertyItems)",e.target.value)}}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("经营诊断3（电话诊断结束阶段）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"margin-left":"35px","margin-bottom":"20px"}},[this._v("品牌故事/品牌历史（举例：祖传18代、清朝流传至今）"),e("br"),this._v("品牌影响力范围（举例：全国连锁品牌、广州知名品牌）"),e("br"),this._v("品牌授权/特许（举例：xx服装特许经营店）"),e("br"),this._v("品牌吉祥物/图标"),e("br"),this._v("品牌口碑（举例：龙洞区域够地道的潮汕小吃）"),e("br"),this._v("品牌标语/口号（举例：怕上火喝王老吉）"),e("br"),this._v("品牌代言人")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control-group"},[e("label",{staticClass:"control-label"}),this._v(" "),e("div",{staticClass:"controls"},[e("p",{staticClass:"grayword"},[this._v("打开大众点评APP上查看(不是PC端的大众点评)，在列表页找。"),e("br"),this._v("如图所示：广州粤菜热门榜第一名")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info-list"},[i("table",{staticClass:"table table-bordered table-condensed"},[i("thead",[i("tr",[i("th",[t._v("类别")]),t._v(" "),i("th",[t._v("具体内容")]),t._v(" "),i("th",[t._v("内容举例")])])]),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("品牌亮点资料")]),t._v(" "),i("td",[i("p",[t._v("品牌故事/品牌历史")]),t._v(" "),i("p",[t._v("品牌影响力范围")]),t._v(" "),i("p",[t._v("品牌授权/特许")]),t._v(" "),i("p",[t._v("品牌吉祥物/图标")]),t._v(" "),i("p",[t._v("品牌口碑")]),t._v(" "),i("p",[t._v("品牌标语/口号")]),t._v(" "),i("p",[t._v("品牌代言人")])]),t._v(" "),i("td",[i("p",[t._v("祖传28代、xx创造者")]),t._v(" "),i("p",[t._v("全国连锁品牌、广州知名品牌")]),t._v(" "),i("p",[t._v("xx服装特许经营店/特许")]),t._v(" "),i("p"),t._v(" "),i("p",[t._v("龙洞区域够地道的潮汕小吃")]),t._v(" "),i("p",[t._v("怕上火喝王老吉")]),t._v(" "),i("p",[t._v("xxx")])])]),t._v(" "),i("tr",[i("td",[t._v("产品或服务的介绍资料")]),t._v(" "),i("td",[i("p",[t._v("菜单/价目表/服务项目价格表")]),t._v(" "),i("p",[t._v("特色产品或服务的名称、价格优势、特点（原材料、制作工艺、感官上的体验感等）")])]),t._v(" "),i("td",[i("p"),t._v(" "),i("p",[t._v("最喜牛腩：选用新西兰天然草饲牛，这里环境优越，从未发生过疯牛病。牛腩块富含肌肉纤维，脂肪含量更低，肉质紧密结实，油花嫩筋浓香可口，好吃不怕胖，适合全家食用。")])])]),t._v(" "),i("tr",[i("td",[t._v("以往的活动、推广资料")]),t._v(" "),i("td",[t._v("活动推文链接或相关材料")]),t._v(" "),i("td")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"grayword"},[this._v("客户提供后，图片信息自己保存，文字信息填入经营诊断。")])])}]};var H=i("VU/8")(W,G,!1,function(t){i("ZY74")},null,null).exports,z={props:["pageData"],data:function(){return{canCommit:!0,pageUseData:{brandLightspot:"",diagnosisContentAdditional:"",diagnosisStoreInfos:[],discountTypeRecommends:[],industryAttributes:[],recommend:null},recommendsList:[],timer:0}},components:{contentTip:O},computed:{isDisabled:function(){return!!this.pageData.followTaskDetailWrap||this.pageData.isPromotionProposalAudit},datas:function(){return this.pageUseData}},methods:{initData:function(){var t=this;this.pageUseData.recommend=null,d.a.get(ctx+"/diagnosis/diagnosisForm/discountTypeContent/"+this.pageData.splitId).then(function(e){if("0"===e.data.code){if(Array.isArray(e.data.attach.discountTypeRecommends)){t.recommendsList.length=0;for(var i=0,s=e.data.attach.discountTypeRecommends.length;i<s;i++)t.recommendsList.splice(i,0,e.data.attach.discountTypeRecommends[i]),"Y"===e.data.attach.discountTypeRecommends[i].checked&&(t.pageUseData.recommend=i)}t.pageUseData=erpShopApp.extend(!0,t.pageUseData,e.data.attach)}})},pageSave:function(t){var e=this,i=this.pageUseData,s=i.backupFirst,a=i.backupSecond,o=i.mainPush,n=i.promotionTime,r=i.pushArea,l=i.splitId;if(function(t){return!!t||(!!o||(popup.tip("请填写主推！","info"),!1))}(t)){var c,p="活动策划1（优惠形式和内容）保存失败，确定要离开吗？";return this.recommendsList.forEach(function(t,i){e.pageUseData.recommend===i?t.checked="Y":t.checked="N"}),c=this.recommendsList,new m.a(function(e,i){d.a.post(ctx+"/diagnosis/diagnosisForm/discountTypeContent",{backupFirst:s,backupSecond:a,discountTypeRecommends:c,mainPush:o,promotionTime:n,pushArea:r,splitId:l}).then(function(i){if(i&&i.data){if("0"===i.data.code)return t||popup.tip(i.data.message||"保存成功！","info"),void e(!0);Object(h.changeCallback)(e,1,p)}}).catch(function(i){Object(h.changeCallback)(e,!t,t?p:null)})})}}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step"},[t._m(0),t._v(" "),i("div",{staticClass:"form-horizontal info-wrap"},[i("div",{staticClass:"lightspot-title title-info"},[t._v("1、优惠形式定义")]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("（1）策划活动的优惠形式前，需要参考一下信息")]),t._v(" "),t._l(t.pageUseData.diagnosisStoreInfos,function(e,s){return[i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label title"},[t._v(t._s(e.erpStoreName)+"：")])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("桌均和客单价：")])]),t._v(" "),i("div",{staticClass:"control-group"},[i("div",{staticClass:"control-label"},[t._v("桌均人数：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tableAvgPersonNumMin,expression:"item.tableAvgPersonNumMin"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.tableAvgPersonNumMin},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPersonNumMin",i.target.value)}}}),t._v(" "),i("span",[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tableAvgPersonNumMax,expression:"item.tableAvgPersonNumMax"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.tableAvgPersonNumMax},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPersonNumMax",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("div",{staticClass:"control-label"},[t._v("人均客单价：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.personAvgPriceMin,expression:"item.personAvgPriceMin"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.personAvgPriceMin},on:{input:function(i){i.target.composing||t.$set(e,"personAvgPriceMin",i.target.value)}}}),t._v(" "),i("span",[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.personAvgPriceMax,expression:"item.personAvgPriceMax"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.personAvgPriceMax},on:{input:function(i){i.target.composing||t.$set(e,"personAvgPriceMax",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("div",{staticClass:"control-label"},[t._v("桌均客单价：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tableAvgPriceMin,expression:"item.tableAvgPriceMin"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.tableAvgPriceMin},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPriceMin",i.target.value)}}}),t._v(" "),i("span",[t._v("——")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tableAvgPriceMax,expression:"item.tableAvgPriceMax"}],staticClass:"input-short",attrs:{type:"number",disabled:!0},domProps:{value:e.tableAvgPriceMax},on:{input:function(i){i.target.composing||t.$set(e,"tableAvgPriceMax",i.target.value)}}})])])]}),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("行业类型：")]),t._v(" "),i("div",{staticClass:"controls"},[i("span",[t._v(t._s(t.pageUseData.industryAttribute))])])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("营销活动需求：")]),t._v(" "),i("div",{staticClass:"controls"},[i("span",[t._v(t._s(t.pageUseData.activityRequirementStr))])])]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("推荐的优惠形式：")]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"info-list"},[i("table",{staticClass:"table table-bordered table-condensed"},[t._m(2),t._v(" "),i("tbody",t._l(t.recommendsList,function(e,s){return i("tr",{key:e.discountTypeId},[i("td",[t._v(t._s(e.discountTypeName))]),t._v(" "),i("td",[t._v(t._s(e.recommendScore))]),t._v(" "),i("td",[i("p",{domProps:{innerHTML:t._s(e.example)}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pageUseData.recommend,expression:"pageUseData.recommend"}],attrs:{type:"radio",name:"recommendss",id:"sdce"+s},domProps:{value:s,checked:t._q(t.pageUseData.recommend,s)},on:{change:function(e){t.$set(t.pageUseData,"recommend",s)}}})])])}))])]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("2、策划本次推广活动的优惠内容")]),t._v(" "),i("div",{staticClass:"lightspot-title title-info"},[t._v("优惠形式、力度产品定义：")]),t._v(" "),t._m(3),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label form-required"},[t._v("主推：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pageUseData.mainPush,expression:"pageUseData.mainPush",modifiers:{trim:!0}}],staticClass:"form-control text-input",attrs:{type:"text",placeholder:"主推",disabled:t.isDisabled},domProps:{value:t.pageUseData.mainPush},on:{input:function(e){e.target.composing||t.$set(t.pageUseData,"mainPush",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),t._m(4)])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("备选1：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pageUseData.backupFirst,expression:"pageUseData.backupFirst",modifiers:{trim:!0}}],staticClass:"form-control text-input",attrs:{type:"text",placeholder:"备选1",disabled:t.isDisabled},domProps:{value:t.pageUseData.backupFirst},on:{input:function(e){e.target.composing||t.$set(t.pageUseData,"backupFirst",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("备选2：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pageUseData.backupSecond,expression:"pageUseData.backupSecond",modifiers:{trim:!0}}],staticClass:"form-control text-input",attrs:{type:"text",placeholder:"备选2",disabled:t.isDisabled},domProps:{value:t.pageUseData.backupSecond},on:{input:function(e){e.target.composing||t.$set(t.pageUseData,"backupSecond",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("p",{staticClass:"grayword"},[t._v("备选的不会显示给商户查看")])])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("投放地域：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pageUseData.pushArea,expression:"pageUseData.pushArea",modifiers:{trim:!0}}],staticClass:"form-control text-input",attrs:{type:"text",placeholder:"投放地域",disabled:t.isDisabled},domProps:{value:t.pageUseData.pushArea},on:{input:function(e){e.target.composing||t.$set(t.pageUseData,"pushArea",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("p",{staticClass:"grayword"},[t._v("默认门店周边，除非客户有特殊要求")])])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("投放通道：")]),t._v(" "),i("div",{staticClass:"controls"},[i("span",[t._v(t._s(t.pageUseData.promotionChannel))])])]),t._v(" "),i("div",{staticClass:"control-group"},[i("label",{staticClass:"control-label"},[t._v("投放开始时间：")]),t._v(" "),i("div",{staticClass:"controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pageUseData.promotionTime,expression:"pageUseData.promotionTime"}],ref:"promotionTime",staticClass:"text-input Wdate",attrs:{id:"promotionTime",onclick:"WdatePicker({dateFmt:'yyyy/MM/dd', isShowClear:false, readOnly:false});",type:"text"},domProps:{value:t.pageUseData.promotionTime},on:{input:function(e){e.target.composing||t.$set(t.pageUseData,"promotionTime",e.target.value)}}}),t._v(" "),i("p",{staticClass:"grayword"},[t._v("询问意向投放时间，方案确认后可再更新")])])])],2),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:JSON.stringify(t.datas),expression:"JSON.stringify(datas)"}],attrs:{type:"hidden"},domProps:{value:JSON.stringify(t.datas)},on:{input:function(e){e.target.composing||t.$set(JSON,"stringify(datas)",e.target.value)}}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("活动策划1（优惠形式和内容）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"recommends"},[e("p",[this._v("使用方法：根据推荐的优惠形式和示例，填写本次的活动内容。在”优惠形式的示例“里，有每种优惠形式的活动模板，请结合商户的意愿，挑选最适合的一条或几条进行扩充编辑，组合成本次推广的内容。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("推荐的优惠形式")]),this._v(" "),e("th",[this._v("推荐分值")]),this._v(" "),e("th",[this._v("优惠形式举例")]),this._v(" "),e("th",[this._v("是否选择该优惠形式")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"recommends"},[e("p",[this._v("使用方法：根据推荐的优惠形式和示例，填写本次的活动内容。在”优惠形式的示例“里，有每种优惠形式的活动模板，请结合商户的意愿，挑选最适合的一条或几条进行扩充编辑，组合成本次推广的内容。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"grayword"},[this._v("主推的是优惠组合，是指一段时间内一条或多条优惠活动。"),e("br"),this._v("例如：某家鸡排店新开业，推荐分值最高的优惠形式为：全场折扣、免费赠送产品、限量全免。"),e("br"),this._v("结合优惠形式的示例，主推的优惠组合就可以是：X月X日到X月X日，全场鸡排8折；买满28元送可乐一杯；奥尔良烤翅每天免单前58名，每位客户限购一对。以上活动单次消费不可重复享受。")])}]};var X=i("VU/8")(z,q,!1,function(t){i("8TEt")},null,null).exports,V={props:["index","item","couponType","indexLength"],data:function(){return{}},mounted:function(){},updated:function(){""===this.item.couponType&&(this.item.couponType=this.couponType[0].value)},methods:{deleteCapon:function(){var t=this;popup.confirm({title:"提示",message:"确认删除此卡券模块?",confirmCallBack:function(){t.$emit("deleteSinger",t.index)},cancelCallBack:function(){},closeCallBack:function(){}})}}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"capon-fill-step"},[i("p",{staticClass:"title-info"},[t._v("卡券"+t._s(t.index+1))]),t._v(" "),i("div",{staticClass:"info-box"},[i("p",[i("span",[t._v("商户名称：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.shopName,expression:"item.shopName"}],attrs:{type:"text",placeholder:"名称+区域店名"},domProps:{value:t.item.shopName},on:{input:function(e){e.target.composing||t.$set(t.item,"shopName",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("优惠券类型：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),t._l(t.couponType,function(e,s){return[i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.couponType,expression:"item.couponType"}],attrs:{id:s+88*t.index+t.index,type:"radio"},domProps:{value:e.value,checked:t._q(t.item.couponType,e.value)},on:{change:[function(i){t.$set(t.item,"couponType",e.value)},function(i){t.item.couponType=e.value}]}}),t._v(" "),i("label",{attrs:{for:s+88*t.index+t.index}},[t._v(t._s(e.label))])]})],2),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"full_minus_vouchers"==t.item.couponType,expression:"item.couponType == 'full_minus_vouchers'"}]},[i("span",[t._v("使用门槛：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.useThreshold,expression:"item.useThreshold"}],attrs:{type:"text",placeholder:"满100可用"},domProps:{value:t.item.useThreshold},on:{input:function(e){e.target.composing||t.$set(t.item,"useThreshold",e.target.value)}}})]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"full_minus_vouchers"==t.item.couponType,expression:"item.couponType == 'full_minus_vouchers'"}]},[i("span",[t._v("减免金额：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.reduceAmount,expression:"item.reduceAmount"}],attrs:{type:"text",placeholder:"20元"},domProps:{value:t.item.reduceAmount},on:{input:function(e){e.target.composing||t.$set(t.item,"reduceAmount",e.target.value)}}})]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"full_minus_vouchers"==t.item.couponType,expression:"item.couponType == 'full_minus_vouchers'"}]},[i("span",[t._v("优惠券名称：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.couponName,expression:"item.couponName"}],attrs:{type:"text",placeholder:"20元代金券"},domProps:{value:t.item.couponName},on:{input:function(e){e.target.composing||t.$set(t.item,"couponName",e.target.value)}}}),t._v(" "),i("span",{staticClass:"hint"},[t._v("如，一元购买1L招聘延边米酒")])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"gift_vouchers"==t.item.couponType,expression:"item.couponType == 'gift_vouchers'"}]},[i("span",[t._v("礼品券名称：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.giftCouponName,expression:"item.giftCouponName"}],attrs:{type:"text"},domProps:{value:t.item.giftCouponName},on:{input:function(e){e.target.composing||t.$set(t.item,"giftCouponName",e.target.value)}}})]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"gift_vouchers"==t.item.couponType,expression:"item.couponType == 'gift_vouchers'"}]},[i("span",[t._v("每次最多可叠加几张：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.superpositionNum,expression:"item.superpositionNum"}],attrs:{type:"text"},domProps:{value:t.item.superpositionNum},on:{input:function(e){e.target.composing||t.$set(t.item,"superpositionNum",e.target.value)}}})]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"discount_vouchers"==t.item.couponType,expression:"item.couponType == 'discount_vouchers'"}]},[i("span",[t._v("折扣券名称：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.discountCouponName,expression:"item.discountCouponName"}],attrs:{type:"text"},domProps:{value:t.item.discountCouponName},on:{input:function(e){e.target.composing||t.$set(t.item,"discountCouponName",e.target.value)}}})]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"discount_vouchers"==t.item.couponType,expression:"item.couponType == 'discount_vouchers'"}]},[i("span",[t._v("折扣比率：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.discountScale,expression:"item.discountScale"}],attrs:{type:"text"},domProps:{value:t.item.discountScale},on:{input:function(e){e.target.composing||t.$set(t.item,"discountScale",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("总库存：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.inventory,expression:"item.inventory"}],attrs:{type:"text",onkeyup:"this.value=this.value.replace(/[^\\d]/g,'')",placeholder:"10000次"},domProps:{value:t.item.inventory},on:{input:function(e){e.target.composing||t.$set(t.item,"inventory",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("每人限领：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.limitNum,expression:"item.limitNum"}],attrs:{type:"text",placeholder:"一人一次"},domProps:{value:t.item.limitNum},on:{input:function(e){e.target.composing||t.$set(t.item,"limitNum",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("有效时间：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.effectiveTime,expression:"item.effectiveTime"}],attrs:{type:"text",placeholder:"有效日期，如一个月"},domProps:{value:t.item.effectiveTime},on:{input:function(e){e.target.composing||t.$set(t.item,"effectiveTime",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("可用时段：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.availableHours,expression:"item.availableHours"}],attrs:{type:"text",placeholder:"卡券使用时间段"},domProps:{value:t.item.availableHours},on:{input:function(e){e.target.composing||t.$set(t.item,"availableHours",e.target.value)}}}),t._v(" "),i("span",{staticClass:"hint"},[t._v("如，周一至周日，10:00-22:00")])]),t._v(" "),i("p",[i("span",[t._v("详细描述：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.description,expression:"item.description"}],attrs:{type:"text",placeholder:"卡券介绍+具体服务内容，或参考价"},domProps:{value:t.item.description},on:{input:function(e){e.target.composing||t.$set(t.item,"description",e.target.value)}}}),t._v(" "),i("span",{staticClass:"hint"},[t._v("如，凭券进店消费满100元即可一元买1壶延边米酒(1L)")])]),t._v(" "),i("p",[i("span",[t._v("使用须知：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.terms,expression:"item.terms"}],attrs:{placeholder:"使用门店，使用条件及商家额外服务"},domProps:{value:t.item.terms},on:{input:function(e){e.target.composing||t.$set(t.item,"terms",e.target.value)}}}),t._v(" "),i("span",{staticClass:"hint"},[t._v("1、凭券可享受XX定制立减200元优惠（酒水除外）")]),t._v(" "),i("span",{staticClass:"hint"},[t._v("2、每人限领一张，每桌限用1次，请尽快到门店使用")]),t._v(" "),i("span",{staticClass:"hint"},[t._v("3、该优惠券不可兑换现金、不可与其他优惠共同叠加")]),t._v(" "),i("span",{staticClass:"hint"},[t._v("4、本券最终解释归XX餐厅所有")])]),t._v(" "),i("p",[i("span",[t._v("客服电话：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.phoneNumber,expression:"item.phoneNumber"}],attrs:{type:"text",placeholder:"门店联系电话"},domProps:{value:t.item.phoneNumber},on:{input:function(e){e.target.composing||t.$set(t.item,"phoneNumber",e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("适合门店：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.fitStore,expression:"item.fitStore"}],attrs:{type:"text",placeholder:"具体服务门店"},domProps:{value:t.item.fitStore},on:{input:function(e){e.target.composing||t.$set(t.item,"fitStore",e.target.value)}}}),t._v(" "),i("span",{staticClass:"hint"},[t._v("如，恩你小木屋（五棵松店）")])])]),t._v(" "),i("div",{staticClass:"button-content button-content-depart"},[i("button",{directives:[{name:"show",rawName:"v-show",value:0!==t.index&&t.index!==t.indexLength,expression:"index !== 0 && index !== indexLength"}],staticClass:"btn btn-primary",on:{click:t.deleteCapon}},[t._v("删除此卡券")])])])},staticRenderFns:[]};var K={props:["pageData"],data:function(){return{deleteFlag:!1,couponTypeList:[{label:"礼品券",value:"gift_vouchers"},{label:"折扣券",value:"discount_vouchers"},{label:"满减券",value:"full_minus_vouchers"}],shopPassword:"",shopUsername:"",isCapon:!0,diagnosisCardCoupons:[{availableHours:"",couponName:"",couponType:"",description:"",effectiveTime:"",fitStore:"",inventory:"",limitNum:"",phoneNumber:"",reduceAmount:"",shopName:"",splitId:this.pageData.splitId,terms:"",useThreshold:""}],removedCouponIds:[]}},methods:{initData:function(){var t=this;d.a.get(ctx+"/diagnosis/diagnosisForm/getCouponsPlanData/"+t.pageData.splitId).then(function(e){"0"===e.data.code&&e.data.hasOwnProperty("attach")&&(e.data.hasOwnProperty("couponTypeList")&&(t.couponTypeList=e.data.attach.couponTypeList),t.shopPassword=e.data.attach.shopPassword,t.shopUsername=e.data.attach.shopUsername,e.data.attach.hasOwnProperty("diagnosisCardCoupons")&&0!==e.data.attach.diagnosisCardCoupons.length&&(t.diagnosisCardCoupons=e.data.attach.diagnosisCardCoupons,t.diagnosisCardCoupons.length>1&&(t.deleteFlag=!0)))})},deleteSinger:function(t){this.diagnosisCardCoupons.splice(t,1)},contentChange:function(){return!0},pageSave:function(t){if(t||!this.isCapon||this.isPass()){if(t||this.shopUsername&&this.shopPassword){var e=this;return new m.a(function(i,s){d.a.post(ctx+"/diagnosis/diagnosisForm/saveCouponsPlanData",{shopPassword:e.shopPassword,shopUsername:e.shopUsername,splitId:e.pageData.splitId,diagnosisCardCoupons:e.diagnosisCardCoupons,removedCouponIds:e.removedCouponIds}).then(function(s){return"0"===s.data.code?(t||popup.tip("保存成功","info"),e.initData(),void i(!0)):(popup.tip(s.data.message,"info"),void i(!1))}).catch(function(){popup.tip("保存失败！","info")})})}popup.tip("账号或者密码不能为空!","info")}},deleteCapon:function(){var t=this;popup.confirm({title:"提示",message:"确认删除此卡券模块?",confirmCallBack:function(){var e=t.diagnosisCardCoupons[t.diagnosisCardCoupons.length-1].id;e&&t.removedCouponIds.push(e),t.diagnosisCardCoupons.splice(t.diagnosisCardCoupons.length-1,1),1===t.diagnosisCardCoupons.length&&(t.deleteFlag=!1)},cancelCallBack:function(){},closeCallBack:function(){}})},isPass:function(){var t=this.diagnosisCardCoupons[this.diagnosisCardCoupons.length-1];if(!t.shopName)return popup.tip("商户名称不能为空!","info"),!1;if("full_minus_vouchers"===t.couponType){if(!t.useThreshold)return popup.tip("使用门槛不能为空!","info"),!1;if(!t.reduceAmount)return popup.tip("减免金额不能为空!","info"),!1;if(!t.couponName)return popup.tip("优惠券名称不能为空!","info"),!1}if("gift_vouchers"===t.couponType){if(!t.giftCouponName)return popup.tip("礼品券名称不能为空!","info"),!1;if(!t.superpositionNum)return popup.tip("可叠加张数不能为空!","info"),!1}if("discount_vouchers"===t.couponType){if(!t.discountCouponName)return popup.tip("折扣券名称不能为空!","info"),!1;if(!t.discountScale)return popup.tip("折扣比率不能为空!","info"),!1}return t.inventory?t.limitNum?t.effectiveTime?t.availableHours?t.description?t.terms?t.phoneNumber?!!t.fitStore||(popup.tip("适合门店不能为空!","info"),!1):(popup.tip("客服电话不能为空!","info"),!1):(popup.tip("使用须知不能为空!","info"),!1):(popup.tip("详细描述不能为空!","info"),!1):(popup.tip("可用时段不能为空!","info"),!1):(popup.tip("有效时间不能为空!","info"),!1):(popup.tip("每人限领不能为空!","info"),!1):(popup.tip("总库存不能为空!","info"),!1)},addCapon:function(){this.isCapon&&!this.isPass()||(this.deleteFlag=!0,this.diagnosisCardCoupons.push({availableHours:"",couponName:"",couponType:"",description:"",effectiveTime:"",fitStore:"",inventory:"",limitNum:"",phoneNumber:"",reduceAmount:"",shopName:"",splitId:this.pageData.splitId,terms:"",useThreshold:""}))}},components:{CaponForm:i("VU/8")(V,J,!1,function(t){i("825q")},"data-v-dd83057a",null).exports}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step5"},[t._m(0),t._v(" "),i("div",[t._m(1),t._v(" "),t._l(t.diagnosisCardCoupons,function(e,s){return i("capon-form",{key:"cardCoupons"+s,attrs:{item:e,index:s,indexLength:t.diagnosisCardCoupons.length-1,couponType:t.couponTypeList},on:{deleteSinger:t.deleteSinger}})}),t._v(" "),i("div",{staticClass:"button-content"},[i("button",{staticClass:"btn btn-primary color",on:{click:t.addCapon}},[t._v("添加新卡券")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.deleteFlag,expression:"deleteFlag"}],staticClass:"btn btn-primary",on:{click:t.deleteCapon}},[t._v("删除此卡券")])])],2),t._v(" "),i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("4、 掌贝商户后台账号和密码")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("与客户确认卡券时，策划专家补充提问")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("使用付费卡券要注意：")]),t._v(" "),i("p",[i("span",[t._v("账号：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.shopUsername,expression:"shopUsername"}],attrs:{type:"text",placeholder:"掌贝商户后台账号"},domProps:{value:t.shopUsername},on:{input:function(e){e.target.composing||(t.shopUsername=e.target.value)}}})]),t._v(" "),i("p",[i("span",[t._v("密码：")]),i("span",{staticClass:"hint-color"},[t._v("*")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.shopPassword,expression:"shopPassword"}],attrs:{type:"text",placeholder:"掌贝商户后台密码"},domProps:{value:t.shopPassword},on:{input:function(e){e.target.composing||(t.shopPassword=e.target.value)}}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("活动策划2（卡券策划）")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("3、填写卡券内容")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("选择了卡券派发的商户，需策划卡券内容。")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("使用付费卡券要注意：")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("1、要制作两张卡券，分微信通道付费卡券和非微信通道的免费卡券。")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("2、要提醒商户卡券核销注意事项。")])])}]};var Z,Q=i("VU/8")(K,Y,!1,function(t){i("bMSU")},null,null).exports,tt=i("bOdI"),et=i.n(tt),it=(i("H0Ff"),i("BD2p")),st={props:["pageData"],data:function(){return{uploadAction:ctx+"/diagnosis/diagnosisForm/upload",formData:{},diagnosisFirst:[],diagnosisTwo:[],diagnosisThree:[],typeLevelFirst:!1,typeLevelTwo:!1,typeLevelThree:!1,diagnosisSecondAdImages:[],firstLevelImg:[],twoLevelImg:[],removedFirstAdImgIds:[],removedSecondAdImgIds:[],removedImgUrls:[],flagFirst:!1}},methods:(Z={initData:function(){var t=this;d.a.get(ctx+"/diagnosis/diagnosisForm/getPropagandaKeyData/"+t.pageData.splitId).then(function(e){"0"===e.data.code&&(t.formData=e.data.attach,t.diagnosisSecondAdImages=t.formData.diagnosisSecondAdImages,t.diagnosisFirst=[],t.diagnosisTwo=[],t.diagnosisThree=[],t.formData.diagnosisFirstAdImages.forEach(function(e){"1"===e.type?t.diagnosisFirst.push(e):"2"===e.type?t.diagnosisTwo.push(e):"3"===e.type&&t.diagnosisThree.push(e)}),t.formData.promotionChannels.forEach(function(e){"1"===e?t.typeLevelFirst=!0:"2"===e?t.typeLevelTwo=!0:"3"===e&&(t.typeLevelThree=!0)}))})},contentChange:function(){return!0},handleRemoveFirst:function(t,e){this.diagnosisFirst.splice(t,1),e.id?this.removedFirstAdImgIds.push(e.id):this.removedImgUrls.push(e.imgUrl)},handleRemoveTwo:function(t,e){this.diagnosisTwo.splice(t,1),e.id?this.removedFirstAdImgIds.push(e.id):this.removedImgUrls.push(e.imgUrl)},handleRemoveThree:function(t,e){this.diagnosisThree.splice(t,1),e.id?this.removedFirstAdImgIds.push(e.id):this.removedImgUrls.push(e.imgUrl)},handleRemoveFour:function(t,e){this.formData.diagnosisSecondAdImages.splice(t,1),e.id?this.removedSecondAdImgIds.push(e.id):this.removedImgUrls.push(e.imgUrl)},showNaturePics:function(t,e){var i=this.$refs[t],s={title:"查看大图",width:i.naturalWidth||window.innerWidth,height:i.naturalHeight||window.innerHeight,opacity:0,buttons:null,text:'<img src="'+e+'" alt="大图" />'};erpShopApp.showDialog(s)},pageSave:function(t){var e=this;return new m.a(function(i,s){d.a.post(ctx+"/diagnosis/diagnosisForm/savePropagandaKeyData",{diagnosisFirstAdImages:e.diagnosisFirst.concat(e.diagnosisTwo).concat(e.diagnosisThree),diagnosisSecondAdImages:e.diagnosisSecondAdImages,splitId:e.pageData.splitId,firstPropagandaContent:e.formData.firstPropagandaContent,secondPropagandaContent:e.formData.secondPropagandaContent,removedFirstAdImgIds:e.removedFirstAdImgIds,removedSecondAdImgIds:e.removedSecondAdImgIds,removedImgUrls:e.removedImgUrls}).then(function(s){return"0"===s.data.code?(t||popup.tip("保存成功","info"),2!==t&&(e.initData(),e.removedFirstAdImgIds=[],e.removedSecondAdImgIds=[],e.removedImgUrls=[]),void i(!0)):(popup.tip(s.data.message,"info"),void i(!1))}).catch(function(){popup.tip("保存失败！","info")})})},handleSuccessFirstLayer:function(t,e){"0"===t.code?this.diagnosisFirst.push({imgUrl:t.attach,type:"1",splitId:this.pageData.splitId}):erpShopApp.tip("文件上传失败！","info")},handleSuccessTwoLayer:function(t,e){"0"===t.code?this.diagnosisTwo.push({imgUrl:t.attach,type:"2",splitId:this.pageData.splitId}):erpShopApp.tip("文件上传失败！","info")},handleSuccessThreeLayer:function(t,e){"0"===t.code?this.diagnosisThree.push({imgUrl:t.attach,type:"3",splitId:this.pageData.splitId}):erpShopApp.tip("文件上传失败！","info")},handleSuccessFourLayer:function(t,e){"0"===t.code?this.diagnosisSecondAdImages.push({imgUrl:t.attach,splitId:this.pageData.splitId}):erpShopApp.tip("文件上传失败！","info")},handleFormatError:function(t){erpShopApp.tip("文件 "+t.name+" 格式不正确，请上传 jpg 或 png 格式的图片。","info")},handleMaxSize:function(t){erpShopApp.tip("文件 "+t.name+" 太大，不能超过 20M。","info")},handleBeforeUploadFirst:function(){return 1!==this.diagnosisFirst.length||(erpShopApp.tip("最多只能上传1张图片！","info"),!1)},handleBeforeUploadTwo:function(){return 10!==this.diagnosisTwo.length||(erpShopApp.tip("最多只能上传10张图片！","info"),!1)},handleBeforeUploadThree:function(){return 10!==this.diagnosisThree.length||(erpShopApp.tip("最多只能上传10张图片！","info"),!1)}},et()(Z,"handleBeforeUploadThree",function(){return 20!==this.diagnosisSecondAdImages.length||(erpShopApp.tip("最多只能上传20张图片！","info"),!1)}),et()(Z,"uploadImgFirst",function(t,e){var i=this,s=e.currentTarget.files[0],a=new FormData;a.append("file",s),d.a.post(i.uploadAction,a).then(function(e){"0"===e.data.code?(i.diagnosisFirst[t].imgUrl=e.data.attach,popup.tip("上传成功","success")):erpShopApp.tip("文件上传失败！","info")})}),et()(Z,"uploadImgTwo",function(t,e){var i=this,s=e.currentTarget.files[0],a=new FormData;a.append("file",s),d.a.post(i.uploadAction,a).then(function(e){"0"===e.data.code?(i.diagnosisTwo[t].imgUrl=e.data.attach,popup.tip("上传成功","success")):erpShopApp.tip("文件上传失败！","info")})}),et()(Z,"uploadImgThree",function(t,e){var i=this,s=e.currentTarget.files[0],a=new FormData;a.append("file",s),d.a.post(i.uploadAction,a).then(function(e){"0"===e.data.code?(i.diagnosisThree[t].imgUrl=e.data.attach,popup.tip("上传成功","success")):erpShopApp.tip("文件上传失败！","info")})}),et()(Z,"uploadImgFour",function(t,e){var i=this,s=e.currentTarget.files[0],a=new FormData;a.append("file",s),d.a.post(i.uploadAction,a).then(function(e){"0"===e.data.code?(i.diagnosisSecondAdImages[t].imgUrl=e.data.attach,popup.tip("上传成功","success")):erpShopApp.tip("文件上传失败！","info")})}),Z),components:{upload:it.a}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-diagnoses-step6"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"base-info-two"},[i("div",{staticClass:"info-box"},[i("label",{staticClass:"control-label"}),t._v(" "),i("div",{staticClass:"controls check-time",staticStyle:{"margin-left":"30px"}},[i("table",{staticClass:"diagnosis-table"},[t._m(2),t._v(" "),i("tbody",{staticClass:"table-tbody"},[i("tr",[i("td",{staticClass:"left-td"},[t._v("优惠内容")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.mainPush))]),t._v(" "),i("td",{staticClass:"left-td left-no-padding",attrs:{rowspan:"6"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstPropagandaContent,expression:"formData.firstPropagandaContent"}],staticClass:"area-style",attrs:{rows:"12",cols:"7"},domProps:{value:t.formData.firstPropagandaContent},on:{input:function(e){e.target.composing||t.$set(t.formData,"firstPropagandaContent",e.target.value)}}})])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("营销需求")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.activityRequirements||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("产品服务的营销亮点提炼")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.majorProduct||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("商户本次想做活动的产品/服务")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.promoteProduct||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("品牌亮点")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.brandLightspot||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("创意文化")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.originalityCulture||""))])])])])])])]),t._v(" "),t._m(3),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.typeLevelFirst,expression:"typeLevelFirst"}],staticClass:"base-info margin-top-15",attrs:{id:"adver-wx"}},[i("p",{staticClass:"two-info-show",staticStyle:{"margin-top":"30px"}},[t._v("第一层微信朋友圈广告图(1张)")]),t._v(" "),i("div",{staticClass:"upload-content-parent"},[t._l(t.diagnosisFirst,function(e,s){return i("div",{staticClass:"upload-img-list-singer"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){t.showNaturePics("firstPhoto"+s,t.formData.domainName+e.imgUrl)}}},[i("img",{ref:"firstPhoto"+s,refInFor:!0,staticClass:"img-div",attrs:{src:t.formData.domainName+e.imgUrl}})]),t._v(" "),i("div",{staticClass:"ios-trash-outline-parent"},[i("button",[t._v("修改")]),t._v(" "),i("input",{attrs:{value:"",type:"file",accept:"image/*"},on:{change:function(e){t.uploadImgFirst(s,e)}}})]),t._v(" "),i("div",{staticClass:"upload-list-cover"},[i("button",{staticClass:"ios-trash-outline",on:{click:function(i){t.handleRemoveFirst(s,e)}}},[t._v("删除")])])])}),t._v(" "),i("upload",{ref:"productPhoto",staticStyle:{display:"inline-block",width:"88px"},attrs:{type:"drag","on-success":t.handleSuccessFirstLayer,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,format:["jpg","jpeg","png","gif"],accept:"image/*","max-size":20480,"before-upload":t.handleBeforeUploadFirst,action:t.uploadAction}},[i("div",{staticStyle:{width:"88px",height:"88px","line-height":"88px","text-align":"center"}},[i("span",[i("i",{staticClass:"icon-camera"}),t._v("上传图片")])])])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.typeLevelTwo,expression:"typeLevelTwo"}],staticClass:"base-info margin-top-15",attrs:{id:"adver-xl"}},[i("p",{staticClass:"two-info-show",staticStyle:{"margin-top":"30px"}},[t._v("第一层新浪微博广告图(一般3、6、9张)")]),t._v(" "),i("div",{staticClass:"upload-content-parent"},[t._l(t.diagnosisTwo,function(e,s){return i("div",{staticClass:"upload-img-list-singer"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){t.showNaturePics("twoPhoto"+s,t.formData.domainName+e.imgUrl)}}},[i("img",{ref:"twoPhoto"+s,refInFor:!0,staticClass:"img-div",attrs:{src:t.formData.domainName+e.imgUrl}})]),t._v(" "),i("div",{staticClass:"ios-trash-outline-parent"},[i("button",[t._v("修改")]),t._v(" "),i("input",{attrs:{value:"",type:"file",accept:"image/*"},on:{change:function(e){t.uploadImgTwo(s,e)}}})]),t._v(" "),i("div",{staticClass:"upload-list-cover"},[i("button",{staticClass:"ios-trash-outline",on:{click:function(i){t.handleRemoveTwo(s,e)}}},[t._v("删除")])])])}),t._v(" "),i("upload",{ref:"productPhoto",staticStyle:{display:"inline-block",width:"88px"},attrs:{type:"drag","on-success":t.handleSuccessTwoLayer,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUploadTwo,format:["jpg","jpeg","png","gif"],accept:"image/*",multiple:"","max-size":20480,action:t.uploadAction}},[i("div",{staticStyle:{width:"88px",height:"88px","line-height":"88px","text-align":"center"}},[i("span",[i("i",{staticClass:"icon-camera"}),t._v("上传图片")])])])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.typeLevelThree,expression:"typeLevelThree"}],staticClass:"base-info margin-top-15",attrs:{id:"adver-mm"}},[i("p",{staticClass:"two-info-show",staticStyle:{"margin-top":"30px"}},[t._v("第一层陌陌广告图(一般3、6、9张)")]),t._v(" "),i("div",{staticClass:"upload-content-parent"},[t._l(t.diagnosisThree,function(e,s){return i("div",{staticClass:"upload-img-list-singer"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){t.showNaturePics("threePhoto"+s,t.formData.domainName+e.imgUrl)}}},[i("img",{ref:"threePhoto"+s,refInFor:!0,staticClass:"img-div",attrs:{src:t.formData.domainName+e.imgUrl}})]),t._v(" "),i("div",{staticClass:"ios-trash-outline-parent"},[i("button",[t._v("修改")]),t._v(" "),i("input",{attrs:{value:"",type:"file",accept:"image/*"},on:{change:function(e){t.uploadImgThree(s,e)}}})]),t._v(" "),i("div",{staticClass:"upload-list-cover"},[i("button",{staticClass:"ios-trash-outline",on:{click:function(i){t.handleRemoveThree(s,e)}}},[t._v("删除")])])])}),t._v(" "),i("upload",{ref:"productPhoto",staticStyle:{display:"inline-block",width:"88px"},attrs:{type:"drag","on-success":t.handleSuccessThreeLayer,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUploadThree,format:["jpg","jpeg","png","gif"],accept:"image/*",multiple:"","max-size":20480,action:t.uploadAction}},[i("div",{staticStyle:{width:"88px",height:"88px","line-height":"88px","text-align":"center"}},[i("span",[i("i",{staticClass:"icon-camera"}),t._v("上传图片")])])])],2)]),t._v(" "),t._m(4),t._v(" "),i("div",{staticClass:"base-info-two"},[i("div",{staticClass:"info-box"},[i("label",{staticClass:"control-label"}),t._v(" "),i("div",{staticClass:"controls check-time",staticStyle:{"margin-left":"30px"}},[i("table",{staticClass:"diagnosis-table"},[t._m(5),t._v(" "),i("tbody",{staticClass:"table-tbody"},[i("tr",[i("td",{staticClass:"left-td"},[t._v("优惠内容")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.mainPush))]),t._v(" "),i("td",{staticClass:"left-td left-no-padding",attrs:{rowspan:"7"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.secondPropagandaContent,expression:"formData.secondPropagandaContent"}],staticClass:"area-style",attrs:{rows:"12",cols:"7"},domProps:{value:t.formData.secondPropagandaContent},on:{input:function(e){e.target.composing||t.$set(t.formData,"secondPropagandaContent",e.target.value)}}})])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("商户本次想做活动的产品/服务")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.promoteProduct||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("产品服务的营销亮点提炼")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.majorProduct||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("大众点评的排名榜信息")]),t._v(" "),i("td",{staticClass:"left-td"},t._l(t.formData.dianpingRankings,function(e){return i("div",[t._v(t._s(e||""))])}))]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("品牌亮点")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.brandLightspot||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("创意文化")]),t._v(" "),i("td",{staticClass:"left-td"},[t._v(t._s(t.formData.originalityCulture||""))])]),t._v(" "),i("tr",[i("td",{staticClass:"left-td"},[t._v("交通指引")]),t._v(" "),i("td",{staticClass:"left-td"},t._l(t.formData.trafficGuides,function(e){return i("div",[t._v(t._s(e||""))])}))])])])])])]),t._v(" "),t._m(6),t._v(" "),i("div",{staticClass:"base-info margin-top-15",staticStyle:{"margin-bottom":"20px"}},[i("p",{staticClass:"two-info-show"},[t._v("第二层广告图(1-20张)")]),t._v(" "),i("div",{staticClass:"upload-content-parent"},[t._l(t.diagnosisSecondAdImages,function(e,s){return i("div",{staticClass:"upload-img-list-singer"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){t.showNaturePics("fourPhoto"+s,t.formData.domainName+e.imgUrl)}}},[i("img",{ref:"fourPhoto"+s,refInFor:!0,staticClass:"img-div",attrs:{src:t.formData.domainName+e.imgUrl}})]),t._v(" "),i("div",{staticClass:"ios-trash-outline-parent"},[i("button",[t._v("修改")]),t._v(" "),i("input",{attrs:{value:"",type:"file",accept:"image/*"},on:{change:function(e){t.uploadImgFour(s,e)}}})]),t._v(" "),i("div",{staticClass:"upload-list-cover"},[i("button",{staticClass:"ios-trash-outline",on:{click:function(i){t.handleRemoveFour(s,e)}}},[t._v("删除")])])])}),t._v(" "),i("upload",{ref:"productPhoto",attrs:{type:"drag","on-success":t.handleSuccessFourLayer,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,format:["jpg","jpeg","png","gif"],accept:"image/*","before-upload":t.handleBeforeUploadThree,multiple:"","default-file-list":t.twoLevelImg,"max-size":20480,action:t.uploadAction}},[i("div",{staticStyle:{width:"88px",height:"88px","line-height":"88px","text-align":"center"}},[i("span",[i("i",{staticClass:"icon-camera"}),t._v("上传图片")])])])],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-info"},[e("h3",[this._v("活动策划3（宣传重点）")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"base-info"},[i("p",{staticClass:"title-info"},[t._v("2、宣传重点定义")]),t._v(" "),i("p",{staticClass:"info-show two-info-show"},[t._v("(1)第一层重点宣传文案和图片")]),t._v(" "),i("p",{staticClass:"info-show",staticStyle:{"margin-top":"5px"}},[t._v('任务：从"显示内容"里，选出2-3个宣传重点，不用排列顺序')]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("使用方法：")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v('第一层广告中，"优惠内容"通常作为的宣传重点之一。另外1-2个宣传重点，在"营销需求和营销两点"中挑选')]),t._v(" "),i("p",{staticClass:"info-show"},[t._v('"营销需求"中，商户有提到要做新店开业、节假日营销、店庆活动、新品推出、推主打/高毛利产品的，通常可作为重点之一')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"diagnosis-module every-th"},[this._v("诊断模块")]),this._v(" "),e("th",{staticClass:"diagnosis-module every-th"},[this._v("宣传重点")]),this._v(" "),e("th",{staticClass:"diagnosis-module every-th"},[this._v("广告宣传重点*")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-info"},[e("p",{staticClass:"info-show info-show-color"},[this._v("举例")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("优惠活动：新品上市，X月X日到X月X日，全场牛腩8折，喜乐潮汕牛腩煲每天免单前58名")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("主推产品：最细牛腩。新西兰天然草饲牛，牛腩块富含肌肉纤维，脂肪含量更低，肉质紧密结实，油花嫩筋浓香可口，好吃不怕胖，适合全家食用。")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("口碑品牌：大众点评网评价：广州牛肉火锅店口碑榜第一名。")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"base-info",staticStyle:{"margin-top":"40px"}},[i("p",{staticClass:"info-show two-info-show"},[t._v("(2)第二层重点宣传文案和图片")]),t._v(" "),i("p",{staticClass:"info-show",staticStyle:{"margin-top":"5px"}},[t._v("任务：定义3个以上宣传重点")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("使用方法")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("1、优惠形式，通常都是宣传重点之一")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("2、另外的宣传重点，在产品特色、店铺特色和地址电话中挑选")]),t._v(" "),i("p",{staticClass:"info-show"},[t._v("3、如果内容齐全，宣传重点的参考顺序为：①优惠内容。②产品特色中，本次活动要推广的产品要必选，该店铺的产品特色可根据店铺情况辅助说明。③店铺特色（根据店铺情况定义内容和顺序）。④店铺地址信息及电话。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"diagnosis-module every-th"},[this._v("显示模块")]),this._v(" "),e("th",{staticClass:"diagnosis-module every-th"},[this._v("宣传重点")]),this._v(" "),e("th",{staticClass:"diagnosis-module every-th"},[this._v("广告宣传重点*")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-info"},[e("p",{staticClass:"info-show info-show-color"},[this._v("举例")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("优惠活动：新品上市，X月X日到X月X日，全场牛腩8折，喜乐潮汕牛腩煲每天免单前58名")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("主推产品：最细牛腩。新西兰天然草饲牛，牛腩块富含肌肉纤维，脂肪含量更低，肉质紧密结实，油花嫩筋浓香可口，好吃不怕胖，适合全家食用。")]),this._v(" "),e("p",{staticClass:"info-show info-show-color"},[this._v("口碑品牌：大众点评网评价：广州牛肉火锅店口碑榜第一名。")])])}]};var ot=i("VU/8")(st,at,!1,function(t){i("TiR/")},null,null).exports,nt={data:function(){return{splitId:"",taskId:"",procInsId:"",pageList:[],currentPageNum:-1,defaultPageNum:0,taskUser:"",startDate:"",endDate:"",followTaskDetailWrap:"",isPromotionProposalAudit:window.is_promotion_proposal_audit,isModifyPromotionProposal:window.is_modify_promotion_proposal,flowVersion:window.task_flow_version}},mounted:function(){this.getChildPagesParams()&&this.initChildPages()},methods:{getChildPagesParams:function(){var t=Object(h.getRequest)();return!!(t&&t.splitId&&t.taskId)&&(this.splitId=t.splitId,this.taskId=t.taskId,this.procInsId=t.procInsId,this.taskUser=t.taskUser,this.startDate=t.startDate,this.endDate=t.endDate,this.followTaskDetailWrap=t.followTaskDetailWrap,!0)},initChildPages:function(){var t=this,e={splitId:this.splitId,taskId:this.taskId,procInsId:this.procInsId,isPromotionProposalAudit:this.isPromotionProposalAudit,followTaskDetailWrap:this.followTaskDetailWrap};this.pageList.push({page:w,pageData:e}),this.pageList.push({page:j,pageData:e}),this.pageList.push({page:H,pageData:e}),this.pageList.push({page:X,pageData:e}),this.pageList.push({page:ot,pageData:e}),this.currentPageNum=this.defaultPageNum,this.$nextTick(function(){t.$refs["page-child"][t.currentPageNum].initData()})},initStepByPhone:function(t){var e=this;d.a.get(ctx+"/diagnosis/diagnosisForm/byPhone/"+this.splitId).then(function(i){if(Array.isArray(i.data.attach.activityGoalList))for(var s=0;s<i.data.attach.activityGoalList.length;s++)if(i.data.attach.activityGoalList[s].checked&&"coupons_attract_customer"===i.data.attach.activityGoalList[s].value){e.pageList.splice(4,0,{page:Q,pageData:t});break}})},addStep:function(t){var e={splitId:this.splitId,taskId:this.taskId,followTaskDetailWrap:this.followTaskDetailWrap};t&&5===this.pageList.length?this.pageList.splice(4,0,{page:Q,pageData:e}):!t&&this.pageList.length>5&&this.pageList.splice(4,1)},pageChange:function(t){var e=this;this.followTaskDetailWrap||this.isPromotionProposalAudit?(this.currentPageNum=t,this.$refs["page-child"][t].initData()):this.pageSave(function(){e.currentPageNum=t,e.$refs["page-child"][t].initData()},1)},pageSave:function(t,e){var i=this.$refs["page-child"][this.currentPageNum].pageSave(e);i instanceof m.a&&i.then(function(e){e&&"function"==typeof t&&t()}).catch(function(t){popup.tip("error","error")})},publishProcedure:function(){var t=this;if(!this.flowVersion){var e=this,i=function(){d.a.get(ctx+"/diagnosis/diagnosisForm/publishToWxapp",{params:{splitId:t.splitId}}).then(function(e){var i,s;"0"===e.data.code?(popup.tip("发布成功！","info"),i=ctx+"/message/erpServiceSchedule/saveProgress",s=[{procInsId:t.procInsId,serviceType:"SplitJuYinKe",status:"Begin",type:"PromotionProposalConfirm"}],d.a.get(i,{params:{paramJson:u()(s)}}),pageDataObject.runSaveMessageRecord&&function(){var e=ctx+"/message/erpServiceMessage/saveMessageRecord",i=[{procInsId:t.procInsId,serviceType:"SplitJuYinKe",status:"Begin",nodeType:"PromotionProposalConfirm"}];d.a.get(e,{params:{paramJson:u()(i)}})}()):popup.tip(e.data.message||"发布失败！","info")}).catch(function(t){popup.tip("error","error")})};popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:"确定要发布到小程序吗？",confirmCallBack:function(){e.pageSave(function(){i()},2)},cancelCallBack:function(){}})}},sureAccomplish:function(){if(this.followTaskDetailWrap||this.isPromotionProposalAudit)return!1;var t=this,e=this.isModifyPromotionProposal?ctx+"/jyk/flow/3p2/modify_promotion_proposal_3.2":"3.2"===this.flowVersion?ctx+"/jyk/flow/3p2/management_diagnosis_marketing_planning_3.2":ctx+"/jyk/flow/accountZhixiao/management_diagnosis_marketing_planning_3.1",i=function(i){d.a.get(e,{params:{procInsId:t.procInsId,splitId:t.splitId,taskId:t.taskId,proposalAudit:i}}).then(function(t){"0"===t.data.code?(popup.tip("完成经营诊断&营销方案成功！","info"),"function"==typeof updatePage?updatePage():location.href=ctx+"/workflow/tasklist"+function(){var t=sessionStorage.getItem("taskListFormData"),e="";if(t){var i=JSON.parse(t);for(var s in i)e+=s+"="+i[s]+"&";e="?"+e}return e.slice(0,-1)}()):popup.tip(t.data.message||"完成经营诊断&营销方案失败了！","info")}).catch(function(t){popup.tip("处理经营诊断&营销方案失败了！","info")})};"3.2"===this.flowVersion?d.a.get(ctx+"/jyk/flow/3p2/userListByRole").then(function(e){Array.isArray(e.data)?erpShopApp.sureAccomplishConfirm(e.data,function(e){t.pageSave(function(){i(e)},2)}):popup.tip("处理经营诊断&营销方案失败了！","info")}):(popup.setDefaults({languageDefaults:{ok:"确定",cancel:"取消"}}),popup.confirm({title:"提示",message:"确定完成经营诊断&营销方案吗？",confirmCallBack:function(){t.pageSave(function(){i()},2)},cancelCallBack:function(){}}))}},components:{}},rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-parent"},[i("div",{staticClass:"page-child-wrap"},t._l(t.pageList,function(e,s){return i(e.page,{directives:[{name:"show",rawName:"v-show",value:t.currentPageNum===s,expression:"currentPageNum === index"}],key:s,ref:"page-child",refInFor:!0,tag:"component",attrs:{"page-data":e.pageData},on:{addStep:t.addStep}})})),t._v(" "),i("div",{staticClass:"footer-bar"},[i("div",{staticClass:"info-wrap"},[i("p",[t._v("负责人："+t._s(t.taskUser))]),t._v(" "),i("p",[t._v(t._s(t.startDate)+" -- "+t._s(t.endDate))])]),t._v(" "),i("div",{staticClass:"btn-wrap"},[t._l(t.pageList.length,function(e){return i("button",{staticClass:"btn btn-page",class:{"btn-primary":t.currentPageNum===e-1},on:{click:function(i){t.pageChange(e-1)}}},[t._v(t._s(e))])}),t._v(" "),t.isPromotionProposalAudit?t._e():[i("button",{staticClass:"btn btn-save",attrs:{disabled:!!t.followTaskDetailWrap},on:{click:function(e){t.pageSave(null,0)}}},[t._v("保存")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.flowVersion&&t.currentPageNum===t.pageList.length-1,expression:"!flowVersion && currentPageNum === pageList.length - 1"}],staticClass:"btn",attrs:{disabled:!!t.followTaskDetailWrap},on:{click:t.publishProcedure}},[t._v("发布到小程序")]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.currentPageNum===t.pageList.length-1,expression:"currentPageNum === pageList.length - 1"}],staticClass:"btn",attrs:{disabled:!!t.followTaskDetailWrap},on:{click:t.sureAccomplish}},[t._v("确认完成")])]],2)])])},staticRenderFns:[]};var lt=i("VU/8")(nt,rt,!1,function(t){i("An3k")},"data-v-69d74f3b",null).exports;function ct(t){return isNaN(t)?"":Math.abs(+t)}l.default.config.productionTip=!1,l.default.config.devtools=!1,r()(s).forEach(function(t){l.default.filter(t,s[t])}),new l.default(o()({},lt)).$mount("#rootNode")},Ck2n:function(t,e){},H0Ff:function(t,e,i){"use strict";var s,a=i("bOdI"),o=i.n(a),n=ctx+"/store/basic/erpStoreInfo";e.a=(s={uploadUrl:"oc.yunnex.com"===location.hostname?"http://oc.yunnex.com/":"http://erp.zb25.com.cn/",uploadfiles:n+"/file/erpFileInfo/uploadFile",urlErpShopInfoList:n+"/urlErpShopInfoList",shoprolelist:n+"/shoprolelist",getlist:n+"/getlist",getSynthesizeList:n+"/getSynthesizeList",getShopInfo:n+"/getShopInfo",newStorelist:n+"/newStorelist",queryMainStoreInfo:n+"/queryMainStoreInfo",addlinkman:n+"/addlinkman",updatelinkman:n+"/updatelinkman",deletelinkman:n+"/deletelinkman",basicinformationlist:n+"/basicinformationlist",upload:ctx+"/file/erpFileInfo/uploadFile",addbasicinformation:n+"/addbasicinformation",wxpaylist:n+"/wxpaylist",addwxpay:n+"/addwxpay",addNewStore:n+"/addNewStore",unionpaylist:n+"/unionpaylist",addunionpaypay:n+"/addunionpaypay",friendslist:n+"/friendslist",addfriends:n+"/addfriends",weibolist:n+"/weibolist",addweibo:n+"/addweibo",momolist:n+"/momolist",addmomo:n+"/addmomo",photolist:n+"/photolist",addphoto:n+"/addphoto"},o()(s,"momolist",n+"/momolist"),o()(s,"zhangbeilist",n+"/zhangbeilist"),o()(s,"mainstore",n+"/mainstore"),o()(s,"zhangbeiaudit",n+"/zhangbeiaudit"),o()(s,"wxpayOpen",n+"/wxpayOpen"),o()(s,"wxpayaudit",n+"/wxpayaudit"),o()(s,"unionOpen",n+"/unionOpen"),o()(s,"unionaudit",n+"/unionaudit"),o()(s,"friendCheckList",n+"/friendCheckList"),o()(s,"friendCheck",n+"/friendCheck"),o()(s,"weiboCheckList",n+"/weiboCheckList"),o()(s,"momoCheckList",n+"/momoCheckList"),o()(s,"momoCheck",n+"/momoCheck"),o()(s,"weiboCheck",n+"/weiboCheck"),o()(s,"bankCopy",n+"/bankCopy"),o()(s,"findZhangbeiIntopieceInfo",n+"/findZhangbeiIntopieceInfo"),o()(s,"findWxIntopieceInfo",n+"/findWxIntopieceInfo"),o()(s,"findUnionIntopieceInfo",n+"/findUnionIntopieceInfo"),s)},"TiR/":function(t,e){},ZY74:function(t,e){},b3FJ:function(t,e){},bMSU:function(t,e){},bQP2:function(t,e){},uQuL:function(t,e){}},["C8im"]);