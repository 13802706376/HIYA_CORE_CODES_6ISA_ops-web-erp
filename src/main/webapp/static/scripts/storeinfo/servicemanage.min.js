webpackJsonp([106],{OeLw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("7+uW"),o=s("woOf"),r=s.n(o),c=s("mtWM"),d=s.n(c),p=s("z8oL"),l={props:["type","zhangbeiId"],data:function(){return{staticData:{process:"查看进度",finish:"查看服务记录",text:"暂无数据",servicePending:["订单","商品名称","服务项目","待处理","服务期限（月）","到期时间","有效性"],serviceProcess:["订单","商品名称","服务项目","处理进度","运营顾问","服务开始时间"],serviceFinish:["订单","商品名称","服务项目","运营顾问","服务开始时间","服务结束时间","操作"]},datas:{Pending:[],Process:[],Finish:[]}}},watch:{type:function(t,e){t!==e&&this.getListOfShop(t)}},mounted:function(){this.getListOfShop(this.type)},methods:{getListOfShop:function(t){var e=this,s=ctx+"/shop/erpShopInfo/getOperationServiceByZhangbeiId";d.a.get(s,{params:{type:t.toLocaleLowerCase(),zhangbeiId:this.zhangbeiId}}).then(function(s){"0"===s.data.code&&Array.isArray(s.data.attach)&&(e.datas[t]=s.data.attach)})},showProcess:function(t){erpApp.showTaskPocess(ctx+"/workflow/toTaskHistoicFlow?procInstId="+t+"&from=serviceManage")}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["Pending"===t.type?s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.servicePending,function(e,a){return s("th",{key:"Pending"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Pending.length?t._l(t.datas.Pending,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.serviceItemName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.pendingServiceNum))]),t._v(" "),s("td",[t._v(t._s(e.serviceTerm||"/"))]),t._v(" "),s("td",[t._v(t._s(e.expirationTime||"/"))]),t._v(" "),s("td",[t._v(t._s(e.availability||"/"))])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.servicePending.length}},[t._v(t._s(t.staticData.text))])])]],2)]):"Process"===t.type?s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.serviceProcess,function(e,a){return s("th",{key:"Process"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Process.length?t._l(t.datas.Process,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.serviceItemName||"/"))]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.showProcess(e.procInsId)}}},[t._v(t._s(t.staticData.process))])]),t._v(" "),s("td",[t._v(t._s(e.operationAdviserName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.startTime||"/"))])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.serviceProcess.length}},[t._v(t._s(t.staticData.text))])])]],2)]):s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.serviceFinish,function(e,a){return s("th",{key:"Finish"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Finish.length?t._l(t.datas.Finish,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.serviceItemName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.operationAdviserName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.startTime||"/"))]),t._v(" "),s("td",[t._v(t._s(e.endTime||"/"))]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.showProcess(e.procInsId)}}},[t._v(t._s(t.staticData.finish))])])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.serviceFinish.length}},[t._v(t._s(t.staticData.text))])])]],2)])])},staticRenderFns:[]},_=s("VU/8")(l,v,!1,null,null,null).exports,h={props:["type","zhangbeiId"],data:function(){return{staticData:{process:"查看进度",finish:"查看服务记录",text:"暂无数据",servicePending:["订单","套餐名称","套餐版本","待处理"],serviceProcess:["订单","套餐名称","套餐版本","处理中","处理进度","运营顾问","策划专家","服务开始时间"],serviceFinish:["订单","套餐名称","套餐版本","处理完成","运营顾问","策划专家","服务开始时间","服务结束时间","操作"]},datas:{Pending:[],Process:[],Finish:[]}}},watch:{type:function(t,e){t!==e&&this.getListOfShop(t)}},mounted:function(){this.getListOfShop(this.type)},methods:{getListOfShop:function(t){var e=this,s=ctx+"/shop/erpShopInfo/getJykGoodInfoByZhangbeiId";d.a.get(s,{params:{type:t.toLocaleLowerCase(),zhangbeiId:this.zhangbeiId}}).then(function(s){"0"===s.data.code&&Array.isArray(s.data.attach)&&(e.datas[t]=s.data.attach)})},showProcess:function(t){erpApp.showTaskPocess(ctx+"/workflow/toTaskHistoicFlow?procInstId="+t+"&from=serviceManage")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["Pending"===t.type?s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.servicePending,function(e,a){return s("th",{key:"Pending"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Pending.length?t._l(t.datas.Pending,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.version||"/"))]),t._v(" "),s("td",[t._v(t._s(e.pendingNum))])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.servicePending.length}},[t._v(t._s(t.staticData.text))])])]],2)]):"Process"===t.type?s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.serviceProcess,function(e,a){return s("th",{key:"Process"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Process.length?t._l(t.datas.Process,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderSplitNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.version||"/"))]),t._v(" "),s("td",[t._v(t._s(e.splitNum))]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.showProcess(e.procInsId)}}},[t._v(t._s(t.staticData.process))])]),t._v(" "),s("td",[t._v(t._s(e.operationAdviserName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.planningExpertName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.startTime||"/"))])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.serviceProcess.length}},[t._v(t._s(t.staticData.text))])])]],2)]):s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.staticData.serviceFinish,function(e,a){return s("th",{key:"Finish"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.datas.Finish.length?t._l(t.datas.Finish,function(e,a){return s("tr",[s("td",[t._v(t._s(e.orderSplitNumber||"/"))]),t._v(" "),s("td",[t._v(t._s(e.goodName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.version||"/"))]),t._v(" "),s("td",[t._v(t._s(e.splitNum))]),t._v(" "),s("td",[t._v(t._s(e.operationAdviserName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.planningExpertName||"/"))]),t._v(" "),s("td",[t._v(t._s(e.startTime||"/"))]),t._v(" "),s("td",[t._v(t._s(e.endTime||"/"))]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.showProcess(e.procInsId)}}},[t._v(t._s(t.staticData.finish))])])])}):[s("tr",[s("td",{attrs:{colspan:t.staticData.serviceFinish.length}},[t._v(t._s(t.staticData.text))])])]],2)])])},staticRenderFns:[]},f=s("VU/8")(h,u,!1,null,null,null).exports,m={data:function(){return{staticData:{text:"暂无数据",colums:["平台到期时间：","绑定的运营顾问："],title:["商户运营服务项目","聚引客服务项目","商户对接人","添加对接人","修改","删除"],selectTitle:[{text:"待处理",num:"pendingNum"},{text:"处理中",num:"processNum"},{text:"处理完成",num:"finishNum"}]},serviceShop:{serviceofshop:["Pending","Process","Finish"],index:0,sum:{finishNum:0,pendingNum:0,processNum:0}},serviceJyk:{serviceofjyk:["Pending","Process","Finish"],index:0,sum:{finishNum:0,pendingNum:0,processNum:0}},linkMan:{clos:["序号","姓名","职位","手机号","微信号","操作"],list:[]},operationAdviserName:"",erpShopInfos:{shopId:"",operationAdviserName:"",zhangbeiId:""},zhangbeiId:erpApp.getQueryString("zhangbeiId")}},components:{headmenu:p.a,serviceofshop:_,serviceofjyk:f},mounted:function(){this.getSumOfShop("operationService"),this.getSumOfShop("jykService");try{var t=JSON.parse(sessionStorage.getItem("erpShopInfos"));this.operationAdviserName=pageDataObject.operationAdviserName||t.operationAdviserName||"",this.queryActualLinkMan(t.shopId),r()(this.erpShopInfos,t)}catch(t){this.operationAdviserName=pageDataObject.operationAdviserName||""}},methods:{getSumOfShop:function(t){var e=this;d.a.get(ctx+"/shop/erpShopInfo/getServiceSumByZhangbeiId",{params:{serviceType:t,zhangbeiId:this.zhangbeiId}}).then(function(s){"0"===s.data.code&&"object"===erpApp.util.type(s.data.attach)&&("operationService"===t?r()(e.serviceShop.sum,s.data.attach):r()(e.serviceJyk.sum,s.data.attach))})},queryActualLinkMan:function(t){var e=this;d.a.get(ctx+"/shop/erpShopActualLinkman/findActualLinkManByShopInfoId",{params:{shopInfoId:t}}).then(function(t){Array.isArray(t.data)&&t.data.length&&(e.linkMan.list=t.data)})},changeList:function(t,e){this[t].index=e},addContact:function(t,e){var s=this,a=t?this.linkMan.list[e]:null,i=t?"修改":"添加",n=this.erpShopInfos.shopId;erpApp.addContact(a,function(a){t?(s.linkMan.list[e].name=a.name,s.linkMan.list[e].phoneNo=a.phoneNo,s.linkMan.list[e].position=a.position,s.linkMan.list[e].wechatID=a.wechatID,a.id=s.linkMan.list[e].id,a.shopInfoId=s.linkMan.list[e].shopInfoId||n):(a.id=null,a.shopInfoId=n),d.a.post(ctx+"/shop/erpShopActualLinkman/saveOrUpdateEntity",a).then(function(o){"0"===o.data.code?(erpApp.tip(o.data.message||i+"成功！"),t?s.linkMan.list.splice(e,1,a):s.queryActualLinkMan(n)):erpApp.tip(o.data.message||i+"失败！")}).catch(function(t){erpApp.tip(i+"失败，请稍后重试！")}),erpApp.closedTip()},1)},removeContact:function(t){var e=this;erpApp.confirm("确定要删除该商户对接人吗？",function(){d.a.post(ctx+"/shop/erpShopActualLinkman/deleteEntity",{id:e.linkMan.list[t].id}).then(function(s){"0"===s.data.code?(erpApp.tip(s.data.message||"删除成功！"),e.linkMan.list.splice(t,1)):erpApp.tip(s.data.message||"删除失败！")}).catch(function(t){erpApp.tip("删除失败，请稍后重试！")})})},comeback:function(){var t=erpShopApp.getQueryString("from",location.href);location.href="taskList"===t?ctx+"/workflow/tasklist":ctx+"/shop/erpShopInfo"}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"store"},[s("headmenu",{attrs:{pageType:"service"}}),t._v(" "),s("div",{staticClass:"act-top positionrelative overview"},[s("ul",{staticClass:"nav nav-tabs"},[s("li",[s("a",{staticClass:"comebacka",attrs:{href:"javascript:;"},on:{click:t.comeback}},[t._v("返回")])]),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"padding10 shopbaseinfo-wrapper"},[s("div",{staticClass:"servicemanage-baseinfo border-wrap margin-bottom-10"},[s("span",{staticClass:"colums"},[t._v(t._s(t.staticData.colums[1])+t._s(t.operationAdviserName))])]),t._v(" "),s("div",{staticClass:"border-wrap margin-bottom-10 storebaseinfo-wrapper"},[s("blockquote",{staticClass:"blockquote"},[s("p",[t._v(t._s(t.staticData.title[0]))])]),t._v(" "),s("div",{staticClass:"headmenu marginbottom10"},[t._l(t.staticData.selectTitle,function(e,a){return[s("a",{staticClass:"btn margin-left-10 displayinlineblock",class:{"btn-primary":t.serviceShop.index===a},on:{click:function(e){e.preventDefault(),t.changeList("serviceShop",a)}}},[t._v("\n\t\t\t\t\t\t"+t._s(e.text)+" "+t._s(t.serviceShop.sum[e.num])+"\n\t\t\t\t\t")])]})],2),t._v(" "),s("div",{staticClass:"service-table-wrapper"},[s("serviceofshop",{attrs:{type:t.serviceShop.serviceofshop[t.serviceShop.index],zhangbeiId:t.zhangbeiId}})],1)]),t._v(" "),s("div",{staticClass:"border-wrap margin-bottom-10 storebaseinfo-wrapper"},[s("blockquote",{staticClass:"blockquote"},[s("p",[t._v(t._s(t.staticData.title[1]))])]),t._v(" "),s("div",{staticClass:"headmenu marginbottom10"},[t._l(t.staticData.selectTitle,function(e,a){return[s("a",{staticClass:"btn margin-left-10 displayinlineblock",class:{"btn-primary":t.serviceJyk.index===a},on:{click:function(e){e.preventDefault(),t.changeList("serviceJyk",a)}}},[t._v("\n\t\t\t\t\t\t"+t._s(e.text)+" "+t._s(t.serviceJyk.sum[e.num])+"\n\t\t\t\t\t")])]})],2),t._v(" "),s("div",{staticClass:"service-table-wrapper"},[s("serviceofjyk",{attrs:{type:t.serviceJyk.serviceofjyk[t.serviceJyk.index],zhangbeiId:t.zhangbeiId}})],1)]),t._v(" "),s("div",{staticClass:"border-wrap margin-bottom-10 storebaseinfo-wrapper"},[s("blockquote",{staticClass:"blockquote"},[s("p",[t._v(t._s(t.staticData.title[2]))]),t._v(" "),s("button",{staticClass:"btn right-top-btn",attrs:{type:"button",title:t.staticData.title[3]},on:{click:function(e){t.addContact(0,0)}}},[s("i",{staticClass:"icon-plus"})])]),t._v(" "),s("div",{staticClass:"service-table-wrapper"},[s("table",{staticClass:"table table-striped table-condensed"},[s("thead",[s("tr",t._l(t.linkMan.clos,function(e,a){return s("th",{key:"clos"+a},[t._v(t._s(e))])}))]),t._v(" "),s("tbody",[t.linkMan.list.length?t._l(t.linkMan.list,function(e,a){return s("tr",[s("td",[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.name||"/"))]),t._v(" "),s("td",[t._v(t._s(e.position||"/"))]),t._v(" "),s("td",[t._v(t._s(e.phoneNo||"/"))]),t._v(" "),s("td",[t._v(t._s(e.wechatID||"/"))]),t._v(" "),s("td",[s("button",{staticClass:"btn",attrs:{type:"button",title:t.staticData.title[4]},on:{click:function(e){t.addContact(1,a)}}},[s("i",{staticClass:"icon-pencil"})]),t._v(" "),s("button",{staticClass:"btn",attrs:{type:"button",title:t.staticData.title[5]},on:{click:function(e){t.removeContact(a)}}},[s("i",{staticClass:"icon-remove"})])])])}):[s("tr",[s("td",{attrs:{colspan:t.linkMan.clos.length}},[t._v(t._s(t.staticData.text))])])]],2)])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"acttitle active"},[e("a",{attrs:{href:"javascript:;"}},[this._v("服务管理")])])}]},b=s("VU/8")(m,g,!1,null,null,null).exports;n.default.config.productionTip=!1,n.default.config.devtools=!1,new n.default(i()({},b)).$mount("#rootNode")},z8oL:function(t,e,s){"use strict";var a={props:["pageType"],data:function(){return{hasZhangbeiId:!1}},mounted:function(){try{var t=JSON.parse(sessionStorage.getItem("erpShopInfos"));this.hasZhangbeiId=!!t.zhangbeiId&&!!t.shopId}catch(t){}},methods:{jump:function(t){if(this.pageType&&this.pageType!==t){var e=JSON.parse(sessionStorage.getItem("erpShopInfos")),s={service:ctx+"/store/basic/erpStoreInfo/serviceManage?id="+e.shopId+"&zhangbeiId="+e.zhangbeiId+"&operationAdviserName="+e.operationAdviserName,info:ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+e.shopId+"&zhangbeiId="+e.zhangbeiId,audit:ctx+"/store/basic/erpStoreInfo/zhangbei?id="+e.shopId+"&zhangbeiId="+e.zhangbeiId};location.href=s[t]}}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headmenu marginbottom10"},[[s("a",{staticClass:"btn margin-left-10 displayinlineblock",class:{"btn-primary":"service"===t.pageType},on:{click:function(e){e.preventDefault(),t.jump("service")}}},[t._v("服务管理")]),t._v(" "),s("a",{staticClass:"btn displayinlineblock",class:{"btn-primary":"info"===t.pageType},on:{click:function(e){e.preventDefault(),t.jump("info")}}},[t._v("商户资料")]),t._v(" "),s("a",{staticClass:"btn displayinlineblock",class:{"btn-primary":"audit"===t.pageType},on:{click:function(e){e.preventDefault(),t.jump("audit")}}},[t._v("进件管理")])]],2)},staticRenderFns:[]},n=s("VU/8")(a,i,!1,null,null,null);e.a=n.exports}},["OeLw"]);