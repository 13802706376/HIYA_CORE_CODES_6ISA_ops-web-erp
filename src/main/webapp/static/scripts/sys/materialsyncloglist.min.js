webpackJsonp([105],{"+ryu":function(t,e,a){"use strict";var s={data:function(){return{index:this.pageIndex,limit:this.pageSize,size:this.total||1,showPrevMore:!1,showNextMore:!1}},watch:{pageIndex:function(t){this.index=t||1},pageSize:function(t){this.limit=t||10},total:function(t){this.size=t||1}},props:{perPages:{type:Number,default:5},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.size/this.limit)},pagers:function(){var t=[],e=this.perPages,a=this.pages,s=this.index,n=Math.ceil((e-1)/2),i={start:s-n,end:s+n};i.start<1&&(i.end=i.end+(1-i.start),i.start=1),i.end>a&&(i.start=i.start-(i.end-a),i.end=a),i.start<1&&(i.start=1),this.showPrevMore=i.start>1,this.showNextMore=i.end<a;for(var r=i.start;r<=i.end;r++)t.push(r);return t}},methods:{prev:function(){this.index>1&&this.go(this.index-1)},next:function(){this.index<this.pages&&this.go(this.index+1)},first:function(){1!==this.index&&this.go(1)},last:function(){this.index!=this.pages&&this.go(this.pages)},go:function(t){this.index!==t&&(this.index=t,this.$emit("change",this.index))}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination"},[a("ul",[a("li",{class:{disabled:1===t.index}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.prev}},[t._v("« 上一页")])]),t._v(" "),t.showPrevMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[t._v("...")])]):t._e(),t._v(" "),t._l(t.pagers,function(e){return a("li",{class:{active:t.index===e}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){t.go(e)}}},[t._v(t._s(e))])])}),t._v(" "),t.showNextMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[t._v("...")])]):t._e(),t._v(" "),a("li",{class:{disabled:t.index===t.pages}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.next}},[t._v("下一页 »")])]),t._v(" "),a("li",{staticClass:"disabled controls"},[a("a",{attrs:{href:"javascript:;"}},[t._v("当前 \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],attrs:{type:"text",disabled:""},domProps:{value:t.index},on:{input:function(e){e.target.composing||(t.index=e.target.value)}}}),t._v(" / \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],attrs:{type:"text",disabled:""},domProps:{value:t.pageSize},on:{input:function(e){e.target.composing||(t.pageSize=e.target.value)}}}),t._v(" \r\n\t\t\t\t条，共 "+t._s(t.total)+" 条\r\n\t\t\t")])])],2),t._v(" "),a("div",{staticStyle:{clear:"both"}})])},staticRenderFns:[]},i=a("VU/8")(s,n,!1,null,null,null);e.a=i.exports},"4sHf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i=a("7+uW"),r=a("mtWM"),o=a.n(r),c={data:function(){return{params:{exceptionOnly:!0,syncDateEnd:"",syncDateStart:"",page:{pageNo:1,pageSize:30}},count:0,hasPermission:hasPermission,cols:["同步日期","易商订单ID","贝虎订单号","商户掌贝ID","订单类别","同步情况","操作"],list:[],pagination:"",orderType:{First:"首次",Update:"更新"},noNormalStatus:["NoOrderNo","NoZhangbeiId","NoFirstMarketingPlanService","SyncMaterialStatusFailed"]}},components:{pagination:a("+ryu").a},mounted:function(){this.queryMaterialSyncLog()},methods:{queryMaterialSyncLog:function(){var t=this;this.list.length=0,o.a.post(ctx+"/order/erpOrderMaterialSyncLog/page",this.params).then(function(e){Array.isArray(e.data.list)&&(t.list=e.data.list),t.count=e.data.count})},toSync:function(t){var e=this;t?(erpApp.tip("正在同步，请稍等...","loading",{timeout:0,persistent:!0}),o.a.post(ctx+"/order/erpOrderOriginalInfo/syncOneOrderMaterial?ysOrderId="+t).then(function(t){"0"===t.data.code?(erpApp.tip("同步成功！"),e.queryMaterialSyncLog()):erpApp.tip(t.data.message||"同步失败！")})):erpApp.tip("无易商订单ID，同步失败！")},reset:function(){this.params={exceptionOnly:!0,syncDateEnd:"",syncDateStart:"",page:{pageNo:1,pageSize:30}},this.queryMaterialSyncLog()},changeDate:function(t,e){this.params[e]=t.currentTarget.value},pageChange:function(t){this.params.page.pageNo=t,this.queryMaterialSyncLog()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding10"},[a("div",{staticClass:"breadcrumb form-search"},[a("ul",{staticClass:"ul-form"},[a("li",[a("label",[t._v("日期：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.syncDateStart,expression:"params.syncDateStart"}],staticClass:"input-medium Wdate",attrs:{path:"syncDateStart",id:"syncDateStart",type:"text",maxlength:"20",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm',isShowClear:false,readOnly:true});"},domProps:{value:t.params.syncDateStart},on:{focus:function(e){t.changeDate(e,"syncDateStart")},input:function(e){e.target.composing||t.$set(t.params,"syncDateStart",e.target.value)}}}),t._v(" - \n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.syncDateEnd,expression:"params.syncDateEnd"}],staticClass:"input-medium Wdate",attrs:{path:"syncDateEnd",id:"syncDateEnd",type:"text",maxlength:"20",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd HH:mm',isShowClear:false,readOnly:true});"},domProps:{value:t.params.syncDateEnd},on:{focus:function(e){t.changeDate(e,"syncDateEnd")},input:function(e){e.target.composing||t.$set(t.params,"syncDateEnd",e.target.value)}}})]),t._v(" "),a("li",[a("label",{staticStyle:{width:"150px","text-align":"left"},attrs:{for:"exceptionOnly"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.exceptionOnly,expression:"params.exceptionOnly"}],attrs:{id:"exceptionOnly",name:"exceptionOnly",type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.params.exceptionOnly)?t._i(t.params.exceptionOnly,"true")>-1:t.params.exceptionOnly},on:{change:function(e){var a=t.params.exceptionOnly,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=t._i(a,"true");s.checked?i<0&&(t.params.exceptionOnly=a.concat(["true"])):i>-1&&(t.params.exceptionOnly=a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.params,"exceptionOnly",n)}}}),t._v("\n                    只查询异常信息\n                ")])]),t._v(" "),a("li",{staticClass:"btns"},[a("input",{staticClass:"btn btn-primary",attrs:{id:"btnSubmit",type:"submit",value:"筛选"},on:{click:t.queryMaterialSyncLog}})]),t._v(" "),a("li",{staticClass:"btns"},[a("input",{staticClass:"btn btn-warning",attrs:{type:"reset",value:"重置"},on:{click:t.reset}})]),t._v(" "),a("li",{staticClass:"clearfix"})])]),t._v(" "),a("div",{staticClass:"margin-top-10"},[a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[a("thead",[a("tr",t._l(t.cols,function(e,s){return a("th",{key:"cols"+s},[t._v(t._s(e))])}))]),t._v(" "),a("tbody",[t.list.length>0?t._l(t.list,function(e,s){return a("tr",{key:"list"+s},[a("td",[t._v(t._s(e.syncDate||"/"))]),t._v(" "),a("td",[t._v(t._s(e.ysOrderId||"/"))]),t._v(" "),a("td",[t._v(t._s(e.orderNumber||"/"))]),t._v(" "),a("td",[t._v(t._s(e.zhangbeiId||"/"))]),t._v(" "),a("td",[t._v(t._s(t.orderType[e.orderCategory]||"/"))]),t._v(" "),a("td",[t._v(t._s(e.syncStatusName||"/"))]),t._v(" "),"Normal"!==e.syncStatus?a("td",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){t.toSync(e.ysOrderId)}}},[t._v("同步")])]):a("td",[t._v("/")])])}):[a("tr",[a("td",{attrs:{colspan:t.cols.length}},[a("div",{staticStyle:{height:"300px"}},[t._v("暂无数据，请重新查询")])])])]],2)])]),t._v(" "),t.count>t.params.page.pageSize?[a("pagination",{attrs:{total:t.count,perPages:7,pageIndex:1,pageSize:t.params.page.pageSize},on:{change:t.pageChange}})]:t._e()],2)},staticRenderFns:[]},d=a("VU/8")(c,l,!1,null,null,null).exports;i.default.config.productionTip=!1,i.default.config.devtools=!1,new i.default(n()({},d)).$mount("#rootNode")}},["4sHf"]);