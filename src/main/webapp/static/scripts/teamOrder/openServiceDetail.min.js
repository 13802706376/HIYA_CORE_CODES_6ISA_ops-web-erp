webpackJsonp([14],{"+ryu":function(e,t,a){"use strict";var i={data:function(){return{index:this.pageIndex,limit:this.pageSize,size:this.total||1,showPrevMore:!1,showNextMore:!1}},watch:{pageIndex:function(e){this.index=e||1},pageSize:function(e){this.limit=e||10},total:function(e){this.size=e||1}},props:{perPages:{type:Number,default:5},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.size/this.limit)},pagers:function(){var e=[],t=this.perPages,a=this.pages,i=this.index,s=Math.ceil((t-1)/2),r={start:i-s,end:i+s};r.start<1&&(r.end=r.end+(1-r.start),r.start=1),r.end>a&&(r.start=r.start-(r.end-a),r.end=a),r.start<1&&(r.start=1),this.showPrevMore=r.start>1,this.showNextMore=r.end<a;for(var n=r.start;n<=r.end;n++)e.push(n);return e}},methods:{prev:function(){this.index>1&&this.go(this.index-1)},next:function(){this.index<this.pages&&this.go(this.index+1)},first:function(){1!==this.index&&this.go(1)},last:function(){this.index!=this.pages&&this.go(this.pages)},go:function(e){this.index!==e&&(this.index=e,this.$emit("change",this.index))}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination"},[a("ul",[a("li",{class:{disabled:1===e.index}},[a("a",{attrs:{href:"javascript:;"},on:{click:e.prev}},[e._v("« 上一页")])]),e._v(" "),e.showPrevMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[e._v("...")])]):e._e(),e._v(" "),e._l(e.pagers,function(t){return a("li",{class:{active:e.index===t}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){e.go(t)}}},[e._v(e._s(t))])])}),e._v(" "),e.showNextMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[e._v("...")])]):e._e(),e._v(" "),a("li",{class:{disabled:e.index===e.pages}},[a("a",{attrs:{href:"javascript:;"},on:{click:e.next}},[e._v("下一页 »")])]),e._v(" "),a("li",{staticClass:"disabled controls"},[a("a",{attrs:{href:"javascript:;"}},[e._v("当前 \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.index,expression:"index"}],attrs:{type:"text",disabled:""},domProps:{value:e.index},on:{input:function(t){t.target.composing||(e.index=t.target.value)}}}),e._v(" / \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],attrs:{type:"text",disabled:""},domProps:{value:e.pageSize},on:{input:function(t){t.target.composing||(e.pageSize=t.target.value)}}}),e._v(" \r\n\t\t\t\t条，共 "+e._s(e.total)+" 条\r\n\t\t\t")])])],2),e._v(" "),a("div",{staticStyle:{clear:"both"}})])},staticRenderFns:[]},r=a("VU/8")(i,s,!1,null,null,null);t.a=r.exports},"8vu0":function(e,t,a){"use strict";var i=a("mvHQ"),s=a.n(i),r=a("mtWM"),n=a.n(r),o={props:[""],data:function(){return{redeployList:[],userOperationManagerList:[],userOperationManagerListSelect:{},materialConsultantUserList:[],materialConsultantUserListSelect:{},openAccountConsultantUserList:[],openAccountConsultantUserListSelect:{},operationAdviserUserList:[],operationAdviserUserListSelect:{},shopName:"",procInsId:""}},components:{},methods:{closeModal:function(){this.$emit("closeModalByRedeploy")},saveData:function(){var e=this,t=[];this.userOperationManagerListSelect.id&&t.push({userId:this.userOperationManagerListSelect.id,roleName:this.userOperationManagerListSelect.remarks?this.userOperationManagerListSelect.remarks:""}),this.openAccountConsultantUserListSelect.id&&t.push({userId:this.openAccountConsultantUserListSelect.id,roleName:this.openAccountConsultantUserListSelect.remarks?this.openAccountConsultantUserListSelect.remarks:""}),this.operationAdviserUserListSelect.id&&t.push({userId:this.operationAdviserUserListSelect.id,roleName:this.operationAdviserUserListSelect.remarks?this.operationAdviserUserListSelect.remarks:""}),this.materialConsultantUserListSelect.id&&t.push({userId:this.materialConsultantUserListSelect.id,roleName:this.materialConsultantUserListSelect.remarks?this.materialConsultantUserListSelect.remarks:""}),n()({method:"post",url:ctx+"/visit/flow/changeRoleUser",data:{procInsId:this.procInsId,userOrTeamObj:s()(t)},transformRequest:[function(e){var t="";for(var a in e)"object"===erpApp.util.type(e[a])?t+=encodeURIComponent(a)+"="+s()(e[a])+"&":t+=encodeURIComponent(a)+"="+e[a]+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t.data.result?(e.closeModal(),e.$emit("getData"),erpShopApp.tip("操作成功!")):erpShopApp.tip("操作失败!")}).catch(function(e){erpShopApp.tip("出错了，请稍后重试！","error",null)})},pageData:function(e,t){var a=this;this.redeployList.length=0,this.shopName=t,this.procInsId=e,n.a.get(ctx+"/visit/flow/changeRoleList?procInsId="+e).then(function(e){if(e.data.result&&(a.userOperationManagerList=e.data.userOperationManagerList,a.materialConsultantUserList=e.data.materialConsultantUserList,a.openAccountConsultantUserList=e.data.openAccountConsultantUserList,a.operationAdviserUserList=e.data.operationAdviserUserList,e.data.hasOwnProperty("list")&&Array.isArray(e.data.list))){var t=e.data.list,i=[];t.forEach(function(e){if("operationManager"===e.role){var t=a.userOperationManagerList.filter(function(t){return t.name===e.name});t.length?a.userOperationManagerListSelect=t[0]:(a.userOperationManagerListSelect=e,a.userOperationManagerList.push(e))}else if("accountAdviser"===e.role){var i=a.openAccountConsultantUserList.filter(function(t){return t.name===e.name});i.length?a.openAccountConsultantUserListSelect=i[0]:(a.openAccountConsultantUserListSelect=e,a.openAccountConsultantUserList.push(e))}else if("OperationAdviser"===e.role){var s=a.operationAdviserUserList.filter(function(t){return t.name===e.name});s.length?a.operationAdviserUserListSelect=s[0]:(a.operationAdviserUserListSelect=e,a.operationAdviserUserList.push(e))}else if("materialAdviser"===e.role){var r=a.materialConsultantUserList.filter(function(t){return t.name===e.name});r.length?a.materialConsultantUserListSelect=r[0]:(a.materialConsultantUserListSelect=e,a.materialConsultantUserList.push(e))}}),i.push(t.filter(function(e){return"operationManager"===e.role})),i.push(t.filter(function(e){return"OperationAdviser"===e.role})),i.push(t.filter(function(e){return"accountAdviser"===e.role})),i.push(t.filter(function(e){return"materialAdviser"===e.role})),i.forEach(function(e){e.length&&a.redeployList.push(e[0])})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mask-widget"},[a("div",{staticClass:"form-horizontal clearboth erpstore-horizontal"},[a("p",{staticClass:"title-mask"},[e._v("转派任务处理人")]),e._v(" "),a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[e._m(0),e._v(" "),a("tbody",[e._l(e.redeployList,function(t,i){return"operationManager"===t.role||"accountAdviser"===t.role||"OperationAdviser"===t.role||"materialAdviser"===t.role?a("tr",{key:"redeploy"+i},["operationManager"===t.role?a("td",[e._v("运营经理")]):e._e(),e._v(" "),"OperationAdviser"===t.role?a("td",[e._v("运营顾问")]):e._e(),e._v(" "),"accountAdviser"===t.role?a("td",[e._v("开户顾问")]):e._e(),e._v(" "),"materialAdviser"===t.role?a("td",[e._v("物料顾问")]):e._e(),e._v(" "),a("td",["operationManager"===t.role?a("select",{directives:[{name:"model",rawName:"v-model",value:e.userOperationManagerListSelect,expression:"userOperationManagerListSelect"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.userOperationManagerListSelect=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[e._v("请选择")]),e._v(" "),e._l(e.userOperationManagerList,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.name))])})],2):e._e(),e._v(" "),"OperationAdviser"===t.role?a("select",{directives:[{name:"model",rawName:"v-model",value:e.operationAdviserUserListSelect,expression:"operationAdviserUserListSelect"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.operationAdviserUserListSelect=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[e._v("请选择")]),e._v(" "),e._l(e.operationAdviserUserList,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.name))])})],2):e._e(),e._v(" "),"accountAdviser"===t.role?a("select",{directives:[{name:"model",rawName:"v-model",value:e.openAccountConsultantUserListSelect,expression:"openAccountConsultantUserListSelect"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.openAccountConsultantUserListSelect=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[e._v("请选择")]),e._v(" "),e._l(e.openAccountConsultantUserList,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.name))])})],2):e._e(),e._v(" "),"materialAdviser"===t.role?a("select",{directives:[{name:"model",rawName:"v-model",value:e.materialConsultantUserListSelect,expression:"materialConsultantUserListSelect"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.materialConsultantUserListSelect=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[e._v("请选择")]),e._v(" "),e._l(e.materialConsultantUserList,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.name))])})],2):e._e()])]):e._e()})],2)])]),e._v(" "),a("div",{staticClass:"button-content"},[a("button",{staticClass:"btn btn-outline",attrs:{type:"button"},on:{click:e.closeModal}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveData}},[e._v("确定")])]),e._v(" "),a("div",{staticClass:"close",on:{click:e.closeModal}},[e._v("×")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("角色")]),this._v(" "),t("th",[this._v("更换任务处理人")])])])}]};var c=a("VU/8")(o,l,!1,function(e){a("Et1L")},"data-v-e7d1a2f0",null);t.a=c.exports},Et1L:function(e,t){},IkXY:function(e,t,a){"use strict";var i=a("pFYg"),s=a.n(i),r={props:["value","options","selectMoreConfig","label","identity","width"],data:function(){return{isShow:!1,selectData:this.options,checkedList:[],isAll:!1,isOver:"",isNochecked:!1,trackByName:this.selectMoreConfig.trackByName,keyName:this.selectMoreConfig.keyName}},watch:{value:function(e,t){if("[object Array]"===Object.prototype.toString.call(e)&&e.length>0){var a=this,i=[];e.forEach(function(e){"object"===(void 0===e?"undefined":s()(e))?i.push(e[a.trackByName]):i.push(e)}),this.checkedList=i}},options:function(e,t){"[object Array]"===Object.prototype.toString.call(e)&&(this.selectData=e)},checkedList:function(e,t){var a=!1,i=this;if(e.length===this.selectData.length?this.isAll=!0:this.isAll=!1,e.length>0&&e.length===t.length?e.every(function(e,i){return e===t[i]||(a=!0,!1)}):a=!0,a){var r=[],n=this.trackByName;e.forEach(function(e){i.selectData.forEach(function(t){var a="object"===(void 0===t?"undefined":s()(t))?t[n]:t;e.toString()===a.toString()&&r.push(t)})}),this.isAll&&(r="all"),this.$emit("input",r,i.identity)}}},computed:{checkedName:function(){var e=this,t="",a=this.trackByName;return this.checkedList.length>0&&this.selectData.length>0?(this.isNochecked=!1,this.checkedList.forEach(function(i){e.selectData.forEach(function(r){"object"===(void 0===r?"undefined":s()(r))&&r[a].toString()===i.toString()?t+=r[e.keyName]+"、":r===i&&(t+=r+"、")})}),t=t.replace(/^\s+|\s+$/g,"").substring(0,t.length-1)):(t=this.selectMoreConfig.placeholder?this.selectMoreConfig.placeholder:"",this.isNochecked=!0),t}},mounted:function(){if(this.value.length>0&&this.options.length>0){var e=this,t=e.trackByName,a=[];this.isAll=this.value.length===this.options.length,this.options.forEach(function(i){Array.isArray(e.value)&&e.value.forEach(function(s){e.isObject(s)&&e.isObject(i)&&s[t].toString()===i[t].toString()?a.push(s[t]):i===s&&a.push(s)})}),this.checkedList=a}document.body.addEventListener("click",this.closeTimeList,!1)},beforeDestroy:function(){document.body.removeEventListener("click",this.closeTimeList,!1)},methods:{isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},allCheck:function(){if(this.isAll)this.checkedList=[];else{var e=this,t=this.trackByName,a=[];this.selectData.forEach(function(i){e.isObject(i)?a.push(i[t]):a.push(i)}),this.checkedList=a}},showSelectClick:function(){this.isShow?this.isShow=!1:this.isShow=!0},closeTimeList:function(e){var t=e.target,a=this.$el.firstChild;t.isEqualNode(a)||(this.isShow=!1)},liMove:function(e){this.isOver=e},selectClick:function(){}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checked-time",style:{width:e.width||"220px"},on:{click:e.showSelectClick}},[a("div",{staticClass:"show-time",class:{"col-gay":e.isNochecked},attrs:{"data-label":this.label,title:e.checkedName}},[e._v("\n        "+e._s(e.checkedName)+"\n    ")]),e._v(" "),a("div",{staticClass:"trangle"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"select-box",on:{click:function(t){t.stopPropagation(),e.selectClick(t)}}},[a("ul",{staticClass:"select-list"},[a("li",{class:{"over-li":-1===e.isOver},on:{mousemove:function(t){e.isOver=-1}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isAll,expression:"isAll"}],attrs:{type:"checkbox",name:"time"},domProps:{checked:Array.isArray(e.isAll)?e._i(e.isAll,null)>-1:e.isAll},on:{change:function(t){var a=e.isAll,i=t.target,s=!!i.checked;if(Array.isArray(a)){var r=e._i(a,null);i.checked?r<0&&(e.isAll=a.concat([null])):r>-1&&(e.isAll=a.slice(0,r).concat(a.slice(r+1)))}else e.isAll=s}}}),e._v(" "),a("label",{staticClass:"fl-left",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.allCheck(t)}}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                   全选\n                ")])]),e._v(" "),e._l(e.selectData,function(t,i){return a("li",{key:"item"+i,staticClass:"clearfix",class:{"over-li":e.isOver===i},on:{mousemove:function(t){e.liMove(i)}}},[e.isString(t)?[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:e.identity+i+"labels"},domProps:{value:t,checked:Array.isArray(e.checkedList)?e._i(e.checkedList,t)>-1:e.checkedList},on:{change:function(a){var i=e.checkedList,s=a.target,r=!!s.checked;if(Array.isArray(i)){var n=t,o=e._i(i,n);s.checked?o<0&&(e.checkedList=i.concat([n])):o>-1&&(e.checkedList=i.slice(0,o).concat(i.slice(o+1)))}else e.checkedList=r}}}),e._v(" "),a("label",{staticClass:"fl-left",attrs:{for:e.identity+i+"labels"}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                       "+e._s(t)+"\n                    ")])]:[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:e.identity+i+"labels"},domProps:{value:t[e.trackByName],checked:Array.isArray(e.checkedList)?e._i(e.checkedList,t[e.trackByName])>-1:e.checkedList},on:{change:function(a){var i=e.checkedList,s=a.target,r=!!s.checked;if(Array.isArray(i)){var n=t[e.trackByName],o=e._i(i,n);s.checked?o<0&&(e.checkedList=i.concat([n])):o>-1&&(e.checkedList=i.slice(0,o).concat(i.slice(o+1)))}else e.checkedList=r}}}),e._v(" "),a("label",{staticClass:"fl-left",attrs:{for:e.identity+i+"labels"}}),e._v(" "),a("span",{staticClass:"fl-left span-time"},[e._v("\n                       "+e._s(t[e.keyName])+"\n                    ")])]],2)})],2)])])},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(e){a("ZdvV")},"data-v-acfdc56c",null);t.a=o.exports},"Nk+Y":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("7+uW"),n=a("ifoU"),o=a.n(n),l=a("mtWM"),c=a.n(l),d=a("+ryu"),u=a("RUzx"),p=a.n(u),h=a("IkXY"),v=a("8vu0"),m={data:function(){return{teamFirst:pageDataObject.teamFirst,teamTwo:pageDataObject.teamTwo,teamThree:pageDataObject.teamThree,tabFlag:0,statisticsList:[],loding:!1,redeployFlag:!1,teamOptions:[],selectObjc:{completeDelivery:{model:["是","否"],options:["是","否"]},delayDelivery:{model:["是","否"],options:["是","否"]},orderType:{model:["服务商","直销"],options:["服务商","直销"]},serviceTypeList:{model:[],options:[]},serviceCodeList:{model:[],options:[]}},selectMoreConfig:{keyName:"label",trackByName:"value",placeholder:"请选择"},delayServiceContentArr:"",dateTypeList:[{id:"order",name:"购买订单"},{id:"should",name:"应完成服务"},{id:"flow",name:"实际完成服务"}],dateTypeListSelect:{},teamList:[],teamListSelect:{},teamMember:[],teamMemberSelect:{id:null,name:"所有成员"},mapKey:new o.a,mapKeyByGode:new o.a,pageNo:1,pageSize:30,total:0,startDateStr:"",endDateStr:"",orderNum:"",shopName:"",notShowQueryList:[],orderType:!0,agentName:!0,openDelayFlag:!0,materielDelayFlag:!0,operationDelayFlag:!0,openDelayDuration:!0,materielDelayDuration:!0,operationDelayDuration:!0,thCountDelay:3,thCountDuration:3,exportParams:"",ctx:ctx,teamName:decodeURI(erpApp.getQueryString("teamName")),teamId:erpApp.getQueryString("teamId"),cloumnType:erpApp.getQueryString("cloumnType"),isShowTypeList:!0,isShowCodeList:!0}},components:{Pagination:d.a,Multiselect:p.a,SelectMore:h.a,Redeploy:v.a},created:function(){var e=new Date;e.getMonth(),e.getMonth();this.startDateStr=erpApp.getQueryString("startDateStr")+" 00:00:00",this.endDateStr=erpApp.getQueryString("endDateStr")+" 23:59:59",this.setDateType(),this.teamList.push({id:this.teamId,name:this.teamName}),this.teamListSelect={id:this.teamId,name:this.teamName}},mounted:function(){this.getData(),this.getTeamQueryData()},methods:{setDateType:function(){"a"===this.cloumnType?this.dateTypeListSelect={id:"order",name:"购买订单"}:"b"===this.cloumnType||"d"===this.cloumnType?this.dateTypeListSelect={id:"should",name:"应完成服务"}:this.dateTypeListSelect={id:"flow",name:"实际完成服务"}},getData:function(){var e=this,t=this.selectObjc,a=[],i=[],s="",r="",n=[];for(var o in t){var l=t[o].model;if("all"!==l){if("serviceTypeList"===o&&l.forEach(function(t){a.push(JSON.parse(e.mapKey.get(t)))}),"serviceCodeList"===o&&(l.forEach(function(t){i.push(e.mapKeyByGode.get(t))}),i.some(function(e){return"ZHCT"===e})&&i.push("ZHCT_OLD")),"completeDelivery"===o){if(l instanceof Array&&2===l.length){s=null;continue}l.forEach(function(e){s="是"===e?"Y":"N"})}if("delayDelivery"===o){if(l instanceof Array&&2===l.length){r=null;continue}l.forEach(function(e){r="是"===e?"Y":"N"})}if("orderType"===o){if(l instanceof Array&&2===l.length){n=null;continue}l.forEach(function(e){"直销"===e?n.push("1"):n.push("2")})}}}var d={startDateStr:this.startDateStr,endDateStr:this.endDateStr,orderNum:this.orderNum?this.orderNum:null,shopName:this.shopName?this.shopName:null,dateType:this.dateTypeListSelect.id?this.dateTypeListSelect.id:null,userIdList:this.teamMemberSelect.id?[this.teamMemberSelect.id]:null,serviceTypeList:a,teamId:this.teamId?this.teamId:null,flowEndFlag:s||null,delayFlag:r||null,orderTypeList:n,serviceCodes:i.length?i:null,cloumnType:this.cloumnType};this.loding=!0;var u="?pageNo="+this.pageNo+"&pageSize="+this.pageSize+"&teamId="+this.teamId+"&teamName="+this.teamName;c.a.post(ctx+"/statistics/deliveryService/findTeamStatisticsDetail"+u,d).then(function(t){if("0"===t.data.code){var a=[];t.data.attach.delayServiceContentArr&&(a=a.concat(t.data.attach.delayServiceContentArr.map(function(e){return"上门交付服务："+e}))),t.data.attach.delayServiceVCArr&&(a=a.concat(t.data.attach.delayServiceVCArr.map(function(e){return"售后上门培训（收费）："+e}))),t.data.attach.delayServiceMUArr&&(a=a.concat(t.data.attach.delayServiceMUArr.map(function(e){return"物料更新服务："+e}))),e.delayServiceContentArr="",a.forEach(function(t,i){for(var s=0;s<t.length;s++)e.delayServiceContentArr+=s%13==0&&0!=s?t[s]+"\n":t[s];i!==a.length-1&&(e.delayServiceContentArr+="\n                          \n")}),t.data.attach.hasOwnProperty("list")?e.statisticsList=t.data.attach.list.map(function(e){return e.serviceItemName=e.serviceType.replace(/ZHCT_OLD/g,"智慧餐厅安装交付服务(老商户)").replace(/FMPS_BASIC/g,"首次上门服务（基础版）").replace(/INTO_PIECES/g,"掌贝平台交付服务").replace(/FMPS/g,"智能客流运营全套落地服务").replace(/JYK/g,"聚引客安装交付服务").replace(/MU/g,"物料更新服务").replace(/VC/g,"售后上门培训").replace(/ZHCT/g,"智慧餐厅安装交付服务"),e.roles.includes("OperationAdviser")||(e.operationDelayFlag="",e.operationDelayDuration=""),e.roles.includes("accountAdviser")||(e.openDelayFlag="",e.openDelayDuration=""),e.roles.includes("materialAdviser")||(e.materielDelayFlag="",e.materielDelayDuration=""),e}):e.statisticsList=[],t.data.attach.hasOwnProperty("notShowQueryList")&&t.data.attach.notShowQueryList.forEach(function(t){e[t]=!1}),e.thCountDelay=3,e.thCountDuration=3,t.data.attach.hasOwnProperty("notShowColumnList")&&t.data.attach.notShowColumnList.forEach(function(t){e[t]=!1,"openDelayFlag"!==t&&"materielDelayFlag"!==t&&"operationDelayFlag"!==t||e.thCountDelay--,"openDelayDuration"!==t&&"materielDelayDuration"!==t&&"operationDelayDuration"!==t||e.thCountDuration--}),e.total=t.data.attach.count,e.loding=!1}})},goInfoPage:function(e){erpShopApp.showTaskPocess(ctx+"/workflow/toTaskHistoicFlow?procInstId="+e+"&from=teamtasklistNew")},changeDate:function(e,t){this[t]=e.currentTarget.value},clearForm:function(){this.orderNum="",this.shopName="",this.setDateType(),this.teamListSelect={id:this.teamId,name:this.teamName},this.getTeamQueryData(),this.selectObjc.completeDelivery.model=["是","否"],this.selectObjc.completeDelivery.options=["是","否"],this.selectObjc.delayDelivery.model=["是","否"],this.selectObjc.delayDelivery.options=["是","否"],this.selectObjc.orderType.model=["服务商","直销"],this.selectObjc.orderType.options=["服务商","直销"],this.startDateStr=erpApp.getQueryString("startDateStr")+" 00:00:00",this.endDateStr=erpApp.getQueryString("endDateStr")+" 23:59:59",this.getData()},pageChange:function(e){this.pageNo=e,this.getData()},getTeamQueryData:function(){var e=this;c.a.post(ctx+"/statistics/deliveryService/getTeamQueryData").then(function(t){"0"===t.data.code&&(e.selectObjc.serviceTypeList.model=[],e.selectObjc.serviceTypeList.options=[],t.data.attach.serviceTypeList.forEach(function(t){for(var a in t)e.mapKey.set(t[a],a),e.selectObjc.serviceTypeList.model.push(t[a]),e.selectObjc.serviceTypeList.options.push(t[a])}),e.selectObjc.serviceCodeList.model=[],e.selectObjc.serviceCodeList.options=[],t.data.attach.serviceCodeList.forEach(function(t){for(var a in t)e.mapKeyByGode.set(a,t[a]),e.selectObjc.serviceCodeList.model.push(a),e.selectObjc.serviceCodeList.options.push(a)}),e.selectTeam(e.teamListSelect),e.isShowTypeList=!1,e.isShowCodeList=!1,e.$nextTick(function(){e.isShowTypeList=!0,e.isShowCodeList=!0}))})},selectTeam:function(e){var t=this;c.a.get(ctx+"/sys/user/findByTeamIds",{params:{teamIdList:e.id?[e.id].join():[].join(),leaderFlag:0}}).then(function(e){"0"===e.data.code&&e.data.hasOwnProperty("attach")&&(t.teamMember=[],e.data.attach.forEach(function(e){t.teamMember.push({id:e.id,name:e.name})}),t.teamMember.unshift({id:null,name:"所有成员"}),t.teamMemberSelect={id:null,name:"所有成员"})})},redeployFun:function(e,t){this.$refs.redeployRef.pageData(e,t),this.redeployFlag=!0},dbTimeContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments[2];a&&"/"!==a&&erpApp.showjBox('<div style="padding:10px;line-height:25px">'+e+"―"+t+"</div>","提示",{})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teamOrder"},[e._m(0),e._v(" "),a("div",{staticClass:"padding10 statistics-outside-wrapper"},[a("div",{staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[a("div",{staticClass:"breadcrumb form-wrapper clearboth"},[a("ul",{staticClass:"ul-form"},[a("li",{staticStyle:{"margin-left":"10px"}},[a("multiselect",{staticClass:"form-multiselect",staticStyle:{width:"165px",top:"-20px"},attrs:{options:e.dateTypeList,searchable:!1,"show-labels":!1,"allow-empty":!1,"track-by":"name",label:"name"},model:{value:e.dateTypeListSelect,callback:function(t){e.dateTypeListSelect=t},expression:"dateTypeListSelect"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.startDateStr,expression:"startDateStr"}],ref:"startDateStr",staticClass:"input-medium text-input Wdate",attrs:{value:"",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd 00:00:00', isShowClear:true, readOnly:true});",type:"text"},domProps:{value:e.startDateStr},on:{focus:function(t){e.changeDate(t,"startDateStr")},input:function(t){t.target.composing||(e.startDateStr=t.target.value)}}}),e._v("至\n\t\t\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.endDateStr,expression:"endDateStr"}],ref:"endDateStr",staticClass:"input-medium text-input Wdate",attrs:{onclick:"WdatePicker({dateFmt:'yyyy-MM-dd 23:59:59', isShowClear:true, readOnly:true});",type:"text"},domProps:{value:e.endDateStr},on:{focus:function(t){e.changeDate(t,"endDateStr")},input:function(t){t.target.composing||(e.endDateStr=t.target.value)}}})],1),e._v(" "),a("li",[a("label",[e._v("订单号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.orderNum,expression:"orderNum",modifiers:{trim:!0}}],staticClass:"input-medium",attrs:{type:"text"},domProps:{value:e.orderNum},on:{input:function(t){t.target.composing||(e.orderNum=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("li",[a("label",[e._v("商户简称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.shopName,expression:"shopName",modifiers:{trim:!0}}],staticClass:"input-medium",attrs:{type:"text"},domProps:{value:e.shopName},on:{input:function(t){t.target.composing||(e.shopName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("已购服务类型：")]),e._v(" "),e.isShowTypeList?a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:e.selectObjc.serviceTypeList.options,"select-more-config":e.selectMoreConfig,label:"label",identity:"buyServerType",width:"258px"},model:{value:e.selectObjc.serviceTypeList.model,callback:function(t){e.$set(e.selectObjc.serviceTypeList,"model",t)},expression:"selectObjc.serviceTypeList.model"}}):e._e()],1),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("服务项目：")]),e._v(" "),e.isShowCodeList?a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:e.selectObjc.serviceCodeList.options,"select-more-config":e.selectMoreConfig,label:"label",identity:"serviceCode",width:"258px"},model:{value:e.selectObjc.serviceCodeList.model,callback:function(t){e.$set(e.selectObjc.serviceCodeList,"model",t)},expression:"selectObjc.serviceCodeList.model"}}):e._e()],1),e._v(" "),e.orderType?a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("订单类别：")]),e._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:e.selectObjc.orderType.options,"select-more-config":e.selectMoreConfig,label:"label",identity:"orderType",width:"165px"},model:{value:e.selectObjc.orderType.model,callback:function(t){e.$set(e.selectObjc.orderType,"model",t)},expression:"selectObjc.orderType.model"}})],1):e._e(),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("负责订单团队：")]),e._v(" "),a("multiselect",{staticStyle:{width:"200px",float:"right"},attrs:{options:e.teamList,searchable:!1,"show-labels":!1,"allow-empty":!1,disabled:!0,"track-by":"name",label:"name"},on:{select:e.selectTeam},model:{value:e.teamListSelect,callback:function(t){e.teamListSelect=t},expression:"teamListSelect"}})],1),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("团队成员：")]),e._v(" "),a("multiselect",{staticStyle:{width:"200px",float:"right"},attrs:{options:e.teamMember,searchable:!1,"show-labels":!1,"allow-empty":!1,"track-by":"name",label:"name"},model:{value:e.teamMemberSelect,callback:function(t){e.teamMemberSelect=t},expression:"teamMemberSelect"}})],1),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("是否已完成交付：")]),e._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:e.selectObjc.completeDelivery.options,"select-more-config":e.selectMoreConfig,label:"label",identity:"completeDelivery",width:"165px"},model:{value:e.selectObjc.completeDelivery.model,callback:function(t){e.$set(e.selectObjc.completeDelivery,"model",t)},expression:"selectObjc.completeDelivery.model"}})],1),e._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[e._v("是否延期交付：")]),e._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:e.selectObjc.delayDelivery.options,"select-more-config":e.selectMoreConfig,label:"label",identity:"delayDelivery",width:"165px"},model:{value:e.selectObjc.delayDelivery.model,callback:function(t){e.$set(e.selectObjc.delayDelivery,"model",t)},expression:"selectObjc.delayDelivery.model"}})],1),e._v(" "),a("li",{staticClass:"btns"},[a("button",{staticClass:"btn btn-primary",on:{click:e.getData}},[e._v("查询")])]),e._v(" "),a("li",{staticClass:"btns"},[a("button",{staticClass:"btn btn-warning",on:{click:e.clearForm}},[e._v("重置")])])])])]),e._v(" "),a("div",{staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[a("div",{staticClass:"statistics-box"},[a("div",{staticClass:"statistics-table"},[a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[a("thead",[a("tr",[e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e.agentName?a("th",[a("div",{staticClass:"th width150"},[e._v("所属服务商")])]):e._e(),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),[e.openDelayFlag||e.materielDelayFlag||e.operationDelayFlag?a("th",{attrs:{colspan:e.thCountDelay}},[a("div",{staticClass:"th width180 bor-bom"},[a("span",[e._v("是否延迟完成服务")]),e._v(" "),a("div",{staticClass:"check-content blue"},[a("span",{staticClass:"check",attrs:{title:e.delayServiceContentArr}},[e._v("?")])])]),e._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[e.openDelayFlag?a("span",[e._v("开户顾问")]):e._e(),e._v(" "),e.materielDelayFlag?a("span",[e._v("物料顾问")]):e._e(),e._v(" "),e.operationDelayFlag?a("span",[e._v("运营顾问")]):e._e()])]):e._e(),e._v(" "),e.openDelayDuration||e.materielDelayDuration||e.operationDelayDuration?a("th",{attrs:{colspan:e.thCountDuration}},[a("div",{staticClass:"th width180 bor-bom"},[e._v("延迟完成服务时长")]),e._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[e.openDelayDuration?a("span",[e._v("开户顾问")]):e._e(),e._v(" "),e.materielDelayDuration?a("span",[e._v("物料顾问")]):e._e(),e._v(" "),e.operationDelayDuration?a("span",[e._v("运营顾问")]):e._e()])]):e._e()],e._v(" "),e._m(13),e._v(" "),e._m(14)],2)]),e._v(" "),a("tbody",[e.loding?[e._m(15)]:e.statisticsList.length>0?e._l(e.statisticsList,function(t){return a("tr",[a("td",[a("a",{staticClass:"blue",attrs:{target:"view_window",href:e.ctx+"/order/erpOrderOriginalInfo/form?id="+t.orderId}},[e._v(e._s(t.orderNum))])]),e._v(" "),a("td",[e._v(e._s(t.buyDate))]),e._v(" "),a("td",[t.shopId?[a("a",{staticClass:"blue",attrs:{target:"view_window",href:e.ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+t.shopId}},[e._v(e._s(t.shopName))])]:[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.shopName)+"\n\t\t\t\t\t\t\t\t\t\t")]],2),e._v(" "),a("td",[e._v(e._s(t.serviceTypeNames||"/")+" ")]),e._v(" "),a("td",[a("div",{staticClass:"omit-sheng-0230",attrs:{title:t.serviceItemName}},[e._v(e._s(t.serviceItemName||"/"))])]),e._v(" "),e.agentName?a("td",[e._v(e._s(t.agentName||"/"))]):e._e(),e._v(" "),a("td",[e._v(e._s(t.operationAdviserName||"/"))]),e._v(" "),a("td",[e._v(e._s(t.startTime||"/"))]),e._v(" "),a("td",[e._v(e._s(t.shouldFlowEndTime||"/"))]),e._v(" "),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:function(a){e.goInfoPage(t.procInsId)}}},[e._v("查看")])]),e._v(" "),a("td",[e._v(e._s(t.flowEndFlag||"/"))]),e._v(" "),a("td",[e._v(e._s(t.flowEndTime||"/"))]),e._v(" "),a("td",[e._v(e._s(t.delayFlag||"/"))]),e._v(" "),[e.openDelayFlag||e.materielDelayFlag||e.operationDelayFlag?[e.openDelayFlag?a("td",{on:{dblclick:function(a){e.dbTimeContent(t.trainTestTime,t.shouldTrainTestTime,t.openDelayFlag)}}},[e._v(e._s(t.openDelayFlag||"/"))]):e._e(),e._v(" "),e.materielDelayFlag?a("td",{on:{dblclick:function(a){e.dbTimeContent(t.materielTime,t.shouldMaterielTime,t.materielDelayFlag)}}},[e._v(e._s(t.materielDelayFlag||"/"))]):e._e(),e._v(" "),e.operationDelayFlag?a("td",{on:{dblclick:function(a){e.dbTimeContent(t.visitServiceTime,t.shouldVisitServiceTime,t.operationDelayFlag)}}},[e._v(e._s(t.operationDelayFlag||"/"))]):e._e()]:e._e(),e._v(" "),e.openDelayDuration||e.materielDelayDuration||e.operationDelayDuration?[e.openDelayDuration?a("td",[e._v(e._s(t.openDelayDuration||"/"))]):e._e(),e._v(" "),e.materielDelayDuration?a("td",[e._v(e._s(t.materielDelayDuration||"/"))]):e._e(),e._v(" "),e.operationDelayDuration?a("td",[e._v(e._s(t.operationDelayDuration||"/"))]):e._e()]:e._e()],e._v(" "),a("td",[a("div",{staticClass:"omit-sheng-0230",attrs:{title:t.excptionLogo}},[e._v(e._s(t.excptionLogo||"/"))])]),e._v(" "),a("td",[a("a",{staticClass:"blue",attrs:{target:"view_window",href:e.ctx+"/order/erpOrderOriginalInfo/form?id="+t.orderId}},[e._v("查看订单详情")]),e._v(" "),t.shopId?[a("a",{staticClass:"blue",attrs:{target:"view_window",href:e.ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+t.shopId}},[e._v("查看商户资料")])]:[e._v("\n\t\t\t\t\t\t\t\t\t\t\t查看商户资料\n\t\t\t\t\t\t\t\t\t\t")],e._v(" "),["否"===t.flowEndFlag?a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:function(a){e.redeployFun(t.procInsId,t.shopName)}}},[e._v("转派")]):e._e()]],2)],2)}):[e._m(16)]],2)])])])])]),e._v(" "),e.total>e.pageSize?[a("pagination",{attrs:{total:e.total,perPages:7,pageIndex:1,pageSize:e.pageSize},on:{change:e.pageChange}})]:e._e(),e._v(" "),a("redeploy",{directives:[{name:"show",rawName:"v-show",value:e.redeployFlag,expression:"redeployFlag"}],ref:"redeployRef",on:{getData:e.getData,closeModalByRedeploy:function(t){e.redeployFlag=!1}}})],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"act-top positionrelative overview"},[t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"acttitle active"},[t("a",{attrs:{href:"javascript:;"}},[this._v("团队订单管理")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width100"},[this._v("订单号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width100"},[this._v("购买时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width100"},[this._v("商户简称")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width150"},[this._v("已购服务类型")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width150"},[this._v("服务项目")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width150"},[this._v("运营顾问")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width150"},[this._v("启动时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width100"},[this._v("应完成交付时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width100 blue"},[this._v("任务进度详情")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width120"},[this._v("是否已完成交付")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width150"},[this._v("实际完成交付时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width120"},[this._v("是否延期交付")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width120"},[this._v("服务异常原因")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("th",[t("div",{staticClass:"th width240"},[this._v("操作")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"22"}},[t("div",{staticStyle:{height:"300px"}},[this._v("加载中...")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"25"}},[t("div",{staticStyle:{height:"300px"}},[this._v("暂无数据，请重新查询")])])])}]};var _=a("VU/8")(m,f,!1,function(e){a("tQpl")},null,null).exports;r.default.config.productionTip=!1,r.default.config.devtools=!1,new r.default(s()({},_)).$mount("#rootNode")},ZdvV:function(e,t){},tQpl:function(e,t){}},["Nk+Y"]);