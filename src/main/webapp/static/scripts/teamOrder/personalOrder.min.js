webpackJsonp([13],{"+ryu":function(t,e,a){"use strict";var i={data:function(){return{index:this.pageIndex,limit:this.pageSize,size:this.total||1,showPrevMore:!1,showNextMore:!1}},watch:{pageIndex:function(t){this.index=t||1},pageSize:function(t){this.limit=t||10},total:function(t){this.size=t||1}},props:{perPages:{type:Number,default:5},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:1}},computed:{pages:function(){return Math.ceil(this.size/this.limit)},pagers:function(){var t=[],e=this.perPages,a=this.pages,i=this.index,s=Math.ceil((e-1)/2),r={start:i-s,end:i+s};r.start<1&&(r.end=r.end+(1-r.start),r.start=1),r.end>a&&(r.start=r.start-(r.end-a),r.end=a),r.start<1&&(r.start=1),this.showPrevMore=r.start>1,this.showNextMore=r.end<a;for(var n=r.start;n<=r.end;n++)t.push(n);return t}},methods:{prev:function(){this.index>1&&this.go(this.index-1)},next:function(){this.index<this.pages&&this.go(this.index+1)},first:function(){1!==this.index&&this.go(1)},last:function(){this.index!=this.pages&&this.go(this.pages)},go:function(t){this.index!==t&&(this.index=t,this.$emit("change",this.index))}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination"},[a("ul",[a("li",{class:{disabled:1===t.index}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.prev}},[t._v("« 上一页")])]),t._v(" "),t.showPrevMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[t._v("...")])]):t._e(),t._v(" "),t._l(t.pagers,function(e){return a("li",{class:{active:t.index===e}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){t.go(e)}}},[t._v(t._s(e))])])}),t._v(" "),t.showNextMore?a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"javascript:"}},[t._v("...")])]):t._e(),t._v(" "),a("li",{class:{disabled:t.index===t.pages}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.next}},[t._v("下一页 »")])]),t._v(" "),a("li",{staticClass:"disabled controls"},[a("a",{attrs:{href:"javascript:;"}},[t._v("当前 \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],attrs:{type:"text",disabled:""},domProps:{value:t.index},on:{input:function(e){e.target.composing||(t.index=e.target.value)}}}),t._v(" / \r\n\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],attrs:{type:"text",disabled:""},domProps:{value:t.pageSize},on:{input:function(e){e.target.composing||(t.pageSize=e.target.value)}}}),t._v(" \r\n\t\t\t\t条，共 "+t._s(t.total)+" 条\r\n\t\t\t")])])],2),t._v(" "),a("div",{staticStyle:{clear:"both"}})])},staticRenderFns:[]},r=a("VU/8")(i,s,!1,null,null,null);e.a=r.exports},"3r0Q":function(t,e){},"8vu0":function(t,e,a){"use strict";var i=a("mvHQ"),s=a.n(i),r=a("mtWM"),n=a.n(r),l={props:[""],data:function(){return{redeployList:[],userOperationManagerList:[],userOperationManagerListSelect:{},materialConsultantUserList:[],materialConsultantUserListSelect:{},openAccountConsultantUserList:[],openAccountConsultantUserListSelect:{},operationAdviserUserList:[],operationAdviserUserListSelect:{},shopName:"",procInsId:""}},components:{},methods:{closeModal:function(){this.$emit("closeModalByRedeploy")},saveData:function(){var t=this,e=[];this.userOperationManagerListSelect.id&&e.push({userId:this.userOperationManagerListSelect.id,roleName:this.userOperationManagerListSelect.remarks?this.userOperationManagerListSelect.remarks:""}),this.openAccountConsultantUserListSelect.id&&e.push({userId:this.openAccountConsultantUserListSelect.id,roleName:this.openAccountConsultantUserListSelect.remarks?this.openAccountConsultantUserListSelect.remarks:""}),this.operationAdviserUserListSelect.id&&e.push({userId:this.operationAdviserUserListSelect.id,roleName:this.operationAdviserUserListSelect.remarks?this.operationAdviserUserListSelect.remarks:""}),this.materialConsultantUserListSelect.id&&e.push({userId:this.materialConsultantUserListSelect.id,roleName:this.materialConsultantUserListSelect.remarks?this.materialConsultantUserListSelect.remarks:""}),n()({method:"post",url:ctx+"/visit/flow/changeRoleUser",data:{procInsId:this.procInsId,userOrTeamObj:s()(e)},transformRequest:[function(t){var e="";for(var a in t)"object"===erpApp.util.type(t[a])?e+=encodeURIComponent(a)+"="+s()(t[a])+"&":e+=encodeURIComponent(a)+"="+t[a]+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data.result?(t.closeModal(),t.$emit("getData"),erpShopApp.tip("操作成功!")):erpShopApp.tip("操作失败!")}).catch(function(t){erpShopApp.tip("出错了，请稍后重试！","error",null)})},pageData:function(t,e){var a=this;this.redeployList.length=0,this.shopName=e,this.procInsId=t,n.a.get(ctx+"/visit/flow/changeRoleList?procInsId="+t).then(function(t){if(t.data.result&&(a.userOperationManagerList=t.data.userOperationManagerList,a.materialConsultantUserList=t.data.materialConsultantUserList,a.openAccountConsultantUserList=t.data.openAccountConsultantUserList,a.operationAdviserUserList=t.data.operationAdviserUserList,t.data.hasOwnProperty("list")&&Array.isArray(t.data.list))){var e=t.data.list,i=[];e.forEach(function(t){if("operationManager"===t.role){var e=a.userOperationManagerList.filter(function(e){return e.name===t.name});e.length?a.userOperationManagerListSelect=e[0]:(a.userOperationManagerListSelect=t,a.userOperationManagerList.push(t))}else if("accountAdviser"===t.role){var i=a.openAccountConsultantUserList.filter(function(e){return e.name===t.name});i.length?a.openAccountConsultantUserListSelect=i[0]:(a.openAccountConsultantUserListSelect=t,a.openAccountConsultantUserList.push(t))}else if("OperationAdviser"===t.role){var s=a.operationAdviserUserList.filter(function(e){return e.name===t.name});s.length?a.operationAdviserUserListSelect=s[0]:(a.operationAdviserUserListSelect=t,a.operationAdviserUserList.push(t))}else if("materialAdviser"===t.role){var r=a.materialConsultantUserList.filter(function(e){return e.name===t.name});r.length?a.materialConsultantUserListSelect=r[0]:(a.materialConsultantUserListSelect=t,a.materialConsultantUserList.push(t))}}),i.push(e.filter(function(t){return"operationManager"===t.role})),i.push(e.filter(function(t){return"OperationAdviser"===t.role})),i.push(e.filter(function(t){return"accountAdviser"===t.role})),i.push(e.filter(function(t){return"materialAdviser"===t.role})),i.forEach(function(t){t.length&&a.redeployList.push(t[0])})}})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mask-widget"},[a("div",{staticClass:"form-horizontal clearboth erpstore-horizontal"},[a("p",{staticClass:"title-mask"},[t._v("转派任务处理人")]),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[t._m(0),t._v(" "),a("tbody",[t._l(t.redeployList,function(e,i){return"operationManager"===e.role||"accountAdviser"===e.role||"OperationAdviser"===e.role||"materialAdviser"===e.role?a("tr",{key:"redeploy"+i},["operationManager"===e.role?a("td",[t._v("运营经理")]):t._e(),t._v(" "),"OperationAdviser"===e.role?a("td",[t._v("运营顾问")]):t._e(),t._v(" "),"accountAdviser"===e.role?a("td",[t._v("开户顾问")]):t._e(),t._v(" "),"materialAdviser"===e.role?a("td",[t._v("物料顾问")]):t._e(),t._v(" "),a("td",["operationManager"===e.role?a("select",{directives:[{name:"model",rawName:"v-model",value:t.userOperationManagerListSelect,expression:"userOperationManagerListSelect"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.userOperationManagerListSelect=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[t._v("请选择")]),t._v(" "),t._l(t.userOperationManagerList,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),"OperationAdviser"===e.role?a("select",{directives:[{name:"model",rawName:"v-model",value:t.operationAdviserUserListSelect,expression:"operationAdviserUserListSelect"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.operationAdviserUserListSelect=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[t._v("请选择")]),t._v(" "),t._l(t.operationAdviserUserList,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),"accountAdviser"===e.role?a("select",{directives:[{name:"model",rawName:"v-model",value:t.openAccountConsultantUserListSelect,expression:"openAccountConsultantUserListSelect"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.openAccountConsultantUserListSelect=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[t._v("请选择")]),t._v(" "),t._l(t.openAccountConsultantUserList,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2):t._e(),t._v(" "),"materialAdviser"===e.role?a("select",{directives:[{name:"model",rawName:"v-model",value:t.materialConsultantUserListSelect,expression:"materialConsultantUserListSelect"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.materialConsultantUserListSelect=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:{}}},[t._v("请选择")]),t._v(" "),t._l(t.materialConsultantUserList,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2):t._e()])]):t._e()})],2)])]),t._v(" "),a("div",{staticClass:"button-content"},[a("button",{staticClass:"btn btn-outline",attrs:{type:"button"},on:{click:t.closeModal}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveData}},[t._v("确定")])]),t._v(" "),a("div",{staticClass:"close",on:{click:t.closeModal}},[t._v("×")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("角色")]),this._v(" "),e("th",[this._v("更换任务处理人")])])])}]};var c=a("VU/8")(l,o,!1,function(t){a("Et1L")},"data-v-e7d1a2f0",null);e.a=c.exports},Et1L:function(t,e){},IkXY:function(t,e,a){"use strict";var i=a("pFYg"),s=a.n(i),r={props:["value","options","selectMoreConfig","label","identity","width"],data:function(){return{isShow:!1,selectData:this.options,checkedList:[],isAll:!1,isOver:"",isNochecked:!1,trackByName:this.selectMoreConfig.trackByName,keyName:this.selectMoreConfig.keyName}},watch:{value:function(t,e){if("[object Array]"===Object.prototype.toString.call(t)&&t.length>0){var a=this,i=[];t.forEach(function(t){"object"===(void 0===t?"undefined":s()(t))?i.push(t[a.trackByName]):i.push(t)}),this.checkedList=i}},options:function(t,e){"[object Array]"===Object.prototype.toString.call(t)&&(this.selectData=t)},checkedList:function(t,e){var a=!1,i=this;if(t.length===this.selectData.length?this.isAll=!0:this.isAll=!1,t.length>0&&t.length===e.length?t.every(function(t,i){return t===e[i]||(a=!0,!1)}):a=!0,a){var r=[],n=this.trackByName;t.forEach(function(t){i.selectData.forEach(function(e){var a="object"===(void 0===e?"undefined":s()(e))?e[n]:e;t.toString()===a.toString()&&r.push(e)})}),this.isAll&&(r="all"),this.$emit("input",r,i.identity)}}},computed:{checkedName:function(){var t=this,e="",a=this.trackByName;return this.checkedList.length>0&&this.selectData.length>0?(this.isNochecked=!1,this.checkedList.forEach(function(i){t.selectData.forEach(function(r){"object"===(void 0===r?"undefined":s()(r))&&r[a].toString()===i.toString()?e+=r[t.keyName]+"、":r===i&&(e+=r+"、")})}),e=e.replace(/^\s+|\s+$/g,"").substring(0,e.length-1)):(e=this.selectMoreConfig.placeholder?this.selectMoreConfig.placeholder:"",this.isNochecked=!0),e}},mounted:function(){if(this.value.length>0&&this.options.length>0){var t=this,e=t.trackByName,a=[];this.isAll=this.value.length===this.options.length,this.options.forEach(function(i){Array.isArray(t.value)&&t.value.forEach(function(s){t.isObject(s)&&t.isObject(i)&&s[e].toString()===i[e].toString()?a.push(s[e]):i===s&&a.push(s)})}),this.checkedList=a}document.body.addEventListener("click",this.closeTimeList,!1)},beforeDestroy:function(){document.body.removeEventListener("click",this.closeTimeList,!1)},methods:{isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},allCheck:function(){if(this.isAll)this.checkedList=[];else{var t=this,e=this.trackByName,a=[];this.selectData.forEach(function(i){t.isObject(i)?a.push(i[e]):a.push(i)}),this.checkedList=a}},showSelectClick:function(){this.isShow?this.isShow=!1:this.isShow=!0},closeTimeList:function(t){var e=t.target,a=this.$el.firstChild;e.isEqualNode(a)||(this.isShow=!1)},liMove:function(t){this.isOver=t},selectClick:function(){}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checked-time",style:{width:t.width||"220px"},on:{click:t.showSelectClick}},[a("div",{staticClass:"show-time",class:{"col-gay":t.isNochecked},attrs:{"data-label":this.label,title:t.checkedName}},[t._v("\n        "+t._s(t.checkedName)+"\n    ")]),t._v(" "),a("div",{staticClass:"trangle"}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"select-box",on:{click:function(e){e.stopPropagation(),t.selectClick(e)}}},[a("ul",{staticClass:"select-list"},[a("li",{class:{"over-li":-1===t.isOver},on:{mousemove:function(e){t.isOver=-1}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isAll,expression:"isAll"}],attrs:{type:"checkbox",name:"time"},domProps:{checked:Array.isArray(t.isAll)?t._i(t.isAll,null)>-1:t.isAll},on:{change:function(e){var a=t.isAll,i=e.target,s=!!i.checked;if(Array.isArray(a)){var r=t._i(a,null);i.checked?r<0&&(t.isAll=a.concat([null])):r>-1&&(t.isAll=a.slice(0,r).concat(a.slice(r+1)))}else t.isAll=s}}}),t._v(" "),a("label",{staticClass:"fl-left",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.allCheck(e)}}}),t._v(" "),a("span",{staticClass:"fl-left span-time"},[t._v("\n                   全选\n                ")])]),t._v(" "),t._l(t.selectData,function(e,i){return a("li",{key:"item"+i,staticClass:"clearfix",class:{"over-li":t.isOver===i},on:{mousemove:function(e){t.liMove(i)}}},[t.isString(e)?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:t.identity+i+"labels"},domProps:{value:e,checked:Array.isArray(t.checkedList)?t._i(t.checkedList,e)>-1:t.checkedList},on:{change:function(a){var i=t.checkedList,s=a.target,r=!!s.checked;if(Array.isArray(i)){var n=e,l=t._i(i,n);s.checked?l<0&&(t.checkedList=i.concat([n])):l>-1&&(t.checkedList=i.slice(0,l).concat(i.slice(l+1)))}else t.checkedList=r}}}),t._v(" "),a("label",{staticClass:"fl-left",attrs:{for:t.identity+i+"labels"}}),t._v(" "),a("span",{staticClass:"fl-left span-time"},[t._v("\n                       "+t._s(e)+"\n                    ")])]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedList,expression:"checkedList"}],attrs:{type:"checkbox",name:"time",id:t.identity+i+"labels"},domProps:{value:e[t.trackByName],checked:Array.isArray(t.checkedList)?t._i(t.checkedList,e[t.trackByName])>-1:t.checkedList},on:{change:function(a){var i=t.checkedList,s=a.target,r=!!s.checked;if(Array.isArray(i)){var n=e[t.trackByName],l=t._i(i,n);s.checked?l<0&&(t.checkedList=i.concat([n])):l>-1&&(t.checkedList=i.slice(0,l).concat(i.slice(l+1)))}else t.checkedList=r}}}),t._v(" "),a("label",{staticClass:"fl-left",attrs:{for:t.identity+i+"labels"}}),t._v(" "),a("span",{staticClass:"fl-left span-time"},[t._v("\n                       "+t._s(e[t.keyName])+"\n                    ")])]],2)})],2)])])},staticRenderFns:[]};var l=a("VU/8")(r,n,!1,function(t){a("ZdvV")},"data-v-acfdc56c",null);e.a=l.exports},PeYv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("7+uW"),n=a("mvHQ"),l=a.n(n),o=a("ifoU"),c=a.n(o),d=a("mtWM"),v=a.n(d),u=a("+ryu"),p=a("RUzx"),h=a.n(p),m=a("IkXY"),_=a("8vu0"),f={data:function(){return{personalFirst:pageDataObject.personalFirst,personalTwo:pageDataObject.personalTwo,personalThree:pageDataObject.personalThree,tabFlag:0,statisticsList:[],loding:!1,teamOptions:[],selectObjc:{completeDelivery:{model:["是","否"],options:["是","否"]},delayDelivery:{model:["是","否"],options:["是","否"]},serviceTypeList:{model:[],options:[]},serviceCodeList:{model:[],options:[]}},selectMoreConfig:{keyName:"label",trackByName:"value",placeholder:"请选择"},delayServiceContentArr:"",dateTypeList:[],dateTypeListSelect:{id:null,name:"所有订单"},mapKey:new c.a,mapKeyByGode:new c.a,pageNo:1,pageSize:erpApp.util.viewportWH.vh<=768?10:erpApp.util.viewportWH.vh>768&&erpApp.util.viewportWH.vh<=900?15:25,total:0,startDateStr:"",endDateStr:"",orderNum:"",shopName:"",notShowQueryList:[],openDelayFlag:!0,materielDelayFlag:!0,operationDelayFlag:!0,openDelayDuration:!0,materielDelayDuration:!0,operationDelayDuration:!0,thCountDelay:3,thCountDuration:3,ctx:ctx,exportParams:""}},components:{Pagination:u.a,Multiselect:h.a,SelectMore:m.a,Redeploy:_.a},created:function(){var t=new Date,e=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1;this.startDateStr=t.getFullYear()+"-"+e+"-01 00:00:00";var a=t.getDate()<10?"0"+t.getDate():t.getDate();this.endDateStr=t.getFullYear()+"-"+e+"-"+a+" 23:59:59",this.personalFirst?this.tabFlag=0:this.personalTwo?this.tabFlag=1:this.personalThree&&(this.tabFlag=2)},mounted:function(){this.getData(),this.getTeamQueryData()},methods:{getData:function(){var t=this,e=this.selectObjc,a=[],i=[],s="",r="";for(var n in e){var o=e[n].model;if("all"!==o){if("serviceTypeList"===n&&o.forEach(function(e){a.push(JSON.parse(t.mapKey.get(e)))}),"serviceCodeList"===n&&(o.forEach(function(e){i.push(t.mapKeyByGode.get(e))}),i.some(function(t){return"ZHCT"===t})&&i.push("ZHCT_OLD")),"completeDelivery"===n){if(o instanceof Array&&2===o.length){s=null;continue}o.forEach(function(t){s="是"===t?"Y":"N"})}if("delayDelivery"===n){if(o instanceof Array&&2===o.length){r=null;continue}o.forEach(function(t){r="是"===t?"Y":"N"})}}}var c=[];0===this.tabFlag?c=["JYK","FMPS","FMPS_BASIC","INTO_PIECES"]:1===this.tabFlag?c=["VC"]:2===this.tabFlag&&(c=["MU"]);var d={startDateStr:this.startDateStr,endDateStr:this.endDateStr,orderNum:this.orderNum?this.orderNum:null,shopName:this.shopName?this.shopName:null,dateType:this.dateTypeListSelect.id?this.dateTypeListSelect.id:null,serviceTypeList:a,flowEndFlag:s||null,delayFlag:r||null,serviceTypes:c};0===this.tabFlag&&(d.serviceCodes=i.length?i:null);var u=JSON.parse(l()(d));u.serviceTypes=null;var p=[];this.personalFirst&&p.push("first"),this.personalTwo&&p.push("mu"),this.personalThree&&p.push("vc"),u.expType=p.join(","),this.exportParams=l()(u),this.loding=!0,v.a.post(ctx+"/statistics/deliveryService/findUserStatistics?pageNo="+this.pageNo+"&pageSize="+this.pageSize,d).then(function(e){if("0"===e.data.code){var a=[];0===t.tabFlag?e.data.attach.delayServiceContentArr&&(a=e.data.attach.delayServiceContentArr):1===t.tabFlag?e.data.attach.delayServiceVCArr&&(a=e.data.attach.delayServiceVCArr):2===t.tabFlag&&e.data.attach.delayServiceMUArr&&(a=e.data.attach.delayServiceMUArr),t.delayServiceContentArr="",a.forEach(function(e,i){for(var s=0;s<e.length;s++)t.delayServiceContentArr+=s%13==0&&0!=s?e[s]+"\n":e[s];i!==a.length-1&&(t.delayServiceContentArr+="\n                          \n")}),e.data.attach.hasOwnProperty("list")?t.statisticsList=e.data.attach.list.map(function(t){return t.serviceItemName=t.serviceType.replace(/ZHCT_OLD/g,"智慧餐厅安装交付服务(老商户)").replace(/FMPS_BASIC/g,"首次上门服务（基础版）").replace(/INTO_PIECES/g,"掌贝平台交付服务").replace(/FMPS/g,"智能客流运营全套落地服务").replace(/JYK/g,"聚引客安装交付服务").replace(/MU/g,"物料更新服务").replace(/VC/g,"售后上门培训").replace(/ZHCT/g,"智慧餐厅安装交付服务"),t.roles.includes("OperationAdviser")||(t.operationDelayFlag="",t.operationDelayDuration=""),t.roles.includes("accountAdviser")||(t.openDelayFlag="",t.openDelayDuration=""),t.roles.includes("materialAdviser")||(t.materielDelayFlag="",t.materielDelayDuration=""),t}):t.statisticsList=[],e.data.attach.hasOwnProperty("notShowQueryList")&&e.data.attach.notShowQueryList.forEach(function(e){t[e]=!1}),t.thCountDelay=3,t.thCountDuration=3,e.data.attach.hasOwnProperty("notShowColumnList")&&e.data.attach.notShowColumnList.forEach(function(e){t[e]=!1,"openDelayFlag"!==e&&"materielDelayFlag"!==e&&"operationDelayFlag"!==e||t.thCountDelay--,"openDelayDuration"!==e&&"materielDelayDuration"!==e&&"operationDelayDuration"!==e||t.thCountDuration--}),t.total=e.data.attach.count,t.loding=!1}})},changeDate:function(t,e){this[e]=t.currentTarget.value},clearForm:function(){this.orderNum="",this.shopName="",this.dateTypeListSelect={id:null,name:"所有订单"},this.getTeamQueryData(),this.selectObjc.completeDelivery.model=["是","否"],this.selectObjc.completeDelivery.options=["是","否"],this.selectObjc.delayDelivery.model=["是","否"],this.selectObjc.delayDelivery.options=["是","否"];var t=new Date,e=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1;this.startDateStr=t.getFullYear()+"-"+e+"-01 00:00:00";var a=t.getDate()<10?"0"+t.getDate():t.getDate();this.endDateStr=t.getFullYear()+"-"+e+"-"+a+" 23:59:59",this.getData()},pageChange:function(t){this.pageNo=t,this.getData()},goInfoPage:function(t){erpShopApp.showTaskPocess(ctx+"/workflow/toTaskHistoicFlow?procInstId="+t+"&from=teamtasklistNew")},getTeamQueryData:function(){var t=this;v.a.post(ctx+"/statistics/deliveryService/getUserQueryData").then(function(e){"0"===e.data.code&&(t.dateTypeList=[],e.data.attach.dateTypeList.forEach(function(e){for(var a in e)t.dateTypeList.push({id:a,name:e[a]})}),t.dateTypeList.unshift({id:null,name:"所有订单"}),t.selectObjc.serviceTypeList.model=[],t.selectObjc.serviceTypeList.options=[],e.data.attach.serviceTypeList.forEach(function(e){for(var a in e)t.mapKey.set(e[a],a),t.selectObjc.serviceTypeList.model.push(e[a]),t.selectObjc.serviceTypeList.options.push(e[a])}),t.selectObjc.serviceCodeList.model=[],t.selectObjc.serviceCodeList.options=[],e.data.attach.serviceCodeList.forEach(function(e){for(var a in e)t.mapKeyByGode.set(a,e[a]),t.selectObjc.serviceCodeList.model.push(a),t.selectObjc.serviceCodeList.options.push(a)}))})},outputList:function(){this.statisticsList.length?this.$refs.exportexcel.submit():erpShopApp.tip("暂无数据，请重新查询")},tabFirst:function(t){this.tabFlag=t,this.getData()},dbTimeContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments[2];a&&"/"!==a&&erpApp.showjBox('<div style="padding:10px;line-height:25px">'+t+"―"+e+"</div>","提示",{})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"teamOrder"},[a("div",{staticClass:"act-top positionrelative overview"},[t._m(0),t._v(" "),a("div",{staticClass:"act-top-right positionrabsolute"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.outputList}},[t._v("导出列表")])])]),t._v(" "),a("div",{staticClass:"padding10 statistics-outside-wrapper"},[a("div",{staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[a("div",{staticClass:"breadcrumb form-wrapper clearboth"},[a("ul",{staticClass:"ul-form"},[a("li",{staticStyle:{"margin-left":"10px"}},[a("multiselect",{staticClass:"form-multiselect",staticStyle:{width:"165px",top:"-20px"},attrs:{options:t.dateTypeList,searchable:!1,"show-labels":!1,"allow-empty":!1,"track-by":"name",label:"name"},model:{value:t.dateTypeListSelect,callback:function(e){t.dateTypeListSelect=e},expression:"dateTypeListSelect"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.startDateStr,expression:"startDateStr"}],ref:"startDateStr",staticClass:"input-medium text-input Wdate",attrs:{value:"",onclick:"WdatePicker({dateFmt:'yyyy-MM-dd 00:00:00', isShowClear:true, readOnly:true});",type:"text"},domProps:{value:t.startDateStr},on:{focus:function(e){t.changeDate(e,"startDateStr")},input:function(e){e.target.composing||(t.startDateStr=e.target.value)}}}),t._v("至\n\t\t\t\t\t\t"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.endDateStr,expression:"endDateStr"}],ref:"endDateStr",staticClass:"input-medium text-input Wdate",attrs:{onclick:"WdatePicker({dateFmt:'yyyy-MM-dd 23:59:59', isShowClear:true, readOnly:true});",type:"text"},domProps:{value:t.endDateStr},on:{focus:function(e){t.changeDate(e,"endDateStr")},input:function(e){e.target.composing||(t.endDateStr=e.target.value)}}})],1),t._v(" "),a("li",[a("label",[t._v("订单号：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.orderNum,expression:"orderNum",modifiers:{trim:!0}}],staticClass:"input-medium",attrs:{type:"text"},domProps:{value:t.orderNum},on:{input:function(e){e.target.composing||(t.orderNum=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("li",[a("label",[t._v("商户简称：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.shopName,expression:"shopName",modifiers:{trim:!0}}],staticClass:"input-medium",attrs:{type:"text"},domProps:{value:t.shopName},on:{input:function(e){e.target.composing||(t.shopName=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[t._v("已购服务类型：")]),t._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:t.selectObjc.serviceTypeList.options,"select-more-config":t.selectMoreConfig,label:"label",identity:"buyServerType",width:"258px"},model:{value:t.selectObjc.serviceTypeList.model,callback:function(e){t.$set(t.selectObjc.serviceTypeList,"model",e)},expression:"selectObjc.serviceTypeList.model"}})],1),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:0===t.tabFlag,expression:"tabFlag === 0"}],staticStyle:{"margin-left":"10px"}},[a("label",[t._v("服务项目：")]),t._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:t.selectObjc.serviceCodeList.options,"select-more-config":t.selectMoreConfig,label:"label",identity:"serviceCode",width:"258px"},model:{value:t.selectObjc.serviceCodeList.model,callback:function(e){t.$set(t.selectObjc.serviceCodeList,"model",e)},expression:"selectObjc.serviceCodeList.model"}})],1),t._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[t._v("是否已完成交付：")]),t._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:t.selectObjc.completeDelivery.options,"select-more-config":t.selectMoreConfig,label:"label",identity:"completeDelivery",width:"165px"},model:{value:t.selectObjc.completeDelivery.model,callback:function(e){t.$set(t.selectObjc.completeDelivery,"model",e)},expression:"selectObjc.completeDelivery.model"}})],1),t._v(" "),a("li",{staticStyle:{"margin-left":"10px"}},[a("label",[t._v("是否延期交付：")]),t._v(" "),a("select-more",{staticStyle:{float:"right",background:"#fff"},attrs:{"is-disabled":!0,options:t.selectObjc.delayDelivery.options,"select-more-config":t.selectMoreConfig,label:"label",identity:"delayDelivery",width:"165px"},model:{value:t.selectObjc.delayDelivery.model,callback:function(e){t.$set(t.selectObjc.delayDelivery,"model",e)},expression:"selectObjc.delayDelivery.model"}})],1),t._v(" "),a("li",{staticClass:"btns"},[a("button",{staticClass:"btn btn-primary",on:{click:t.getData}},[t._v("查询")])]),t._v(" "),a("li",{staticClass:"btns"},[a("button",{staticClass:"btn btn-warning",on:{click:t.clearForm}},[t._v("重置")])])])])]),t._v(" "),a("ul",{staticClass:"nav nav-pills"},[t.personalFirst?a("li",{staticClass:"acttitle",class:{active:0===t.tabFlag},on:{click:function(e){t.tabFirst(0)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("上门交付服务")])]):t._e(),t._v(" "),t.personalTwo?a("li",{staticClass:"acttitle",class:{active:1===t.tabFlag},on:{click:function(e){t.tabFirst(1)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("售后上门培训（收费）")])]):t._e(),t._v(" "),t.personalThree?a("li",{staticClass:"acttitle",class:{active:2===t.tabFlag},on:{click:function(e){t.tabFirst(2)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("物料更新服务")])]):t._e()]),t._v(" "),a("div",{staticClass:"border-wrap margin-bottom-10 statistics-wrapper"},[a("div",{staticClass:"statistics-box"},[a("div",{staticClass:"statistics-table"},[a("table",{staticClass:"table table-striped table-bordered table-condensed",attrs:{id:"contentTable"}},[a("thead",[a("tr",[t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),0===t.tabFlag?a("th",[a("div",{staticClass:"th width150"},[t._v("已购服务类型")])]):t._e(),t._v(" "),0===t.tabFlag?a("th",[a("div",{staticClass:"th width150"},[t._v("服务项目")])]):t._e(),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),0===t.tabFlag?[t.openDelayFlag||t.materielDelayFlag||t.operationDelayFlag?a("th",{attrs:{colspan:t.thCountDelay}},[a("div",{staticClass:"th width180 bor-bom"},[a("span",[t._v("是否延迟完成服务")]),t._v(" "),a("div",{staticClass:"check-content blue"},[a("span",{staticClass:"check",attrs:{title:t.delayServiceContentArr}},[t._v("?")])])]),t._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[t.openDelayFlag?a("span",[t._v("开户顾问")]):t._e(),t._v(" "),t.materielDelayFlag?a("span",[t._v("物料顾问")]):t._e(),t._v(" "),t.operationDelayFlag?a("span",[t._v("运营顾问")]):t._e()])]):t._e(),t._v(" "),t.openDelayDuration||t.materielDelayDuration||t.operationDelayDuration?a("th",{attrs:{colspan:t.thCountDuration}},[a("div",{staticClass:"th width180 bor-bom"},[t._v("延迟完成服务时长")]),t._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[t.openDelayDuration?a("span",[t._v("开户顾问")]):t._e(),t._v(" "),t.materielDelayDuration?a("span",[t._v("物料顾问")]):t._e(),t._v(" "),t.operationDelayDuration?a("span",[t._v("运营顾问")]):t._e()])]):t._e()]:1===t.tabFlag?[a("th",[a("div",{staticClass:"th width120"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t是否延迟完成服务\n\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticClass:"check-content blue"},[a("span",{staticClass:"check",attrs:{title:t.delayServiceContentArr}},[t._v("?")])])])]),t._v(" "),t._m(11)]:2===t.tabFlag?[t.materielDelayFlag||t.operationDelayFlag?a("th",{attrs:{colspan:2}},[a("div",{staticClass:"th width180 bor-bom"},[a("span",[t._v("是否延迟完成服务")]),t._v(" "),a("div",{staticClass:"check-content blue"},[a("span",{staticClass:"check",attrs:{title:t.delayServiceContentArr}},[t._v("?")])])]),t._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[t.materielDelayFlag?a("span",[t._v("物料顾问")]):t._e(),t._v(" "),t.operationDelayFlag?a("span",[t._v("运营顾问")]):t._e()])]):t._e(),t._v(" "),t.materielDelayDuration||t.operationDelayDuration?a("th",{attrs:{colspan:2}},[a("div",{staticClass:"th width180 bor-bom"},[t._v("延迟完成服务时长")]),t._v(" "),a("div",{staticClass:"thselect ot width180 flex-div"},[t.materielDelayDuration?a("span",[t._v("物料顾问")]):t._e(),t._v(" "),t.operationDelayDuration?a("span",[t._v("运营顾问")]):t._e()])]):t._e()]:t._e(),t._v(" "),t._m(12),t._v(" "),t._m(13)],2)]),t._v(" "),a("tbody",[t.loding?[t._m(14)]:t.statisticsList.length>0?t._l(t.statisticsList,function(e){return a("tr",[a("td",[a("a",{staticClass:"blue",attrs:{target:"view_window",href:t.ctx+"/order/erpOrderOriginalInfo/form?id="+e.orderId}},[t._v(t._s(e.orderNum))])]),t._v(" "),a("td",[t._v(t._s(e.buyDate))]),t._v(" "),a("td",[e.shopId?[a("a",{staticClass:"blue",attrs:{target:"view_window",href:t.ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+e.shopId}},[t._v(t._s(e.shopName))])]:[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.shopName)+"\n\t\t\t\t\t\t\t\t\t\t")]],2),t._v(" "),0===t.tabFlag?a("td",[t._v(t._s(e.serviceTypeNames||"/")+" ")]):t._e(),t._v(" "),0===t.tabFlag?a("td",[a("div",{staticClass:"omit-sheng-0230",attrs:{title:e.serviceItemName}},[t._v(t._s(e.serviceItemName||"/"))])]):t._e(),t._v(" "),a("td",[t._v(t._s(e.operationAdviserName||"/"))]),t._v(" "),a("td",[t._v(t._s(e.startTime||"/"))]),t._v(" "),a("td",[t._v(t._s(e.shouldFlowEndTime||"/"))]),t._v(" "),a("td",[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:function(a){t.goInfoPage(e.procInsId)}}},[t._v("查看")])]),t._v(" "),a("td",[t._v(t._s(e.flowEndFlag||"/"))]),t._v(" "),a("td",[t._v(t._s(e.flowEndTime||"/"))]),t._v(" "),a("td",[t._v(t._s(e.delayFlag||"/"))]),t._v(" "),0===t.tabFlag?[t.openDelayFlag||t.materielDelayFlag||t.operationDelayFlag?[t.openDelayFlag?a("td",{on:{dblclick:function(a){t.dbTimeContent(e.trainTestTime,e.shouldTrainTestTime,e.openDelayFlag)}}},[t._v(t._s(e.openDelayFlag||"/"))]):t._e(),t._v(" "),t.materielDelayFlag?a("td",{on:{dblclick:function(a){t.dbTimeContent(e.materielTime,e.shouldMaterielTime,e.materielDelayFlag)}}},[t._v(t._s(e.materielDelayFlag||"/"))]):t._e(),t._v(" "),t.operationDelayFlag?a("td",{on:{dblclick:function(a){t.dbTimeContent(e.visitServiceTime,e.shouldVisitServiceTime,e.operationDelayFlag)}}},[t._v(t._s(e.operationDelayFlag||"/"))]):t._e()]:t._e(),t._v(" "),t.openDelayDuration||t.materielDelayDuration||t.operationDelayDuration?[t.openDelayDuration?a("td",[t._v(t._s(e.openDelayDuration||"/"))]):t._e(),t._v(" "),t.materielDelayDuration?a("td",[t._v(t._s(e.materielDelayDuration||"/"))]):t._e(),t._v(" "),t.operationDelayDuration?a("td",[t._v(t._s(e.operationDelayDuration||"/"))]):t._e()]:t._e()]:t._e(),t._v(" "),1===t.tabFlag?[a("td",{on:{dblclick:function(a){t.dbTimeContent(e.visitServiceTime,e.shouldVisitServiceTime,e.delayFlag)}}},[t._v(t._s(e.delayFlag||"/"))]),t._v(" "),a("td",[t._v(t._s(e.delayDuration||"/"))])]:t._e(),t._v(" "),2===t.tabFlag?[t.materielDelayFlag||t.operationDelayFlag?[t.materielDelayFlag?a("td",{on:{dblclick:function(a){t.dbTimeContent(e.materielTime,e.shouldMaterielTime,e.materielDelayFlag)}}},[t._v(t._s(e.materielDelayFlag||"/"))]):t._e(),t._v(" "),t.operationDelayFlag?a("td",{on:{dblclick:function(a){t.dbTimeContent(e.visitServiceTime,e.shouldVisitServiceTime,e.operationDelayFlag)}}},[t._v(t._s(e.operationDelayFlag||"/"))]):t._e()]:t._e(),t._v(" "),t.materielDelayDuration||t.operationDelayDuration?[t.materielDelayDuration?a("td",[t._v(t._s(e.materielDelayDuration||"/"))]):t._e(),t._v(" "),t.operationDelayDuration?a("td",[t._v(t._s(e.operationDelayDuration||"/"))]):t._e()]:t._e()]:t._e(),t._v(" "),a("td",[a("div",{staticClass:"omit-sheng-0230",attrs:{title:e.excptionLogo}},[t._v(t._s(e.excptionLogo||"/"))])]),t._v(" "),a("td",[a("a",{staticClass:"blue",attrs:{target:"view_window",href:t.ctx+"/order/erpOrderOriginalInfo/form?id="+e.orderId}},[t._v("查看订单详情")]),t._v(" "),e.shopId?[a("a",{staticClass:"blue",attrs:{target:"view_window",href:t.ctx+"/store/basic/erpStoreInfo/urlErpShopInfoList?id="+e.shopId}},[t._v("查看商户资料")])]:[t._v("\n\t\t\t\t\t\t\t\t\t\t\t查看商户资料\n\t\t\t\t\t\t\t\t\t\t")]],2)],2)}):[t._m(15)]],2)])])])])]),t._v(" "),t.total>t.pageSize?[a("pagination",{attrs:{total:t.total,perPages:7,pageIndex:1,pageSize:t.pageSize},on:{change:t.pageChange}})]:t._e(),t._v(" "),a("form",{ref:"exportexcel",staticClass:"hide",attrs:{action:t.ctx+"/statistics/deliveryService/exportUser",method:"post"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exportParams,expression:"exportParams"}],attrs:{type:"hidden",name:"jsonObject"},domProps:{value:t.exportParams},on:{input:function(e){e.target.composing||(t.exportParams=e.target.value)}}})])],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"acttitle active"},[e("a",{attrs:{href:"javascript:;"}},[this._v("个人订单管理")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width100"},[this._v("订单号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width100"},[this._v("购买时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width100"},[this._v("商户简称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width150"},[this._v("运营顾问")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width150"},[this._v("启动时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width100"},[this._v("应完成交付时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width100 blue"},[this._v("任务进度详情")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width120"},[this._v("是否已完成交付")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width150"},[this._v("实际完成交付时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width120"},[this._v("是否延期交付")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width120"},[this._v("延迟完成服务时长")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width120"},[this._v("服务异常原因")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("div",{staticClass:"th width240"},[this._v("操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"22"}},[e("div",{staticStyle:{height:"300px"}},[this._v("加载中...")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"25"}},[e("div",{staticStyle:{height:"300px"}},[this._v("暂无数据，请重新查询")])])])}]};var y=a("VU/8")(f,g,!1,function(t){a("3r0Q")},null,null).exports;r.default.config.productionTip=!1,r.default.config.devtools=!1,new r.default(s()({},y)).$mount("#rootNode")},ZdvV:function(t,e){}},["PeYv"]);